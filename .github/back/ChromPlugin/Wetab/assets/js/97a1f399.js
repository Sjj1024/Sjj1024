"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[335,6501],{22854:(t,e,o)=>{o.d(e,{C:()=>i});var a=o(29445),r=o(57268);const i=(t,e,o)=>{const i=(0,a.iH)(t);e.onChangeState=t=>{i.value={...t}};const s=(0,r.Fl)((()=>o?o[i.value.size]:null));return{propsState:i,HomeComp:s}}},50335:(t,e,o)=>{o.r(e),o.d(e,{mountHome:()=>C,widgetApp:()=>I});var a=o(29445),r=o(68398),i=o(96755),s=o(57268),l=o(36501),n=o(94209),c=o(63477);const p={class:"content relative flex h-full flex-col items-center pt-[24px] pb-[40px] leading-none icon-m:pt-[16px] icon-m:pb-[20px] icon-s:pt-[12px] icon-s:pb-[19px]"},m={class:"pb-[34px] font-ali-55 text-[12px] font-[400] opacity-60 icon-m:pb-[26px] icon-s:pb-[24px]"},x={class:"flex flex-row items-baseline pb-[20px] font-ali-65 text-[#FFF]"},d={class:"text-[16px]"},g={class:"ml-[4px] text-[16px]"},h={class:"absolute bottom-[40px] flex flex-row items-center font-ali-55 text-[12px] text-[#FFF] opacity-60 icon-m:bottom-[20px] icon-s:bottom-[19px]"},u=(0,s._)("div",{class:"mr-[4px] h-[1px] w-[24px] bg-[#FFF]"},null,-1),f=(0,s._)("div",{class:"ml-[4px] h-[1px] w-[24px] bg-[#FFF]"},null,-1),b=(0,s.aZ)({__name:"celebrity-home-large",setup(t){const e=(0,l.useCelebrityStore)(),o=(0,s.Fl)((()=>({backgroundImage:`url(${(0,c.Em)(e.bgImage.large,"default",532)})`})));return(t,i)=>((0,s.wg)(),(0,s.iD)("section",{class:"relative h-full bg-cover bg-center bg-no-repeat px-[32px] text-color-white transition-[background,color] icon-m:px-[32px] icon-s:px-[20px]",style:(0,n.normalizeStyle)((0,a.SU)(o))},[(0,s._)("div",p,[(0,s._)("h1",m,(0,n.toDisplayString)("每日一言"),1),(0,s._)("div",x,[(0,s._)("span",d,(0,n.toDisplayString)((0,a.SU)(e).currentDate.date),1),(0,s._)("span",g,(0,n.toDisplayString)((0,a.SU)(e).currentDate.weekday),1)]),(0,s._)("div",{class:"max-h-[40px] overflow-y-scroll break-words text-center font-ali-55 text-[14px] font-[300] leading-[20px] tracking-[1px] text-[#FFF] scrollbar-none",onWheel:i[0]||(i[0]=(0,r.withModifiers)((()=>{}),["stop"]))},(0,n.toDisplayString)((0,a.SU)(e).words.hitokoto),33),(0,s._)("h1",h,[u,(0,s.Uk)(" "+(0,n.toDisplayString)((0,a.SU)(e).words.formWho)+" ",1),f])])],4))}}),w={class:"absolute top-[20px] flex w-full flex-row justify-center font-ali-55 text-[12px] font-[400] text-[#FFF] opacity-60 icon-m:top-[16px] icon-s:top-[12px]"},y={class:"content relative flex h-full flex-col items-center justify-center px-[20px] py-[40px] leading-none icon-m:px-[16px] icon-m:py-[35px] icon-s:px-[12px] icon-s:py-[30px]"},v={class:"flex flex-col items-center"},F={class:"invisible flex flex-row items-center text-[12px] text-[#FFF] opacity-60 icon-m:pr-[16px] icon-s:pr-[12px]"},_=(0,s._)("div",{class:"mr-[4px] h-[1px] w-[24px] bg-[#FFF] font-ali-55"},null,-1),S={class:"flex flex-row items-center self-end font-ali-55 text-[12px] text-[#FFF] opacity-60"},D=(0,s._)("div",{class:"mr-[4px] h-[1px] w-[24px] bg-[#FFF]"},null,-1),k=(0,s.aZ)({__name:"celebrity-home-medium",setup(t){const e=(0,l.useCelebrityStore)(),o=(0,s.Fl)((()=>({backgroundImage:`url(${(0,c.Em)(e.bgImage.medium,"default",236)})`})));return(t,i)=>((0,s.wg)(),(0,s.iD)("section",{class:"relative h-full bg-cover bg-center bg-no-repeat text-color-white transition-[background,color]",style:(0,n.normalizeStyle)((0,a.SU)(o))},[(0,s._)("h1",w,(0,n.toDisplayString)("每日一言"),1),(0,s._)("div",y,[(0,s._)("div",v,[(0,s._)("h1",F,[_,(0,s.Uk)(" "+(0,n.toDisplayString)((0,a.SU)(e).words.formWho),1)]),(0,s._)("div",{class:"mb-[12px] max-h-[80px] overflow-y-scroll break-words font-ali-55 text-[14px] font-[300] leading-[20px] tracking-[1px] text-[#FFF] scrollbar-none",onWheel:i[0]||(i[0]=(0,r.withModifiers)((()=>{}),["stop"]))},(0,n.toDisplayString)((0,a.SU)(e).words.hitokoto),33),(0,s._)("h1",S,[D,(0,s.Uk)(" "+(0,n.toDisplayString)((0,a.SU)(e).words.formWho),1)])])])],4))}});var M=o(22854);const U=(0,s.aZ)({__name:"widget-celebrity-home",props:{size:null,widgetData:null,id:null},setup(t){const e=t,o={m:k,l:b},{HomeComp:r,propsState:i}=(0,M.C)(e,I.value,o),n=(0,l.useCelebrityStore)(),c=()=>{n.setModal(!0)};return(t,e)=>((0,s.wg)(),(0,s.iD)("section",{class:"contents cursor-pointer",onClick:c},[((0,s.wg)(),(0,s.j4)((0,s.LL)((0,a.SU)(r)),{state:(0,a.SU)(i).widgetData},null,8,["state"]))]))}});var W=o(75008);const I=(0,a.iH)(null),C=(t,e)=>{const o=(0,r.createApp)(U,e);return(0,W.f)(o),I.value=o,o.use(i.M),o.mount(t),I.value}},36501:(t,e,o)=>{o.r(e),o.d(e,{useCelebrityStore:()=>b,widgetInfo:()=>f});var a=o(10435),r=o(74003),i=o(80661),s=o.n(i);const l=[...Array(35)].map(((t,e)=>{let o=e+1;return o=o<10?"0"+o:o,`${r.c1}/hitab/celebrity-widget/large/celebrity_${o}_large.jpg`})),n=[...Array(35)].map(((t,e)=>{let o=e+1;return o=o<10?"0"+o:o,`${r.c1}/hitab/celebrity-widget/medium/celebrity_${o}_medium.jpg`})),c=[...Array(35)].map(((t,e)=>{let o=e+1;return o=o<10?"0"+o:o,`${r.c1}/hitab/celebrity-widget/background/celebrity_${o}.jpg`})),p=s()(),m={updateTime:Date.now(),modalShow:!1,words:r.sM?{form:"《三体》",formWho:"刘慈欣",hitokoto:"我们都是阴沟里的虫子，但总还是得有人仰望星空"}:{form:"",formWho:"Martin Luther King",hitokoto:"To do the right thing, any time is a good time"},currentDate:{weekday:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"][p.day()],date:r.sM?p.format("YYYY年MM月DD日"):p.format("YYYY-MM-DD")},bgImage:{randomNum:0,large:l[1],medium:n[1],modal:c[1]}};var x=o(24581),d=o(28850),g=o(88287);var h=o(63477),u=o(94119);const f=(0,x.E0)(x.Rm.celebrity),b=(0,a.Q_)(d.BU.celebrity,{syncStorage:{watch:["words","bgImage","updateTime"]},state:()=>({...m}),actions:{setModal(t){u.G.setStatus(x.Rm.celebrity,t),this.modalShow=t},saveWordsData(t){this.words={...this.words,...t}},saveBgImageData(t){this.bgImage={...this.bgImage,...t}},loadOrRefreshWordsData(){const t=this.updateTime,e=Date.now();s()(t).add(1,"day").get("date")<=s()(e).get("date")&&this.refreshWords()},async refreshWords(){const[t,e]=r.sM?await(async()=>{try{const t=await g.hj.post("https://v1.hitokoto.cn/?c=d&c=e&c=h&c=i&c=k",{},{_single:!0});if(t)return[null,{formWho:t.from_who||"佚名",hitokoto:t.hitokoto||"",form:`《${t.from}》`||""}];throw t}catch(t){return["catch error"]}})():await(async()=>{try{const t=await fetch("https://api.api-ninjas.com/v1/quotes",{headers:{"X-Api-Key":"PYP49gtoPPS3aDxgWeZzig==xjJf3oA01gItulfv"}}),e=await t.json();if(e)return[null,{formWho:e[0].author||"unknown",hitokoto:e[0].quote||"",form:""}];throw e}catch(t){return["catch error"]}})();t||(this.saveWordsData(e||{}),this.updateTime=Date.now())},async prefetchModalBg(t){await(0,h.pt)((0,h.Em)(t,"default",1024),!0)},async setRandomBg(){const t=(this.bgImage.randomNum+1)%l.length;await this.prefetchModalBg(c[t]),this.saveBgImageData({randomNum:t,large:l[t],medium:n[t],modal:c[t]})}}})}}]);