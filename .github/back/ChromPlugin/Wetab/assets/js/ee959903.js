"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[254],{40294:(e,l,t)=>{t.d(l,{Z:()=>F});var a=t(87678),o=t(85763),s=t(25739),i=t(57268),n=t(94209),r=t(29445),c=t(73186),m=t(30789),d=t(68398),u=t(55943),p=t(61045),g=t(17319),x=t(22140),b=t(63477),v=t(96643),h=t(1585);const f={class:"timer-bg-img"},_={class:"inline-flex flex-nowrap px-[24px]"},w=[(0,i._)("div",{class:"absolute top-[50%] left-[50%] h-[2px] w-[20px] -translate-y-1/2 -translate-x-1/2 rotate-180 rounded-[2px] bg-color-blue"},null,-1),(0,i._)("div",{class:"absolute top-[50%] left-[50%] h-[20px] w-[2px] -translate-y-1/2 -translate-x-1/2 rounded-[2px] bg-color-blue"},null,-1)],k=["onClick"],y=["src"],S={class:"mx-[24px] mt-[16px] flex items-center justify-between"},I={class:"mr-[50px] flex-shrink-0 text-[14px] text-color-t2"},C={class:"flex flex-1 items-center"},U={class:"flex-1"},Z={class:"relative ml-[16px] h-[24px] w-[44px] flex-shrink-0 overflow-hidden rounded-[4px] bg-color-m2 bg-opacity-[0.06] text-center leading-[24px]"},W=(0,i._)("span",{class:"absolute top-[1px] right-[3px] text-[11px] text-color-t3"},"%",-1),D=(0,i.aZ)({__name:"timer-bg-img",props:{bgImageColor:null,bgMask:null},emits:["on-change-img","update:bgMask"],setup(e,l){let{emit:t}=l;const a=e;u.ZP.use(p.Z);const o=(0,r.iH)(null),s=(0,i.Fl)({get:()=>a.bgMask,set(e){t("update:bgMask",e)}});(0,i.bv)((()=>{new u.ZP(o.value,{...h.IO,scrollX:!0,scrollY:!1,mouseWheel:!0,bounce:!1,momentum:!1})}));const D=(0,r.iH)(!1),z=(0,r.iH)(""),M=async e=>{const l=await q(e.blob);t("on-change-img",{bgImageColor:e.bgColor,bgImage:{large:l,medium:l,small:l}})},H=new g.k,q=async e=>{if(e.size>4194304)throw g.R.fail({message:"文件大小超出限制"}),new Error("limit size");H.loading({message:"上传中",duration:6e4});const[l,t]=await(0,v.E)("user-widget-background",e);if(H.hide(),l)throw g.R.fail({message:"上传失败"}),new Error(l);return t},F=()=>{const e=(0,x.useUserStore)();if(e.isLogin){const e=document.createElement("input");e.type="file",e.click(),e.addEventListener("change",(e=>{var l;const t=(0,b.Uu)(null===(l=e.target.files)||void 0===l?void 0:l[0]);D.value=!0,z.value=t}))}else g.R.warn({message:"请登录后再上传图片",btnText:"去登录",onBtnClick:()=>{e.showLogin(!1)}})};return(e,l)=>{const u=(0,i.up)("van-slider"),p=m.Z;return(0,i.wg)(),(0,i.iD)("section",f,[(0,i._)("div",{ref_key:"wrapperRef",ref:o,class:"overflow-hidden"},[(0,i._)("div",_,[(0,i._)("div",{class:"relative h-[76px] w-[60px] flex-shrink-0 cursor-pointer rounded-[8px] bg-color-m2 bg-opacity-[0.06]",onClick:F},w),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(c.t4),(l=>((0,i.wg)(),(0,i.iD)("div",{key:l.thumbnail,class:"ml-[12px] h-[76px] w-[60px] flex-shrink-0 basis-[60px] cursor-pointer overflow-hidden rounded-[8px]",onClick:e=>(e=>{t("on-change-img",{bgImage:e.bgImage,bgImageColor:""})})(l)},[(0,i._)("img",{src:e.getQiniuImage(l.thumbnail,"default",60)},null,8,y)],8,k)))),128))])],512),(0,i._)("div",S,[(0,i._)("span",I,(0,n.toDisplayString)("遮罩"),1),(0,i._)("div",C,[(0,i._)("div",U,[(0,i.Wm)(u,{modelValue:(0,r.SU)(s),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,r.dq)(s)?s.value=e:null),"bar-height":"4px","active-color":"rgb(var(--color-t1)/1)","inactive-color":"rgb(var(--color-m2) / 0.1)"},null,8,["modelValue"])]),(0,i._)("div",Z,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>(0,r.dq)(s)?s.value=e:null),class:"h-full w-full bg-[transparent] pl-[3px] pr-[17px] text-right text-[14px] text-color-t2",type:"number",max:"100",min:"0"},null,512),[[d.vModelText,(0,r.SU)(s)]]),W])])]),(0,i.Wm)(p,{show:D.value,"onUpdate:show":l[2]||(l[2]=e=>D.value=e),img:z.value,"onUpdate:img":l[3]||(l[3]=e=>z.value=e),"bg-color":a.bgImageColor,fixed:!1,"max-img-size":1064,title:"图标裁剪",onCropperSuccess:M},null,8,["show","img","bg-color","title"])])}}}),z={class:"timer-modal-sidebar leading-none text-color-t2"},M={class:"mx-[24px]"},H={class:"mt-[24px]"},q={class:"mx-[24px]"},F=(0,i.aZ)({__name:"timer-modal-sidebar",props:{timerStyle:null},emits:["on-change"],setup(e,l){let{emit:t}=l;const m=e,d=(0,i.Fl)({get:()=>m.timerStyle.fontColor,set(e){t("on-change",{fontColor:e})}}),u=(0,i.Fl)({get:()=>"image"===m.timerStyle.bgType?0:1,set(e){t("on-change",{bgType:0===e?"image":"color"})}}),p=(0,i.Fl)({get:()=>m.timerStyle.bgColor,set(e){t("on-change",{bgColor:e})}}),g=(0,i.Fl)({get:()=>m.timerStyle.bgMask,set(e){t("on-change",{bgMask:e})}});return(e,l)=>{const x=s.Z,b=o.Z,v=a.Z;return(0,i.wg)(),(0,i.iD)("section",z,[(0,i.WI)(e.$slots,"default"),(0,i._)("div",M,[(0,i._)("h1",null,(0,n.toDisplayString)("字体颜色"),1),(0,i.Wm)(x,{value:(0,r.SU)(d),"onUpdate:value":l[0]||(l[0]=e=>(0,r.dq)(d)?d.value=e:null),"radio-size":20,class:"mt-[14px]",colors:(0,r.SU)(c.O9).font},null,8,["value","colors"])]),(0,i._)("div",H,[(0,i._)("h1",q,(0,n.toDisplayString)("背景"),1),(0,i.Wm)(v,{active:(0,r.SU)(u),"onUpdate:active":l[4]||(l[4]=e=>(0,r.dq)(u)?u.value=e:null),"header-class":"mx-[24px]",class:"mt-[14px] h-[180px]","x-space":0},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{title:"图片"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{bgMask:(0,r.SU)(g),"onUpdate:bgMask":l[1]||(l[1]=e=>(0,r.dq)(g)?g.value=e:null),"bg-image-color":m.timerStyle.bgImageColor,onOnChangeImg:l[2]||(l[2]=e=>t("on-change",{bgImage:e.bgImage,bgImageColor:e.bgImageColor}))},null,8,["bgMask","bg-image-color"])])),_:1},8,["title"]),(0,i.Wm)(b,{title:"颜色"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{value:(0,r.SU)(p),"onUpdate:value":l[3]||(l[3]=e=>(0,r.dq)(p)?p.value=e:null),"radio-size":20,class:"mx-[24px] pt-[4px]",colors:(0,r.SU)(c.O9).background},null,8,["value","colors"])])),_:1},8,["title"])])),_:1},8,["active"])])])}}})},47895:(e,l,t)=>{t.d(l,{Z:()=>u});var a=t(57268),o=t(29445);const s={class:"timer-modal h-full w-full"},i={class:"h-[56px] border-b-[1px] border-color-m2 border-opacity-[0.08] text-center text-[16px] leading-[56px] text-color-t1"},n={class:"modal-content flex h-[calc(100%_-_56px)] bg-color-b3"},r={class:"sidebar-box hi-scroll relative overflow-x-hidden pb-[10px]"},c={class:"flex h-[78px] items-center justify-center border-t-[1px] border-color-m2 border-opacity-[0.08] bg-color-b4 px-[24px]"},m={class:"flex-grow"},d=(0,a.aZ)({__name:"timer-modal",setup(e){const l=(0,o.iH)();return(e,t)=>((0,a.wg)(),(0,a.iD)("section",s,[(0,a._)("div",i,[(0,a.WI)(e.$slots,"title")]),(0,a._)("div",n,[(0,a._)("div",{ref_key:"leftContainerRef",ref:l,class:"left-content relative flex h-full w-[400px] flex-shrink-0 flex-col border-r-[1px] border-color-m2 border-opacity-[0.08]"},[(0,a._)("div",r,[(0,a.WI)(e.$slots,"left",{containerRef:l.value})]),(0,a._)("div",c,[(0,a.WI)(e.$slots,"footer")])],512),(0,a._)("div",m,[(0,a.WI)(e.$slots,"right")])])]))}});const u=(0,t(76911).Z)(d,[["__scopeId","data-v-452a2c39"]])},62144:(e,l,t)=>{t.d(l,{Z:()=>v});var a=t(87678),o=t(85763),s=t(57268),i=t(29445),n=t(94209);const r=e=>((0,s.dD)("data-v-f0b56ae0"),e=e(),(0,s.Cn)(),e),c={class:"timer-preview icon-home-large h-full pt-[16px] icon-m:icon-home-medium icon-s:icon-home-small"},m={class:"h-full"},d={class:"flex items-center justify-center font-ali-55 leading-none text-color-t3"},u=r((()=>(0,s._)("span",{class:"mx-[6px] inline-block h-[4px] w-[4px] rounded-[50%] bg-color-t3"},null,-1))),p={class:"flex h-[calc(100%-14px)] flex-col items-center justify-center mb:mt-[10px] mb:h-auto"},g=r((()=>(0,s._)("div",{class:"holder h-[100px] shrink"},null,-1))),x=r((()=>(0,s._)("div",{class:"holder h-[200px] shrink"},null,-1))),b=(0,s.aZ)({__name:"timer-preview",props:{sizes:null,defaultSize:null},setup(e){const l=e,t=(0,i.iH)(0),r={s:{matrix:"1x2",name:"小"},m:{matrix:"2x2",name:"中"},l:{matrix:"2x4",name:"大"}},b=(0,s.Fl)((()=>l.sizes.map((e=>({key:e,...r[e]})))));return(0,s.YP)((()=>l.defaultSize),(()=>{const e=b.value.findIndex((e=>e.key===l.defaultSize));e>-1&&(t.value=e)}),{immediate:!0}),(e,l)=>{const r=o.Z,v=a.Z;return(0,s.wg)(),(0,s.iD)("section",c,[(0,s.Wm)(v,{active:t.value,"onUpdate:active":l[0]||(l[0]=e=>t.value=e),"header-class":"min-w-[240px]  m-auto overflow-hidden rounded-[16px]","header-item-class":"rounded-[16px] !h-[24px]",class:"h-full","x-space":0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,i.SU)(b),(l=>((0,s.wg)(),(0,s.j4)(r,{key:l.key,title:l.name},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("div",d,[(0,s.Uk)((0,n.toDisplayString)("预览")+" ",1),u,(0,s.Uk)(" "+(0,n.toDisplayString)(l.matrix),1)]),(0,s._)("div",p,[g,(0,s._)("div",{class:(0,n.normalizeClass)(["item shrink-0 grow-0",["item-"+l.key]])},[(0,s.WI)(e.$slots,"item",{size:l.key})],2),x])])])),_:2},1032,["title"])))),128))])),_:3},8,["active"])])}}});const v=(0,t(76911).Z)(b,[["__scopeId","data-v-f0b56ae0"]])}}]);