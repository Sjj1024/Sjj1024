"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[1847],{2211:(e,t,o)=>{o.d(t,{O:()=>a});var l=o(29445);const a=()=>{const e=(0,l.iH)(!1);return{fullScreen:e,setSullScreen:t=>{e.value=t}}}},27276:(e,t,o)=>{o.r(t);o(57334);var l=o(66155),a=o(68398),n=o(79282),r=o(43451),i=o(57268),s=o(29445),d=o(94209),p=o(34594),c=o(2211),u=o(88265);var x=o(17530),v=o(52861),h=o(9057);const m=["data-id"],g={class:"flex w-[210px] items-center"},y=(e=>((0,i.dD)("data-v-32298c76"),e=e(),(0,i.Cn)(),e))((()=>(0,i._)("div",{class:"icon h-[16px] w-[16px] shrink-0 bg-cover"},null,-1))),w=["readonly","disabled","value"],f={class:"w-[30px] text-right font-ali-75 text-color-t3"},b=(0,i.aZ)({__name:"group-list-item",props:{group:null,index:null},setup(e,t){let{expose:o}=t;const l=e,n=(0,v.useTodoStore)(),r=(0,s.iH)(!1),c=(0,s.iH)({edit:{text:"重命名",handler(){T()}},remove:{text:"删除",handler(){l.group.children.length>0?h.u.open({title:"提醒",message:"删除分组将同时删除分组下的所有待办事项。",okText:"删除",onOk:()=>{n.deleteGroup(l.group.id)}}):n.deleteGroup(l.group.id)}}}),{group:u,index:b}=(0,s.BK)(l),{activeGroupIndex:S,activeSearch:_}=(0,p.Iz)(),U=(0,s.iH)(null),{editMode:k,onClick:C,onBlur:D}=(0,p.Yt)(),T=()=>{var e;C(b.value),null===(e=U.value)||void 0===e||e.focus()};o({focus:T,id:l.group.id});const I=(0,i.Fl)((()=>{var e,t,o;return n.finishedShow?null===(e=u.value)||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length:null===(o=u.value.children.filter((e=>!e.finished)))||void 0===o?void 0:o.length}));return(e,t)=>{const o=x.Z;return(0,i.wg)(),(0,i.iD)("section",{class:(0,d.normalizeClass)([[(0,s.SU)(k)?" cursor-auto bg-color-m2 bg-opacity-[0.06]":(0,s.SU)(b)!==(0,s.SU)(S)||(0,s.SU)(_)?"cursor-pointer bg-color-none":"active cursor-auto !bg-color-white dark:!bg-opacity-20",(0,s.SU)(n).dragGroupId===l.group.id?" opacity-50":""],"group relative mt-[4px] flex h-[36px] w-[260px] items-center justify-between rounded-[8px] px-[8px] leading-none transition-[background-color,box-shadow] hover:bg-color-m2 hover:bg-opacity-[0.06]"]),"data-id":l.group.id},[(0,i._)("div",g,[y,(0,i._)("div",{class:"",onClick:t[2]||(t[2]=e=>(e=>{var t;C(e),null===(t=U.value)||void 0===t||t.focus()})((0,s.SU)(b)))},[(0,i._)("input",{ref_key:"inputRef",ref:U,class:(0,d.normalizeClass)(["name-input text-dot select-none border-0 bg-color-none px-[8px] font-ali-65 text-color-t2 outline-0",[(0,s.SU)(k)?" cursor-auto bg-color-m2 bg-opacity-[0.06]":"pointer-events-none cursor-pointer bg-color-none"]]),readonly:!(0,s.SU)(k),disabled:(0,s.SU)(b)!==(0,s.SU)(S),spellcheck:"false",maxlength:"100",value:(0,s.SU)(u).name,type:"text",onKeyup:t[0]||(t[0]=(0,a.withKeys)((e=>(0,s.SU)(D)(e,(0,s.SU)(u))),["enter"])),onBlur:t[1]||(t[1]=e=>(0,s.SU)(D)(e,(0,s.SU)(u)))},null,42,w)])]),(0,i._)("div",{onClick:t[4]||(t[4]=(0,a.withModifiers)((()=>{}),["stop"]))},[(0,i.Wm)(o,{show:r.value,"onUpdate:show":t[3]||(t[3]=e=>r.value=e),class:"",options:(0,s.SU)(c)},{reference:(0,i.w5)((()=>[(0,i._)("button",{class:(0,d.normalizeClass)(r.value?"block":(0,s.SU)(k)?"hidden":"hidden  group-hover:block")},[(0,i._)("i",{class:(0,d.normalizeClass)([[r.value?"text-opacity-80":"text-opacity-60 hover:text-opacity-80"],"iconfont icon-single_hover_icon text-[20px] text-color-t1"])},null,2)],2)])),_:1},8,["show","options"])]),(0,i._)("span",f,(0,d.toDisplayString)((0,s.SU)(I)),1)],10,m)}}});var S=o(76911);const _=(0,S.Z)(b,[["__scopeId","data-v-32298c76"]]);var U=o(49652);let k,C,D=0;const T=e=>((0,i.dD)("data-v-1efc991a"),e=e(),(0,i.Cn)(),e),I={class:"todo-modal-group p-[20px] pr-0"},Z={class:"pre-group mt-[20px] flex w-[260px] justify-between"},H=["onClick"],B={class:"text flex flex-col justify-between leading-none"},z={class:"font-ali-75 text-[16px] text-color-t3"},Y={class:"font-ali-65 text-color-t2"},W=T((()=>(0,i._)("div",{class:"icon h-[40px] w-[40px] rounded-[8px] bg-cover"},null,-1))),G={class:"mt-[24px] mb-[8px] w-[260px] text-center text-[12px] text-color-t3"},R=[T((()=>(0,i._)("i",{class:"iconfont icon-add_icon text-[16px] text-color-white"},null,-1)))],q=(0,i.aZ)({__name:"todo-modal-group",emits:["update:hideSideBar"],setup(e,t){let{emit:o}=t;const{itemRefs:l,setItemRef:n}=(()=>{const e=(0,s.iH)([]);return(0,i.Xn)((()=>{e.value=[]})),{setItemRef:t=>{t&&!e.value.find((e=>e.id===t.id))&&e.value.push(t)},itemRefs:e}})(),r=()=>{g(),(0,i.Y3)((()=>{y(l.value),F()}))},{searchValue:c,preGroup:x,customGroup:h,clickGroup:m,addGroup:g,editActive:y}=(0,p.Iz)();(0,i.bv)((()=>{f.value&&j()}));const w=(0,v.useTodoStore)(),f=(0,s.iH)();let b,S=0,T=0;const q=(0,s.iH)(!1),j=()=>{b=new U.O({dragRoot:f.value,dragSelector:".drag",dropRoot:f.value,dropSelector:".drop",dropLine:"y",withDragMoveStart:!0}),b.subscribe((e=>{switch(e.type){case"dragStart":q.value=!0;const{top:t,height:o}=f.value.getBoundingClientRect();S=t,T=t+o;break;case"dragMoveStart":const l=e.payload.dragElement.dataset.id;m(l),w.setDragGroupId(l),setTimeout((()=>{(e=>{let{y:t,dragElement:o}=e;const l=o.querySelector(".name-input");if(!l.readOnly&&!l.disabled)return;const{left:a,top:n,width:r,height:i}=o.getBoundingClientRect();D=t-n,k=o.cloneNode(!0),k.style.position="fixed",k.style.top="-999px",k.style.left=a+"px",k.style.width=r+"px",k.style.height=i+"px",k.style.pointerEvents="none",k.style.opacity="1",k.classList.add("fake"),C=document.querySelector(".todo-modal-group"),C.appendChild(k)})(e.payload)}),0);break;case"dragEnd":w.setDragGroupId(""),q.value=!1,K("stop"),k&&(C.removeChild(k),k=null);break;case"dragMove":(e=>{let{y:t,startMove:o}=e;if(!k)return;if(!o)return;const l=t-D;k.style.top=l+"px"})(e.payload),e.payload.y>T?K("bottom"):e.payload.y<S?K("top"):K("stop");break;case"drop":(e=>{let{dropElement:t}=e;if(!k)return;const o=(0,v.useTodoStore)();if(o.groupFlipping)return;const l=k.dataset.id,a=t.dataset.id;o.dragSortGroup(l,a)})(e.payload)}}))};let M=null;const K=e=>{window.clearInterval(M),"top"===e?M=window.setInterval((()=>{f.value.scrollBy(0,-6)}),30):"bottom"===e&&(M=window.setInterval((()=>{f.value.scrollBy(0,6)}),30))},F=()=>{o("update:hideSideBar",!0)},O=e=>{m(e),F()};return(e,t)=>{const o=u.Z;return(0,i.wg)(),(0,i.iD)("section",I,[(0,i.Wm)(o,{value:(0,s.SU)(c),"onUpdate:value":t[0]||(t[0]=e=>(0,s.dq)(c)?c.value=e:null),icon:"icon-magnifier_icon  !text-color-t2",placeholder:"搜索","always-show-close-btn":"",class:"search-input mt-[36px] w-[260px] flex-1"},null,8,["value","placeholder"]),(0,i._)("div",Z,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(x),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.type,class:(0,d.normalizeClass)(["item flex h-[60px] w-[124px] cursor-pointer justify-between rounded-[8px] bg-color-b4 p-[10px] pl-[16px] transition-[box-shadow,background-color]",e.class]),onClick:t=>O(e.type)},[(0,i._)("div",B,[(0,i._)("span",z,(0,d.toDisplayString)(e.num),1),(0,i._)("span",Y,(0,d.toDisplayString)(e.title),1)]),W],10,H)))),128))]),(0,i._)("div",G,(0,d.toDisplayString)("我的列表"),1),(0,i._)("div",{ref_key:"wrapperRef",ref:f,class:"custom-group hi-scroll pb-[12px]"},[(0,i.Wm)(a.TransitionGroup,{name:q.value?"list":void 0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(h),((e,t)=>((0,i.wg)(),(0,i.j4)(_,{ref_for:!0,ref:(0,s.SU)(n),key:e.id,class:"drag drop group-list-item",group:e,index:t,onClick:t=>O(e.id)},null,8,["group","index","onClick"])))),128))])),_:1},8,["name"])],512),(0,i._)("div",{class:"absolute bottom-[20px] left-[20px] flex h-[28px] w-[28px] cursor-pointer items-center justify-center rounded-[8px] bg-color-t3 leading-none",onClick:r},R)])}}}),j=(0,S.Z)(q,[["__scopeId","data-v-1efc991a"]]);var M=o(35427),K=o(23709),F=o(6704),O=o(80661),E=o.n(O),L=o(88309);const $={class:"flex flex-grow border-b-[1px] border-color-m2 border-opacity-[0.08]"},A=["data-id"],P={class:"w-full pr-[10px]"},N=["value","readonly"],V={key:0,class:"mb-[6px] flex items-center leading-none text-color-t3"},Q={class:"mr-[12px]"},X={class:"mt-[8px] flex h-[22px] w-[46px] justify-center"},J={class:"hi-select-menu overflow-hidden rounded-[8px] bg-color-b5 p-[4px] shadow-popover"},ee=["onClick"],te={class:"box h-[392px] w-[352px] cursor-default rounded-[8px] bg-color-b5"},oe={class:"flex h-[48px] items-center justify-between border-b-[1px] border-color-m2 border-opacity-[0.05] px-[16px] text-color-t2"},le=(0,i.aZ)({__name:"todo-list-item",props:{todo:null},setup(e){const t=e,o=(0,v.useTodoStore)(),l=(0,s.iH)(),a=(0,s.iH)(!1),n=e=>{a.value=!1,o.saveTodo({...t.todo,expire:e.valueOf()})},r=(0,i.Fl)((()=>{var e,t;const o=(null===(e=l.value)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.top)??0;return a.value&&o>window.innerHeight/2?"top-end":"bottom-end"})),c=(0,i.Fl)({set(e){o.saveTodo({...t.todo,repeat:e})},get:()=>g.value.repeat??"norepeat"}),u=(0,s.iH)({norepeat:{text:"不重复"},day:{text:"每天"},week:{text:"每周"},month:{text:"每月"}}),h=(0,i.Fl)((()=>({edit:{text:g.value.expire?"修改时间":"添加时间",handler(){m.value=!1,a.value=!0}},clear:g.value.expire?{text:"取消时间",handler(){m.value=!1,o.saveTodo({...t.todo,expire:void 0})}}:null,remove:{text:"删除",handler(){m.value=!1,o.deleteTodo(t.todo.id)}}}))),m=(0,s.iH)(!1),{todo:g}=(0,s.BK)(t),{clickFinish:y,inputChange:w,editMode:f,onBlur:b,onClick:S}=(0,p.gT)(),_=()=>{var e;S(),null===(e=l.value)||void 0===e||e.focus()};return(e,p)=>{const v=F.Z,S=x.Z,U=K.Z,k=(0,i.Q2)("autoheight");return(0,i.wg)(),(0,i.iD)("section",{class:(0,d.normalizeClass)([[(0,s.SU)(o).dragTodoId===t.todo.id?" opacity-50":""],"todo-list-item group flex w-full px-[16px] pt-[10px]"])},[(0,i.Wm)(v,{checked:(0,s.SU)(g).finished,class:"mt-[8px]",onClick:p[0]||(p[0]=e=>(0,s.SU)(y)((0,s.SU)(g)))},null,8,["checked"]),(0,i._)("div",$,[(0,i._)("div",{"data-id":t.todo.id,class:"drag drop relative ml-[12px] flex-grow pb-[10px]"},[(0,i._)("div",P,[(0,i._)("div",{class:"box",onClick:_},[(0,i.wy)((0,i._)("textarea",{ref_key:"textareaRef",ref:l,value:(0,s.SU)(g).content,rows:"1",spellcheck:"false",readonly:!(0,s.SU)(f),class:(0,d.normalizeClass)([[(0,s.SU)(g).finished?"text-color-t3":"text-color-t2",(0,s.SU)(f)?"bg-color-m2 bg-opacity-[0.06]":"pointer-events-none bg-color-none"],"todo-content ml-[-8px] w-full cursor-auto resize-none break-all rounded-[8px] border-0 py-[6px] px-[8px] align-top font-ali-65 leading-[23px] outline-0"]),maxlength:"1000",onBlur:p[1]||(p[1]=e=>(0,s.SU)(b)(e,(0,s.SU)(g))),onInput:p[2]||(p[2]=e=>(0,s.SU)(w)(e.target,115))},null,42,N),[[k,{max:115,id:(0,s.SU)(g).id}]])])]),(0,s.SU)(g).expire?((0,i.wg)(),(0,i.iD)("div",V,[(0,i._)("i",{class:(0,d.normalizeClass)([[{"text-color-orange":(0,s.SU)(E())((0,s.SU)(g).expire).isBefore((0,s.SU)(E())())}],"iconfont icon-reminder_time mr-[4px] text-[20px]"])},null,2),(0,i._)("span",Q,(0,d.toDisplayString)((0,s.SU)(E())((0,s.SU)(g).expire).format("YYYY-MM-DD HH:mm")),1),(0,i._)("span",null,(0,d.toDisplayString)(u.value[(0,s.SU)(g).repeat??"norepeat"].text),1)])):(0,i.kq)("",!0)],8,A),(0,i._)("div",X,[(0,i.Wm)(S,{show:m.value,"onUpdate:show":p[3]||(p[3]=e=>m.value=e),"show-refrence":(0,s.SU)(f)},{default:(0,i.w5)((()=>[(0,i._)("div",J,[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(h),((e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"h-[32px] w-full cursor-pointer rounded-[4px] px-[16px] text-left text-[14px] text-color-t2 hover:bg-color-m2 hover:bg-opacity-[0.06] hover:text-color-t1 not-last:mb-[4px]",onClick:t=>e.handler()},(0,d.toDisplayString)(e.text),9,ee)):(0,i.kq)("",!0)],64)))),128))])])])),reference:(0,i.w5)((()=>[(0,i._)("button",{class:(0,d.normalizeClass)(m.value||a.value?"block":"hidden  group-hover:block")},[(0,i._)("i",{class:(0,d.normalizeClass)([[m.value||a.value?"text-opacity-80":"text-opacity-60 hover:text-opacity-80"],"iconfont icon-single_hover_icon text-[20px] text-color-t1"])},null,2)],2)])),_:1},8,["show","show-refrence"]),(0,i.Wm)(S,{show:a.value,"onUpdate:show":p[6]||(p[6]=e=>a.value=e),placement:(0,s.SU)(r)},{default:(0,i.w5)((()=>[(0,i._)("div",te,[(0,i._)("div",oe,[(0,i._)("div",null,(0,d.toDisplayString)("重复规则"),1),(0,i.Wm)(U,{value:(0,s.SU)(c),"onUpdate:value":p[4]||(p[4]=e=>(0,s.dq)(c)?c.value=e:null),options:u.value,"onUpdate:show":p[5]||(p[5]=()=>a.value=!0)},null,8,["value","options"])]),(0,i.Wm)(L.Z,{show:a.value,"show-time":!0,onOnFinish:n},null,8,["show"])])])),_:1},8,["show","placement"])])])],2)}}}),ae=(0,S.Z)(le,[["__scopeId","data-v-2bf695b4"]]);let ne,re,ie=0;const se=e=>((0,i.dD)("data-v-34ccae82"),e=e(),(0,i.Cn)(),e),de={class:"todo-modal-content flex flex-col justify-between"},pe=[se((()=>(0,i._)("i",{class:"icon iconfont icon-toggle_s text-[16px] text-color-t1"},null,-1)))],ce={class:"max-h-[calc(100%_-_76px)] grow"},ue={class:"flex h-[64px] items-center justify-between border-b-[1px] border-color-m2 border-opacity-[0.08] px-[16px]"},xe={class:"flex h-[40px] w-[360px] items-center justify-between rounded-[8px] bg-color-m2 bg-opacity-[0.08] pl-[12px] pr-[6px]"},ve={class:"flex items-center"},he={class:"text-color-t3"},me=se((()=>(0,i._)("div",{class:"mx-[4px] h-[4px] w-[4px] rounded-[50%] bg-color-t3"},null,-1))),ge={key:1,class:"h-full"},ye={key:0},we={key:0,class:"add-todo bottom-0 h-[76px] w-full flex-shrink-0 p-[16px]"},fe=(0,i.aZ)({__name:"todo-modal-content",emits:["update:hideSideBar"],setup(e,t){let{emit:o}=t;const l=(0,s.iH)(),n=(0,v.useTodoStore)(),{title:r,completed:c,finishedShow:x,changeFinishedShow:h,clearCompleted:m,newTodoContent:g,addTodo:y}=(0,p.TW)(),w=[{type:"overdue",title:"已过期"},{type:"today",title:"今天"},{type:"tomorrow",title:"明天"},{type:"week",title:"本周内"},{type:"nextweek",title:"下周"},{type:"month",title:"本月"},{type:"nextmonth",title:"下个月"},{type:"later",title:"更远"}];let f;(0,i.bv)((()=>{l.value&&_()}));let b=0,S=0;const _=()=>{f=new U.O({dragRoot:l.value,dragSelector:".drag",dropRoot:l.value,dropSelector:".drop",dropLine:"y",withDragMoveStart:!0}),f.subscribe((e=>{if(!n.activeSearch&&"number"==typeof n.activeGroupIndex)switch(e.type){case"dragStart":const{top:t,height:o}=l.value.getBoundingClientRect();b=t,S=t+o;break;case"dragMoveStart":const a=e.payload.dragElement.dataset.id;n.setDragTodoId(a),(e=>{let{y:t,dragElement:o}=e;const l=o.querySelector(".todo-content");if(!l.readOnly&&!l.disabled)return;const{left:a,top:n,width:r,height:i}=o.getBoundingClientRect();ie=t-n,ne=o.cloneNode(!0),ne.style.position="fixed",ne.style.top="-999px",ne.style.left=a+"px",ne.style.width=r+"px",ne.style.height=i+"px",ne.style.pointerEvents="none",ne.style.borderBottomWidth="0",ne.style.marginLeft="0",ne.classList.add("fake"),re=document.querySelector(".todo-modal-content"),re.appendChild(ne)})(e.payload);break;case"dragEnd":n.setDragTodoId(""),C("stop"),ne&&(re.removeChild(ne),ne=null);break;case"dragMove":(e=>{let{y:t,startMove:o}=e;if(!ne)return;if(!o)return;const l=t-ie;ne.style.top=l+"px"})(e.payload),e.payload.y>S?C("bottom"):e.payload.y<b?C("top"):C("stop");break;case"drop":(e=>{let{dropElement:t}=e;if(!ne)return;const o=(0,v.useTodoStore)();if(o.todoFlipping)return;const l=ne.dataset.id,a=t.dataset.id;o.dragSortTodo(l,a)})(e.payload)}}))};let k=null;const C=e=>{window.clearInterval(k),"top"===e?k=window.setInterval((()=>{l.value.scrollBy(0,-6)}),30):"bottom"===e&&(k=window.setInterval((()=>{l.value.scrollBy(0,6)}),30))},D=()=>{o("update:hideSideBar",!1)};return(e,t)=>{const o=M.Z,p=u.Z;return(0,i.wg)(),(0,i.iD)("section",de,[(0,i._)("div",{class:"top-bar hidden w-full p-[15px]"},[(0,i._)("button",{class:"rounded-[6px] bg-color-m2 bg-opacity-10 p-[6px]",onClick:D},pe)]),(0,i._)("div",ce,[(0,i._)("div",ue,[(0,i._)("div",{class:"text-dot font-ali-75 text-[18px] text-color-t1",onClick:D},(0,d.toDisplayString)((0,s.SU)(r)),1),(0,i._)("div",xe,[(0,i._)("div",ve,[(0,i._)("span",he,(0,d.toDisplayString)((0,s.SU)(c))+" "+(0,d.toDisplayString)("已完成"),1),me,(0,i._)("span",{class:"cursor-pointer p-[4px] text-color-todo-t2",onClick:t[0]||(t[0]=function(){return(0,s.SU)(m)&&(0,s.SU)(m)(...arguments)})},(0,d.toDisplayString)("清理"),1)]),(0,i.Wm)(o,{class:"h-[28px] w-auto rounded-[4px] px-[16px]",type:"primary",onClick:(0,s.SU)(h)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.toDisplayString)((0,s.SU)(x)?"隐藏":"显示"),1)])),_:1},8,["onClick"])])]),(0,i._)("div",{ref_key:"wrapperRef",ref:l,class:(0,d.normalizeClass)(["today"===(0,s.SU)(n).activeGroupIndex?"h-full":"todo-list-box","hi-scroll relative pt-[8px]"])},["task"!==(0,s.SU)(n).activeGroupIndex||(0,s.SU)(n).activeSearch?((0,i.wg)(),(0,i.j4)(a.TransitionGroup,{key:0,name:(0,s.SU)(n).needTransition?"todo-list":"list",class:"",tag:"div"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(n).currentTodoList,(e=>((0,i.wg)(),(0,i.j4)(ae,{key:e.id,todo:e},null,8,["todo"])))),128))])),_:1},8,["name"])):(0,i.kq)("",!0),"task"!==(0,s.SU)(n).activeGroupIndex||(0,s.SU)(n).activeSearch?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ge,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(w,(e=>(0,i._)("div",{key:e.type},[(0,s.SU)(n).timelineList[e.type].length?((0,i.wg)(),(0,i.iD)("div",ye,[(0,i._)("div",{class:(0,d.normalizeClass)(["mt-[16px] mb-[4px] ml-[12px] text-[16px]","overdue"===e.type?"text-color-orange":"today"===e.type?"text-color-blue":"text-color-t2"])},(0,d.toDisplayString)(e.title),3),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(n).timelineList[e.type],(e=>((0,i.wg)(),(0,i.j4)(ae,{key:e.id,todo:e},null,8,["todo"])))),128))])):(0,i.kq)("",!0)]))),64))]))],2)]),"number"==typeof(0,s.SU)(n).activeGroupIndex?((0,i.wg)(),(0,i.iD)("div",we,[(0,i.Wm)(p,{value:(0,s.SU)(g),"onUpdate:value":t[1]||(t[1]=e=>(0,s.dq)(g)?g.value=e:null),icon:"icon-pen_icon !text-color-todo-t2",placeholder:"添加待办",class:"","no-clear-btn":"",onKeyup:t[2]||(t[2]=(0,a.withKeys)((e=>(0,s.SU)(y)(l.value)),["enter"]))},null,8,["value","placeholder"])])):(0,i.kq)("",!0)])}}}),be=(0,S.Z)(fe,[["__scopeId","data-v-34ccae82"]]);var Se=o(20259);const _e={class:"content flex h-full w-full flex-row-reverse"},Ue=(0,i.aZ)({__name:"widget-todo-modal",setup(e){const{onCloseModal:t}=(0,p.dd)(),{fullScreen:o,setSullScreen:l}=(0,c.O)(),{show:a}=(0,p.dd)(),u=(0,s.iH)(!0);let x;(0,i.YP)(o,(()=>{(0,i.Y3)((()=>{Se.U.cxecutor()}))}));const h=(0,v.useTodoStore)(),m=()=>{x&&clearTimeout(x);const e=h.unfinishedTaskList.filter((e=>E()(e.expire).isAfter(E()()))),t=null==e?void 0:e[0];if(null!=t&&t.expire){const e=t.expire-E()().valueOf();x=setTimeout((()=>{h.refreshView(),m()}),e)}};return(0,i.YP)((()=>h.todos),(()=>{m()})),(e,p)=>{const c=r.Z,x=n.Z;return(0,i.wg)(),(0,i.j4)(x,{class:"widget-todo-modal",ani:"fade",show:(0,s.SU)(a)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"","full-screen":(0,s.SU)(o),onOnClose:(0,s.SU)(t),onOnFullscreen:p[2]||(p[2]=e=>(0,s.SU)(l)(e))},{default:(0,i.w5)((()=>[(0,i._)("div",_e,[(0,i.Wm)(be,{"hide-side-bar":u.value,"onUpdate:hide-side-bar":p[0]||(p[0]=e=>u.value=e),class:"todo-modal-content h-full grow"},null,8,["hide-side-bar"]),(0,i.Wm)(j,{"hide-side-bar":u.value,"onUpdate:hide-side-bar":p[1]||(p[1]=e=>u.value=e),class:(0,d.normalizeClass)(["todo-modal h-full w-[300px] border-r-[1px] border-color-t1 border-opacity-[0.08] bg-color-b3",[{"todo-modal-show":!u.value}]])},null,8,["hide-side-bar","class"])])])),_:1},8,["full-screen","onOnClose"])])),_:1},8,["show"])}}}),ke=(0,S.Z)(Ue,[["__scopeId","data-v-d0544edc"]]);var Ce=o(96755),De=o(75008),Te=o(63477);(()=>{const e=(0,Te.em)(),t=(0,a.createApp)(ke);t.directive("autoheight",{mounted:(e,t)=>{const{max:o,min:l,id:a}=t.value;(0,Se.$)(e,o,l),Se.U.register(a,(()=>(0,Se.$)(e,o,l)))},unmounted(e,t){const{id:o}=t.value;Se.U.unRegister(o)},updated:(e,t)=>{const{max:o,min:l}=t.value;(0,Se.$)(e,o,l)}}),(0,De.f)(t),t.use(Ce.M),t.use(l.Z),t.mount(e)})()},57185:(e,t,o)=>{o.d(t,{Z:()=>r});var l=o(57268),a=o(94209);const n=["onClick"],r=(0,l.aZ)({__name:"hi-popover-menu",props:{options:null,hideBoxClass:{type:Boolean}},emits:["update:value","menu-click"],setup(e,t){let{emit:o}=t;const r=e;return(e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.normalizeClass)(r.hideBoxClass?"":"hi-select-menu overflow-hidden rounded-[8px] bg-color-b5 p-[4px] shadow-popover")},[(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.options,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[e?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:(0,a.normalizeClass)(["h-[32px] w-full cursor-pointer rounded-[4px] px-[16px] text-left text-[14px] text-color-t2 hover:bg-color-m2 hover:bg-opacity-[0.06] hover:text-color-t1 not-last:mb-[4px]",{[`text-color-${e.color}`]:e.color}]),onClick:e=>{return o("update:value",l=t),o("menu-click"),void(null===(a=(n=r.options[l]).handler)||void 0===a||a.call(n));var l,a,n}},(0,a.toDisplayString)(e.text),11,n)):(0,l.kq)("",!0)],64)))),128))])],2))}})},17530:(e,t,o)=>{o.d(t,{Z:()=>d});var l=o(57185),a=o(57268),n=o(29445),r=o(94209),i=o(73446),s=o(92620);const d=(0,a.aZ)({__name:"hi-popover",props:{show:{type:Boolean},value:{default:""},options:{default:void 0},showArrow:{type:Boolean,default:!1},placement:{default:"bottom-end"},menuClass:{default:""},onlyTheme:{default:void 0}},emits:["update:show","update:value"],setup(e,t){let{emit:o}=t;const d=e,p=(0,a.Fl)({get:()=>d.show,set(e){o("update:show",e)}}),c=(0,a.Fl)({get:()=>d.value,set(e){o("update:value",e)}}),u=(0,n.iH)(0),x=(0,n.iH)(0);return(0,a.YP)(p,(e=>{e&&(x.value=(0,i.K)(),u.value=(0,i.K)())})),(t,o)=>{const i=l.Z,v=(0,a.up)("van-popover");return(0,a.wg)(),(0,a.j4)(v,{show:(0,n.SU)(p),"onUpdate:show":o[2]||(o[2]=e=>(0,n.dq)(p)?p.value=e:null),placement:e.placement,"show-arrow":e.showArrow,style:(0,r.normalizeStyle)({zIndex:u.value,...e.onlyTheme?(0,n.SU)(s.gh)(e.onlyTheme):null}),overlay:"","overlay-class":"!bg-[transparent]","overlay-style":{zIndex:x.value}},{default:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"default",{},(()=>[(0,a.Wm)(i,{value:(0,n.SU)(c),"onUpdate:value":o[0]||(o[0]=e=>(0,n.dq)(c)?c.value=e:null),options:d.options,class:(0,r.normalizeClass)(d.menuClass),onMenuClick:o[1]||(o[1]=e=>p.value=!1)},null,8,["value","options","class"])]))])),reference:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"reference")])),_:3},8,["show","placement","show-arrow","style","overlay-style"])}}})},23709:(e,t,o)=>{o.d(t,{Z:()=>c});var l=o(17530),a=o(57268),n=o(29445),r=o(94209);const i={class:"hi-select"},s={class:"flex cursor-pointer items-center text-[14px] text-color-t2"},d={class:"flex-1"},p=[(0,a._)("i",{class:"iconfont icon-down_icon text-[12px]"},null,-1)],c=(0,a.aZ)({__name:"hi-select",props:{value:null,options:null,menuClass:null,onlyTheme:null},emits:["update:value","update:show"],setup(e,t){let{emit:o}=t;const c=e,u=(0,n.iH)(!1);(0,a.YP)((()=>u.value),(e=>o("update:show",e)));const x=(0,a.Fl)({get:()=>c.value,set(e){o("update:value",e)}});return(e,t)=>{const o=l.Z;return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(o,{show:u.value,"onUpdate:show":t[0]||(t[0]=e=>u.value=e),value:(0,n.SU)(x),"onUpdate:value":t[1]||(t[1]=e=>(0,n.dq)(x)?x.value=e:null),"menu-class":c.menuClass,options:c.options,"only-theme":c.onlyTheme},{reference:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("span",d,(0,r.toDisplayString)(c.options[(0,n.SU)(x)].text),1),(0,a._)("div",{class:(0,r.normalizeClass)(["ml-[12px] flex-shrink-0 transform-gpu transition-transform duration-150",{"rotate-180":u.value}])},p,2)])])),_:1},8,["show","value","menu-class","options","only-theme"])])}}})}}]);