"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[6501],{36501:(t,e,a)=>{a.r(e),a.d(e,{useCelebrityStore:()=>b,widgetInfo:()=>f});var o=a(10435),r=a(74003),i=a(80661),s=a.n(i);const h=[...Array(35)].map(((t,e)=>{let a=e+1;return a=a<10?"0"+a:a,`${r.c1}/hitab/celebrity-widget/large/celebrity_${a}_large.jpg`})),n=[...Array(35)].map(((t,e)=>{let a=e+1;return a=a<10?"0"+a:a,`${r.c1}/hitab/celebrity-widget/medium/celebrity_${a}_medium.jpg`})),c=[...Array(35)].map(((t,e)=>{let a=e+1;return a=a<10?"0"+a:a,`${r.c1}/hitab/celebrity-widget/background/celebrity_${a}.jpg`})),m=s()(),d={updateTime:Date.now(),modalShow:!1,words:r.sM?{form:"《三体》",formWho:"刘慈欣",hitokoto:"我们都是阴沟里的虫子，但总还是得有人仰望星空"}:{form:"",formWho:"Martin Luther King",hitokoto:"To do the right thing, any time is a good time"},currentDate:{weekday:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"][m.day()],date:r.sM?m.format("YYYY年MM月DD日"):m.format("YYYY-MM-DD")},bgImage:{randomNum:0,large:h[1],medium:n[1],modal:c[1]}};var g=a(24581),l=a(28850),u=a(88287);var w=a(63477),y=a(94119);const f=(0,g.E0)(g.Rm.celebrity),b=(0,o.Q_)(l.BU.celebrity,{syncStorage:{watch:["words","bgImage","updateTime"]},state:()=>({...d}),actions:{setModal(t){y.G.setStatus(g.Rm.celebrity,t),this.modalShow=t},saveWordsData(t){this.words={...this.words,...t}},saveBgImageData(t){this.bgImage={...this.bgImage,...t}},loadOrRefreshWordsData(){const t=this.updateTime,e=Date.now();s()(t).add(1,"day").get("date")<=s()(e).get("date")&&this.refreshWords()},async refreshWords(){const[t,e]=r.sM?await(async()=>{try{const t=await u.hj.post("https://v1.hitokoto.cn/?c=d&c=e&c=h&c=i&c=k",{},{_single:!0});if(t)return[null,{formWho:t.from_who||"佚名",hitokoto:t.hitokoto||"",form:`《${t.from}》`||""}];throw t}catch(t){return["catch error"]}})():await(async()=>{try{const t=await fetch("https://api.api-ninjas.com/v1/quotes",{headers:{"X-Api-Key":"PYP49gtoPPS3aDxgWeZzig==xjJf3oA01gItulfv"}}),e=await t.json();if(e)return[null,{formWho:e[0].author||"unknown",hitokoto:e[0].quote||"",form:""}];throw e}catch(t){return["catch error"]}})();t||(this.saveWordsData(e||{}),this.updateTime=Date.now())},async prefetchModalBg(t){await(0,w.pt)((0,w.Em)(t,"default",1024),!0)},async setRandomBg(){const t=(this.bgImage.randomNum+1)%h.length;await this.prefetchModalBg(c[t]),this.saveBgImageData({randomNum:t,large:h[t],medium:n[t],modal:c[t]})}}})}}]);