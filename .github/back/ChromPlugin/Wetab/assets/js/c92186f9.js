"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[3292,1261,96],{31261:(e,s,l)=>{l.r(s),l.d(s,{default:()=>t});var o=l(35427),a=l(57268),r=l(94209);const t=(0,a.aZ)({__name:"userinfo-dialog-cancel-button",setup(e){const s=(0,a.f3)("changeShow"),l=()=>{s(!1)};return(e,s)=>{const t=o.Z;return(0,a.wg)(),(0,a.j4)(t,{type:"main",class:"bg-color-white dark:bg-opacity-20",onClick:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.toDisplayString)("取消"),1)])),_:1})}}})},60096:(e,s,l)=>{l.r(s),l.d(s,{default:()=>p});var o=l(57268),a=l(94209),r=l(29445);const t={class:"h-full pb-[24px]"},n={class:"flex h-full flex-col"},d={class:"mb-[24px] h-[44px] flex-shrink-0 border-b-[1px] border-color-m2 border-opacity-[0.06] px-[24px] text-center text-[16px] leading-[44px] text-color-t1"},i={class:"flex-1 overflow-hidden px-[24px]"},u={key:0,class:"mt-[24px] flex-shrink-0 px-[24px]"},p=(0,o.aZ)({__name:"userinfo-dialog-template",props:{title:null,isScroll:{type:Boolean,default:!0}},setup(e){const s=e,l=(0,o.Rr)();return(e,p)=>((0,o.wg)(),(0,o.iD)("div",t,[(0,o._)("div",n,[(0,o._)("div",d,(0,a.toDisplayString)(s.title),1),(0,o._)("div",i,[(0,o._)("div",{class:(0,a.normalizeClass)(["h-full",{"hi-scroll":s.isScroll}])},[(0,o.WI)(e.$slots,"default")],2)]),(0,r.SU)(l).footer?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.WI)(e.$slots,"footer")])):(0,o.kq)("",!0)])]))}})},3292:(e,s,l)=>{l.r(s),l.d(s,{default:()=>v});var o=l(83218),a=l(70581),r=l(88265),t=l(57268),n=l(29445),d=l(60096),i=l(31261),u=l(18666),p=l(88793),c=l(24118),w=l.n(c),f=l(22140);const v=(0,t.aZ)({__name:"change-password",setup(e){const s=(0,f.useUserStore)(),l=(0,n.qj)({oldPassword:{value:"",props:{placeholder:"旧密码",type:"password"}},newPassword:{value:"",props:{placeholder:"新密码",type:"password"}},confirmPassword:{value:"",props:{placeholder:"确认密码",type:"password"}}}),c=(0,n.iH)({oldPassword:u.dZ,newPassword:u.dZ,confirmPassword:[{validator:e=>e===l.newPassword.value,message:"两次输入的密码不一致"}]}),v=(0,n.qj)({oldPassword:null,newPassword:null,confirmPassword:null});(0,t.YP)((()=>l.newPassword.value),(()=>{var e;l.confirmPassword.value&&(null===(e=v.confirmPassword)||void 0===e||e.checkInputIsError())}));const h=(0,t.f3)("changeShow"),m=(0,n.iH)({text:"提交",async handler(){const[e,o]=await(0,p.Io)({oldPassword:w()(l.oldPassword.value),newPassword:w()(l.newPassword.value),rePassword:w()(l.confirmPassword.value)});var a;"密码错误"!==e?(s.token=o.token,s.refreshToken=o.refreshToken,h(!1)):null===(a=v.oldPassword)||void 0===a||a.setErrorMsg("密码错误")}});return(e,s)=>{const n=r.Z,u=a.Z,p=o.Z;return(0,t.wg)(),(0,t.j4)(d.default,{title:"更改密码"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{model:l,rules:c.value,"submit-btn-attrs":m.value},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l,((e,s)=>((0,t.wg)(),(0,t.j4)(u,{key:s,path:s},{default:(0,t.w5)((()=>[(0,t.Wm)(n,(0,t.dG)({ref_for:!0,ref:e=>{e&&(v[s]=e)},value:e.value,"onUpdate:value":s=>e.value=s},e.props),null,16,["value","onUpdate:value"])])),_:2},1032,["path"])))),128))])),"form-btn":(0,t.w5)((()=>[(0,t.Wm)(i.default)])),_:1},8,["model","rules","submit-btn-attrs"])])),_:1},8,["title"])}}})}}]);