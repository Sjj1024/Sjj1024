(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[2423,2861],{64471:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(a,s,o){var n=s.prototype;o.utc=function(t){return new s({date:t,utc:!0,args:arguments})},n.utc=function(e){var i=o(this.toDate(),{locale:this.$L,utc:!0});return e?i.add(this.utcOffset(),t):i},n.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var d=n.parse;n.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),d.call(this,t)};var r=n.init;n.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var h=n.utcOffset;n.utcOffset=function(a,s){var o=this.$utils().u;if(o(a))return this.$u?0:o(this.$offset)?h.call(this):this.$offset;if("string"==typeof a&&(a=function(t){void 0===t&&(t="");var a=t.match(e);if(!a)return null;var s=(""+a[0]).match(i)||["-",0,0],o=s[0],n=60*+s[1]+ +s[2];return 0===n?0:"+"===o?n:-n}(a),null===a))return this;var n=Math.abs(a)<=16?60*a:a,d=this;if(s)return d.$offset=n,d.$u=0===a,d;if(0!==a){var r=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(d=this.local().add(n+r,t)).$offset=n,d.$x.$localOffset=r}else d=this.utc();return d};var u=n.format;n.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,e)},n.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},n.isUTC=function(){return!!this.$u},n.toISOString=function(){return this.toDate().toISOString()},n.toString=function(){return this.toDate().toUTCString()};var l=n.toDate;n.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var m=n.diff;n.diff=function(t,e,i){if(t&&this.$u===t.$u)return m.call(this,t,e,i);var a=this.local(),s=o(t).local();return m.call(a,s,e,i)}}}()},62423:(t,e,i)=>{"use strict";i.r(e),i.d(e,{useCalendarStore:()=>M});var a=i(28850),s=i(10435),o=i(55332),n=i(80661),d=i.n(n),r=i(74003),h=i(12793),u=i(85214),l=i(41930),m=i(24581),c=i(52861);const p=t=>t<10?"0"+t:t+"",y=t=>r.sM?t.format("YYYY-MM-DD"):t.format("MMMM DD, YYYY"),f=(t,e)=>{const i=(()=>{const t=(0,h.i)(),e=[];return t.icons.forEach((t=>{for(let i=0;i<t.children.length;i++){const a=t.children[i];if("widget"===a.type&&(a.widgetName===m.Rm.timerCountdown||a.widgetName===m.Rm.timerMark)){const t=d()(a.widgetData.time);e.push({type:a.widgetName===m.Rm.timerCountdown?"countdown":"mark",name:a.widgetData.name,id:a.id,icon:"icon-daoshurishijian",updateTime:a.updateTime,day:t.date(),month:t.month()+1,year:t.year(),dateStr:y(t),repeatType:a.widgetData.repeatType||"year",dateType:a.widgetData.dateType||"solar",timestamp:a.widgetData.time,labelTip:y(t)})}}})),e})(),a=(()=>{const t=(0,l.useTimerBirthdayStore)().list.filter((t=>0!==t.updateTime));if(0===t.length)return[];const e=[];return t.forEach((t=>{const i=d()(t.birthday);e.push({type:"birthday",name:r.sM?`${t.name}çš„ç”Ÿæ—¥`:`${t.name}'s birthday`,id:t.id,day:i.date(),month:i.month()+1,year:i.year(),icon:"icon-shengrishijian",dateStr:y(i),updateTime:t.updateTime,timestamp:t.birthday,dateType:t.dateType||"solar",labelTip:y(i)})})),e})(),s=[...i].filter((t=>"countdown"!==t.type));i.filter((t=>"countdown"===t.type)).forEach((i=>{if("year"===i.repeatType){const e=d()(new Date(t,i.month-1,i.day));if("solar"===i.dateType)s.push({...i,year:t,timestamp:e.valueOf(),dateStr:y(e)});else if("lunar"===i.dateType){var a;const e=o.KE.fromDate(new Date(i.year,i.month-1,i.day)).getLunar();let n;const d=e.getDay(),r=(null===(a=o.o7.fromYm(t,Math.abs(e.getMonth())))||void 0===a?void 0:a.getDayCount())||29;n=r<d?o.q7.fromYmd(t,Math.abs(e.getMonth()),r):o.q7.fromYmd(t,Math.abs(e.getMonth()),d),s.push({...i,year:t,timestamp:new Date(n.getSolar().toYmd()).valueOf(),dateStr:n.getSolar().toYmd(),labelTip:n.getMonthInChinese()+"æœˆ"+n.getDayInChinese(),lunarDateStr:n.getMonthInChinese()+"æœˆ"+n.getDayInChinese()})}}else if("month"===i.repeatType){if("solar"===i.dateType){const a=d()(new Date(t,i.month-1,i.day)),o=e-a.month();[a.add(o-2,"month"),a.add(o-1,"month"),a.add(o,"month")].forEach((t=>{s.push({...i,year:t.year(),month:t.month()+1,timestamp:t.valueOf(),dateStr:y(t)})}))}else if("lunar"===i.dateType){var n;const a=new Date(i.year,i.month-1,i.day);let d;const r=o.KE.fromDate(a).getLunar().getDay(),h=o.KE.fromDate(new Date(t,e-1,1)).getLunar(),u=(null===(n=o.o7.fromYm(h.getYear(),Math.abs(h.getMonth())))||void 0===n?void 0:n.getDayCount())||29;d=u<r?o.q7.fromYmd(h.getYear(),h.getMonth(),u):o.q7.fromYmd(h.getYear(),h.getMonth(),r);const l=d.getDayInChinese();s.push({...i,timestamp:new Date(d.getSolar().toYmd()).valueOf(),dateStr:d.getSolar().toYmd(),labelTip:d.getMonthInChinese()+"æœˆ"+d.getDayInChinese(),lunarDayStr:"åˆä¸€"===l?d.getMonthInChinese()+"æœˆ"+l:l})}}else if("week"===i.repeatType){const a=d()(i.timestamp).day();let o=d()(new Date(t,e-1,1)).day(a);for(;o.month()<=e&&o.month()>=e-2;)s.push({...i,year:t,month:o.month(),timestamp:o.valueOf(),dateStr:y(o)}),o=o.add(1,"week")}else s.push(i)})),a.forEach((e=>{if("lunar"===e.dateType){const t=new Date(e.year,e.month-1,e.day),i=new Date,a=o.KE.fromDate(i).getLunar().getYear(),n=o.KE.fromDate(t).getLunar(),d=n.getDay(),r=o.o7.fromYm(a,Math.abs(n.getMonth())),h=(null==r?void 0:r.getDayCount())||29;let u;u=h<d?o.q7.fromYmd(a,Math.abs(n.getMonth()),h):o.q7.fromYmd(a,Math.abs(n.getMonth()),n.getDay()),s.push({...e,timestamp:new Date(u.getSolar().toYmd()).valueOf(),dateStr:u.getSolar().toYmd(),labelTip:u.getMonthInChinese()+"æœˆ"+u.getDayInChinese(),lunarDateStr:u.getMonthInChinese()+"æœˆ"+u.getDayInChinese()})}else{const i=d()(e.timestamp).date(),a=d()(new Date(t,e.month-1,1)).daysInMonth();let o;o=a<i?d()(new Date(t,e.month-1,a)):d()(new Date(t,e.month-1,i)),s.push({...e,timestamp:o.valueOf(),dateStr:y(o)})}}));return(()=>{const t=(0,c.useTodoStore)().unfinishedTaskList.filter((t=>0!==t.updateTime));if(0===t.length)return[];const e=[];return t.forEach((t=>{const i=d()(t.expire);e.push({type:"todo",name:t.content,id:t.id,day:i.date(),month:i.month()+1,year:i.year(),icon:"icon-todo_rl",dateStr:y(i),updateTime:t.updateTime,timestamp:t.expire,dateType:"solar",labelTip:y(i)})})),e})().forEach((t=>{s.push(t)})),s},g=(t,e)=>{const i=d()(new Date(t,e-1,1)),a=i.daysInMonth(),s=d()(new Date(i.year(),i.month(),1)),n=d()(new Date(i.year(),i.month(),a)),h=[];for(let i=1;i<=a;i++)h.push({day:i,month:e,year:t,dayStr:p(i),timestamp:new Date(t,e-1,i).valueOf(),currentMonth:"current",dateStr:`${t}-${p(e)}-${p(i)}`});const l=s.day()||7;if(1!==l)for(let t=1;t<l;t++){const e=s.subtract(t,"day");h.unshift({day:e.date(),month:e.month()+1,year:e.year(),dayStr:p(e.date()),timestamp:e.valueOf(),currentMonth:"pre",dateStr:`${e.year()}-${p(e.month()+1)}-${p(e.date())}`})}const m=h.length;for(let t=m+1;t<=42;t++){const e=n.add(t-m,"day");h.push({day:e.date(),month:e.month()+1,year:e.year(),dayStr:p(e.date()),timestamp:e.valueOf(),currentMonth:"next",dateStr:`${e.year()}-${p(e.month()+1)}-${p(e.date())}`})}return h.forEach((t=>{const e=new Date(t.year,t.month-1,t.day),i=o.KE.fromDate(e);if(t.weekday=i.getWeek()||7,r.sM){const e=i.getLunar(),a=o.YY.getHoliday(i.toYmd());t.festival=[...e.getFestivals(),...i.getFestivals()].toString();const s=e.getDayInChinese();t.lunarDayStr="åˆä¸€"===s?e.getMonthInChinese()+"æœˆ"+s:s,t.lunarDateStr=e.getMonthInChinese()+"æœˆ"+e.getDayInChinese(),t.jieqi=e.getJieQi(),a&&(a.isWork()?t.isWork=!0:t.isHoliday=!0)}})),r.sM||((t,e)=>{(0,u.e)(e).forEach((e=>{const i=t.findIndex((t=>t.dateStr===e.dateString));i>-1&&(t[i].festival=e.name)}))})(h,t),((t,e,i)=>{f(e,i).forEach((e=>{const i=t.findIndex((t=>t.dateStr===e.dateStr));var a;i>-1&&(t[i].labels=t[i].labels||[],null===(a=t[i].labels)||void 0===a||a.push(e))}))})(h,t,e),h};var T=i(94119),D=i(73186);const v=r.sM?["æ˜ŸæœŸå¤©","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S=d()(),w=o.q7.fromDate(new Date),M=(0,s.Q_)(a.BU.calendar,{state:()=>({modalShow:!1,yearShow:!1,today:d()(),modalSideData:{monthStr:r.sM?w.getMonthInChinese()+"æœˆ"+w.getDayInChinese():"",month:S.month()+1,year:S.year(),yearGanZhi:r.sM?w.getYearInGanZhi()+"å¹´":""},yearList:[],selectYear:S.year(),selectDay:S.format("YYYY-MM-DD")}),getters:{monthCalendarData(){return g(this.modalSideData.year,this.modalSideData.month)},todayEventsCount(){var t;return(null===(t=g(S.year(),S.month()+1).find((t=>t.dateStr===this.todayStr)).labels)||void 0===t?void 0:t.length)||0},currentDate(){const t=o.q7.fromDate(this.today.toDate());return{weekday:v[this.today.day()],day:this.today.date(),month:r.sM?this.today.format("Mæœˆ"):this.today.format("MMMM"),yearMonthStr:r.sM?this.today.format("YYYYå¹´Mæœˆ"):this.today.format("YYYY MMMM"),lunarDayStr:r.sM?t.getMonthInChinese()+"æœˆ"+t.getDayInChinese():"",festival:t.getFestivals().join(","),jieqi:t.getJieQi(),dateObj:this.today}},todayStr(){return this.today.format("YYYY-MM-DD")}},actions:{setModal(t){T.G.setStatus(m.Rm.calendar,t),this.modalShow=t},setYearModal(t){this.yearShow=t},setMonth(t){this.modalSideData.month!==t&&(this.modalSideData.month=t)},setYear(t){this.modalSideData.year!==t&&(this.modalSideData.year=t)},setSelectYear(t){this.selectYear=t},setYearList(t){this.yearList=t},setSelectDay(t){this.selectDay=t},setToday(){this.today=d()()}}});(0,D.ST)((()=>{M().setToday()}))},85214:(t,e,i)=>{"use strict";i.d(e,{e:()=>u});var a=i(80661),s=i.n(a),o=i(64471),n=i.n(o);s().extend(n());const d=t=>{let{day:e=1,month:i,year:a}=t;return s()(`${a}-${i}-${e}`)},r=(t,e,i,a)=>{let o=s()(d({month:i,year:a})).day(e);return o.month()!==i-1&&(o=o.add(1,"week")),o=o.add(t-1,"week"),o},h=(t,e,i)=>{const a=s()(d({month:e,year:i})).daysInMonth();let o=s()(`${i}-${e}-${a}`).day(t);return o.month()!==e-1&&(o=o.subtract(1,"week")),o},u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear(),{shiftSaturdayHolidays:e=!1,shiftSundayHolidays:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];return a.push({name:"New Year's Eve",date:d({day:31,month:12,year:t-1})}),a.push({name:"New Year's Day",date:d({day:1,month:1,year:t})}),a.push({name:"Lincoln's Birthday",date:d({day:12,month:2,year:t})}),a.push({name:"Flag Day",date:d({day:14,month:6,year:t})}),a.push({name:"Martin Luther Day",date:r(3,1,1,t)}),a.push({name:"Daylight Saving(start)",date:r(2,0,3,t)}),a.push({name:"Belly Laugh Day",date:d({day:24,month:1,year:t})}),a.push({name:"Groundhog Day",date:d({day:2,month:2,year:t})}),a.push({name:"Earth Day",date:d({day:22,month:4,year:t})}),a.push({name:"Valentine's Day",date:d({day:14,month:2,year:t})}),a.push({name:"April Fool's Day",date:d({day:1,month:4,year:t})}),a.push({name:"Washington's Birthday",alsoObservedAs:"Presidents' Day",date:r(3,1,2,t)}),a.push({name:"Mother's Day",date:r(2,0,5,t)}),a.push({name:"Father's Day",date:r(3,0,6,t)}),a.push({name:"Memorial Day",date:h(1,5,t)}),a.push({name:"Black Friday",date:r(4,5,11,t)}),t>2020&&a.push({name:"National Independence Day",date:d({day:19,month:6,year:t})}),a.push({name:"Independence Day",date:d({day:4,month:7,year:t})}),a.push({name:"Labor Day",date:r(1,1,9,t)}),a.push({name:"Columbus Day",alsoObservedAs:"Indigenous Peoples' Day",date:r(2,1,10,t)}),a.push({name:"Veterans Day",date:d({day:11,month:11,year:t})}),a.push({name:"Halloween",date:d({day:31,month:10,year:t})}),a.push({name:"Thanksgiving Day",date:r(4,4,11,t)}),a.push({name:"Christmas Day",date:d({day:25,month:12,year:t})}),a.map((t=>{let a=s()(t.date);return 0===a.day()&&i&&(a=a.add(1,"day")),6===a.day()&&e&&(a=a.subtract(1,"day")),{name:t.name,alsoObservedAs:t.alsoObservedAs,date:a.toDate(),dateString:a.format("YYYY-MM-DD")}}))}},41930:(t,e,i)=>{"use strict";i.r(e),i.d(e,{useTimerBirthdayStore:()=>p});var a=i(28850),s=i(10435),o=i(73186),n=i(81212),d=i(65264),r=i(63477),h=i(80661),u=i.n(h),l=i(5588),m=i(94119),c=i(24581);const p=(0,s.Q_)(a.BU.timerBirthday,{syncStorage:{watch:["list","initialized","timerStyle"]},syncCloud:{watch:["list","initialized","timerStyle"]},state:()=>({modalShow:!1,initialized:!0,modalState:{size:"s",openType:"add"},timerStyle:d.S,list:d.k,triggerDay:u()().startOf("day").valueOf()}),getters:{homeList(){this.triggerDay;const t=this.list.map((t=>{const e=(0,o.hQ)(t.birthday,t.dateType),i=(0,r.dG)(t.birthday,!1,t.dateType);return{...t,birthdayStr:i,day:e}})).sort(((t,e)=>t.day-e.day));return t.length>5&&(t.length=5),t}},actions:{updateDay(t){this.triggerDay=t},setModal(t,e){m.G.setStatus(c.Rm.timerBirthday,t),this.modalShow=t,t&&e&&(this.modalState=e),!1===t&&l.r.cancel()},saveStyle(t){this.timerStyle={...t},this.initialized=!0},saveList(t){(0,n.Z)(this.list,t)||(this.list=t)}}});(0,o.ST)((t=>{p().updateDay(t)}))},65264:(t,e,i)=>{"use strict";i.d(e,{S:()=>s,k:()=>o});var a=i(74003);const s={fontColor:"rgba(248, 248, 248, 1)",bgType:"image",bgColor:(0,i(73186).zY)(),bgImageColor:"",bgImage:{large:`${a.c1}/widget-background/background19_larg.jpg`,medium:`${a.c1}/widget-background/background19_medium.jpg`,small:`${a.c1}/widget-background/background19_small.jpg`},bgMask:20},o=[{id:"birthday-1g8q0uqfpebt5ix65z65t7q0w6z",updateTime:0,name:a.sM?"èœ¡ç¬”å°ä¸¸å­":"Chris Na",birthday:10727136e5,dateType:"solar"},{id:"birthday-1g8q162hmj1k66xezhaazmtgsrw",updateTime:0,name:a.sM?"å°èƒ–è¾¾":"Lisha",birthday:12276288e5,dateType:a.sM?"lunar":"solar"},{id:"birthday-1g8s6cjg5dt2t1ruaopyi29w9gn",updateTime:0,name:a.sM?"çŽ‹ä¸½å›":"Sara",birthday:619542e6,dateType:a.sM?"lunar":"solar"},{id:"birthday-1g8s6em8vzbvdvs7hsss8903gja",updateTime:0,name:a.sM?"å˜Žå˜Ž":"Fan",birthday:8402112e5,dateType:"solar"},{id:"birthday-1g8s6fjqnkl7j37i2zo18s79is6",updateTime:0,name:a.sM?"è€¶é²æ€":"Yuling Wang",birthday:9050976e5,dateType:"solar"}]},52861:(t,e,i)=>{"use strict";i.r(e),i.d(e,{useTodoStore:()=>y});var a=i(94119),s=i(28850),o=i(63477),n=i(24581),d=i(10435),r=i(74003),h=i(80661),u=i.n(h);const l=[{id:"todogroup-1",updateTime:0,name:"æ—¥å¸¸è®¡åˆ’",iconClass:"",children:[{id:"todo1-1",content:"ðŸ‘¶ ä»Šå¤©ä¸‹åˆ4:00åŽ»å¹¼å„¿å›­æŽ¥å°å„¿å­ï¼Œåƒä¸‡åˆ«è¿Ÿåˆ°",expire:u()().hour(16).minute(0).second(0).millisecond(0).valueOf(),finished:!1,updateTime:0},{id:"todo1-2",content:"ðŸš— æŽ¥å®Œä¸œä¸œåŽï¼ŒåŽ»é›†å¸‚ä¹°å¹²è¾£æ¤’å’Œæ´—è¡£æ¶²",finished:!1,updateTime:0},{id:"todo1-3",content:"ðŸ‘œ æ™šä¸Šç»™çˆ¸å¦ˆæ‰“ç”µè¯åœ¨ç½‘ä¸Šä¹°ç‚¹ä¸œè¥¿",finished:!1,updateTime:0},{id:"todo1-4",content:"âœˆï¸ é¢„å®šä¸‹å‘¨åŽ»åŒ—äº¬çš„æœºç¥¨",finished:!1,updateTime:0},{id:"todo1-5",content:"ðŸŽ ç»™è€å©†ä¹°ç”Ÿæ—¥ç¤¼ç‰©",finished:!0,updateTime:0}]},{id:"todogroup-2",updateTime:0,name:"å·¥ä½œè®¡åˆ’",iconClass:"",children:[{id:"todo2-1",content:"å‘¨ä¸€ä¸Šåˆ10:30é¡¹ç›®å¼€ä¼šï¼Œè®¨è®ºæ–°äº§å“åŽç»­è°ƒæ•´è®¡åˆ’",expire:u()().startOf("week").hour(10).minute(30).second(0).millisecond(0).valueOf(),repeat:"week",finished:!1,updateTime:0},{id:"todo2-2",content:"ä¸‹åˆ4:30é’ˆå¯¹ä¸Šåˆä¼šè®®è¿›è¡Œç®€è¦æ±‡æŠ¥",finished:!1,updateTime:0}]}],m=[{id:"todogroup-1",updateTime:0,name:"æ—¥å¸¸è®¡åˆ’",iconClass:"",children:[{id:"todo1-1",content:"Go to the bank at 2pm.",expire:u()().hour(14).minute(0).second(0).millisecond(0).valueOf(),finished:!1,updateTime:0},{id:"todo1-2",content:"Date Henry at 7pm, don't be late.",finished:!1,updateTime:0},{id:"todo1-3",content:"Go to the hospital to visit my aunt at 10am.",finished:!1,updateTime:0},{id:"todo1-4",content:"Book flight to Manchester next week.",finished:!1,updateTime:0},{id:"todo1-5",content:"Prepare Christmas gifts for kids.",finished:!0,updateTime:0}]},{id:"todogroup-2",updateTime:0,name:"å·¥ä½œè®¡åˆ’",iconClass:"",children:[{id:"todo2-1",content:"Go to the factory for inspection every Friday at 3 pm.",expire:u()().startOf("week").add(5,"day").hour(15).minute(0).second(0).millisecond(0).valueOf(),repeat:"week",finished:!1,updateTime:0},{id:"todo2-2",content:"Have a meeting with Kelly at 10am to discuss the plan, remember to bring materials.",finished:!1,updateTime:0}]}],c=r.sM?l:m,p=["rgba(255, 201, 104, 1)","rgba(152, 216, 93, 1)","rgba(255, 151, 101, 1)","rgba(133, 83, 255, 1)","rgba(146, 165, 255, 1)","rgba(212, 212, 212, 1)"],y=(0,d.Q_)(s.BU.todo,{syncStorage:{watch:["todos"]},syncCloud:{watch:["todos"]},state:()=>({todos:c,modalShow:!1,finishedShow:!1,activeGroupIndex:0,searchValue:"",activeSearch:!1,needTransition:!1,groupFlipping:!1,groupFlipingTimer:null,todoFlipping:!1,todoFlipingTimer:null,dragGroupId:"",dragTodoId:"",trigger:0}),getters:{allList(){return this.todos.reduce(((t,e)=>(e.children.forEach((e=>{t.push(e)})),t)),[])},finishedAllList(){return this.allList.filter((t=>t.finished))},unfinishedAllList(){return this.allList.filter((t=>!t.finished))},homeList(){let t=[...this.unfinishedTaskList];return t.length<p.length&&(t=t.concat(this.unfinishedAllList.filter((t=>!t.expire)))),t.length>p.length&&(t.length=p.length),t.map(((t,e)=>({...t,color:p[e]})))},homeUndoNum(){const t=this.timelineList.overdue.length+this.timelineList.today.length;return t>99?"99+":t},finishedTaskList(){return this.finishedAllList.filter((t=>t.expire)).sort(((t,e)=>t.expire-e.expire))},unfinishedTaskList(){return this.unfinishedAllList.filter((t=>t.expire)).sort(((t,e)=>t.expire-e.expire))},timelineList(){this.trigger;const t=[0,u()()],e=[t[1],u()().endOf("date")],i=[e[1],u()().add(1,"day").endOf("day")],a=[i[1],u()().endOf("week")],s=[a[1],u()().add(1,"week").endOf("week")],o=[s[1],u()().endOf("month")],n=[o[1],u()().add(1,"month").endOf("month")],d={overdue:[],today:[],tomorrow:[],week:[],nextweek:[],month:[],nextmonth:[],later:[]};return this.unfinishedTaskList.forEach((r=>{const h=u()(r.expire);h.isBefore(t[1])?d.overdue.push(r):h.isBefore(e[1])?d.today.push(r):h.isBefore(i[1])?d.tomorrow.push(r):h.isBefore(a[1])?d.week.push(r):h.isBefore(s[1])?d.nextweek.push(r):h.isBefore(o[1])?d.month.push(r):h.isBefore(n[1])?d.nextmonth.push(r):d.later.push(r)})),d},finishedTodayList(){const t=u()().endOf("date"),e=u()().startOf("date");return this.finishedTaskList.filter((i=>u()(i.expire).isBefore(t)&&u()(i.expire).isAfter(e)))},unfinishedTodayList(){const t=u()().endOf("date"),e=u()().startOf("date");return this.unfinishedTaskList.filter((i=>u()(i.expire).isBefore(t)&&u()(i.expire).isAfter(e)))},finishedGroupList(){return 0===this.todos.length||"number"!=typeof this.activeGroupIndex?[]:this.todos[this.activeGroupIndex].children.filter((t=>t.finished))},unfinishedGroupList(){return 0===this.todos.length?[]:"task"===this.activeGroupIndex?this.unfinishedTaskList:"today"===this.activeGroupIndex?this.unfinishedTodayList:this.todos[this.activeGroupIndex].children.filter((t=>!t.finished))},finishedList(){return this.activeSearch?this.finishedAllList.filter((t=>t.content.toLowerCase().includes(this.searchValue.toLowerCase()))):"number"==typeof this.activeGroupIndex?this.finishedGroupList:"task"===this.activeGroupIndex?this.finishedTaskList:"today"===this.activeGroupIndex?this.finishedTodayList:[]},unfinishedList(){return this.activeSearch?this.unfinishedAllList.filter((t=>t.content.toLowerCase().includes(this.searchValue.toLowerCase()))):this.unfinishedGroupList},currentTodoList(){return this.trigger,this.finishedShow?this.unfinishedList.concat(this.finishedList):this.unfinishedList}},actions:{refreshView(){this.trigger=Date.now()},setNeedTransition(t){this.needTransition=t},setSearchValue(t){t?(this.setNeedTransition(!1),this.activeSearch=!0):this.activeSearch=!1,this.searchValue=t},setModal(t){a.G.setStatus(n.Rm.todo,t),this.modalShow=t},setFinishedShow(t){this.finishedShow=t},clearCompleted(){this.finishedList.forEach((t=>{this.deleteTodo(t.id,!1)})),this.todos=[...this.todos]},saveGroup(t){let{id:e,name:i,iconClass:a}=t;e?this.todos.some((t=>{if(t.id===e)return t.name=i,t.iconClass=a,t.updateTime=Date.now(),!0})):this.todos.push({id:(0,o.kb)("todogroup-"),iconClass:a,name:i,updateTime:Date.now(),children:[]}),this.todos=[...this.todos]},deleteGroup(t){this.setNeedTransition(!1);const e=this.todos.findIndex((e=>e.id===t));e>-1&&(this.todos.splice(e,1),"number"==typeof this.activeGroupIndex&&this.activeGroupIndex>this.todos.length-1&&(this.activeGroupIndex=this.todos.length-1),0===this.todos.length?(this.saveGroup({name:"æ–°å»ºåˆ—è¡¨",iconClass:""}),this.selectGroup(0)):this.todos=[...this.todos])},selectGroup(t){this.setNeedTransition(!1),this.activeGroupIndex=t,this.activeSearch=!1},selectGroupId(t){const e=this.todos.findIndex((e=>e.id===t));e>-1?this.selectGroup(e):this.selectGroup(t)},findTodoIndexes(t){let e,i;return this.todos.some(((a,s)=>a.children.some(((a,o)=>a.id===t&&(e=s,i=o,!0))))),"number"==typeof i?[e,i]:null},saveTodo(t,e){this.setNeedTransition(!0);const i=Date.now();if(t.id){const e=this.findTodoIndexes(t.id);if(e){const[a,s]=e;Object.assign(this.todos[a].children[s],{...t,updateTime:i}),this.todos[a].updateTime=i}}else if("number"==typeof this.activeGroupIndex)this.todos[this.activeGroupIndex].children.push({...t,id:(0,o.kb)("todo-"),updateTime:i}),this.todos[this.activeGroupIndex].updateTime=i;else if(e){const a=this.findTodoIndexes(e);if(a){const[e]=a;this.todos[e].children.push({...t,id:(0,o.kb)("todo-"),updateTime:i}),this.todos[e].updateTime=i}}this.todos=[...this.todos]},deleteTodo(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setNeedTransition(!0);const i=this.findTodoIndexes(t);if(i){const[t,a]=i;this.todos[t].children.splice(a,1),this.todos[t].updateTime=Date.now(),!0===e&&(this.todos=[...this.todos])}},dragSortGroup(t,e){if(t===e)return;const i=this.todos.findIndex((t=>e===t.id)),a=this.todos.findIndex((e=>t===e.id));-1!==i&&-1!==a&&(i>a?(this.todos.splice(i+1,0,this.todos[a]),this.todos.splice(a,1)):(this.todos.splice(i,0,this.todos[a]),this.todos.splice(a+1,1)),this.selectGroupId(t),this.todos=[...this.todos],this.setGroupFlipping(!0))},setGroupFlipping(t){window.clearTimeout(this.groupFlipingTimer),t&&(this.groupFlipping=t,this.groupFlipingTimer=window.setTimeout((()=>{this.groupFlipping=!1}),200))},setDragGroupId(t){this.dragGroupId=t},dragSortTodo(t,e){var i;if(t===e)return;const a=null===(i=this.todos[this.activeGroupIndex])||void 0===i?void 0:i.children;if(!a)return;const s=a.findIndex((t=>e===t.id)),o=a.findIndex((e=>t===e.id));-1!==s&&-1!==o&&(s>o?(a.splice(s+1,0,a[o]),a.splice(o,1)):(a.splice(s,0,a[o]),a.splice(o+1,1)),this.todos=[...this.todos],this.setTodoFlipping(!0))},setTodoFlipping(t){window.clearTimeout(this.todoFlipingTimer),t&&(this.todoFlipping=t,this.todoFlipingTimer=window.setTimeout((()=>{this.todoFlipping=!1}),200))},setDragTodoId(t){this.dragTodoId=t}}})}}]);