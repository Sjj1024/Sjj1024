"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[4179],{59092:(e,t,a)=>{a.d(t,{G:()=>h,Ik:()=>m,ZN:()=>l});var i=a(74003),s=a(88287);function n(e,t){switch(t){case 1:return`https://vgn.cn/article/news/${e}`;case 4:return`https://vgn.cn/article/post/${e}`;default:return"https://vgn.cn/channel/2"}}const l=async e=>{try{const t=await s.hj.get(`${i.H}game/list`,e,{_delay:0,_single:!0});if(t.data&&t.data.length>0){return[null,t.data.map((e=>{var t;return{id:e.spu_id,china_name:e.game_china_name||e.game_name,name:e.game_name,cover:e.spu_show_cover||"https://static.wetab.link/hitab/game-widget/cover.jpg",platform:e.platform,genres:e.genres?e.genres.split(" / "):[],score:e.score,discount_percent:e.discount_percent,discount_end:e.discount_end,discount:e.discount,initial:e.initial,tag:null===(t=e.tag)||void 0===t?void 0:t.map((e=>e.name)),support_chinese:e.support_chinese}}))]}throw t}catch(e){return["catch error"]}},m=async e=>{try{const t=await s.hj.get(`${i.H}game/news`,e,{_delay:1e3,_single:!0});if(t.data&&t.data.length>0){return[null,t.data.map((e=>{var t;return{title:e.title.indexOf("...")>0?e.content.substring(0,50).trim():null===(t=e.title)||void 0===t?void 0:t.trim(),desc:e.content,cover:e.cover,id:e.id,date:e.create_time,type:e.type,link:e.link||n(e.id,e.type)}}))]}throw t}catch(e){return["catch error"]}},h=async e=>{try{const t=await s.hj.get(`${i.H}game/info`,{id:e},{_delay:0});if(t.data)return[null,t.data];throw t}catch(e){return["catch error"]}}},34179:(e,t,a)=>{a.r(t),a.d(t,{useGameStore:()=>h});var i=a(28850),s=a(10435),n=a(75973),l=a(59092),m=a(63477);const h=(0,s.Q_)(i.BU.game,{syncStorage:{watch:["homeGameInfo","gamePlatformCheck"]},syncCloud:{watch:["gamePlatformCheck"]},state:()=>({modalShow:!1,gameList:[],allGameList:[],gamePage:1,homeGameInfo:n.H_,newsList:n.QO,showType:1,selectedNewsIndex:0,selectedGameType:"",homeGameIndex:0,modalPanelType:1,gamePlatformCheck:n.RU.map((e=>e.value)),gameLoading:!1,newsLoading:!1,finished:!1,allGamePage:1,allGameFinished:!1,allGameLoading:!1,firstLoad:!0}),getters:{},actions:{setModal(e){this.modalShow=e},setShowType(e){this.showType=e},setModalPanelType(e){this.modalPanelType=e},async setHomeGameIndex(e){this.homeGameIndex=e,e>this.allGameList.length-5&&this.reqAllGameList();const t=this.allGameList[e];t&&(await(0,m.pt)(t.cover),this.homeGameInfo={...t,isDefault:!1})},setGamePlatformCheck(e){this.gamePlatformCheck=e,this.gamePage=1,this.finished=!1,this.gameList=[],this.reqGameList()},setSelectedNewsIndex(e){e!==this.selectedNewsIndex&&(this.selectedNewsIndex=e,0===this.newsList[this.selectedNewsIndex].list.length&&this.reqNewsList())},setSelectedGameType(e){e!==this.selectedGameType&&(this.selectedGameType=e,this.gamePage=1,this.finished=!1,this.gameList=[],this.reqGameList())},async reqGameList(){if(this.finished)return;this.gameLoading=!0;const[e,t]=await(0,l.ZN)({page:this.gamePage,size:20,type:this.selectedGameType,platform:this.gamePlatformCheck.join(",")});if(this.gameLoading=!1,e||!t)return;const a=[...this.gameList,...t];20===t.length?(this.gamePage=this.gamePage+1,this.finished=!1):this.finished=!0,this.gameList=a},async reqAllGameList(){if(this.allGameLoading)return;if(this.allGameFinished)return;this.allGameLoading=!0;const[e,t]=await(0,l.ZN)({page:this.allGamePage,size:20});this.allGameLoading=!1,!e&&t&&(this.homeGameInfo.isDefault&&(this.homeGameInfo={...t[0],isDefault:!1}),this.allGameList=[...this.allGameList,...t],t.length<20?this.allGameFinished=!0:this.allGamePage=this.allGamePage+1)},async reqNewsList(){this.newsLoading=!0;const[e,t]=await(0,l.Ik)({page:1,page_size:30,tab_id:this.newsList[this.selectedNewsIndex].tab_id});if(this.newsLoading=!1,e||!t)return;const a=[...this.newsList];a[this.selectedNewsIndex].list=t,this.newsList=a}}})},75973:(e,t,a)=>{a.d(t,{H_:()=>i,N_:()=>m,QO:()=>n,RU:()=>l,i2:()=>s});const i={id:19164,isDefault:!0,china_name:"小小梦魇 豪华版",name:"LITTLE NIGHTMARES-リトルナイトメア- Deluxe Edition",cover:"http://cdn.vgn.cn/media/images/11_square_images/games_18/nintendo_switch_5/SQ_NSwitch_LittleNightmaresCompleteEdition_image500w.jpg?x-oss-process=image%2Fresize%2Cm_lfit%2Cw_360%2Fformat%2Cjpg",platform:"switch",genres:["冒险","益智","动作"],score:7,discount_percent:43,discount_end:1673996399,discount:10484,initial:18545,tag:["持平史低","中文"],support_chinese:2},s=[{name:"全部",value:""},{name:"动作",value:"0"},{name:"冒险",value:"1"},{name:"教育",value:"2"},{name:"射击",value:"3"},{name:"桌游",value:"4"},{name:"模拟",value:"5"},{name:"益智",value:"6"},{name:"竞速",value:"7"},{name:"策略",value:"8"},{name:"街机",value:"9"},{name:"角色扮演",value:"10"},{name:"运动",value:"11"},{name:"音乐",value:"12"},{name:"第一人称",value:"13"},{name:"休闲",value:"14"},{name:"多人",value:"15"}],n=[{tab_id:2,name:"全部",list:[]},{tab_id:63,name:"蒸汽日报",list:[]},{tab_id:33,name:"爆料",list:[]},{tab_id:40,name:"喜加一",list:[]},{tab_id:43,name:"PS会免",list:[]},{tab_id:45,name:"原创文章",list:[]},{tab_id:61,name:"Video Time",list:[]},{tab_id:42,name:"Epic免费",list:[]},{tab_id:37,name:"教程",list:[]},{tab_id:35,name:"情报",list:[]},{tab_id:29,name:"ACG",list:[]},{tab_id:34,name:"杂谈",list:[]}],l=[{icon:"https://static.wetab.link/hitab/game-widget/steam.png",text:"Steam",value:"3",bg:"rgba(44, 47, 59, 1)"},{icon:"https://static.wetab.link/hitab/game-widget/switch.png",text:"Switch",value:"1",bg:"rgba(231, 0, 18, 1)"},{icon:"https://static.wetab.link/hitab/game-widget/ps.png",text:"Play Station",value:"2,6",bg:"rgba(0, 54, 151, 1)"},{icon:"https://static.wetab.link/hitab/game-widget/xbox.png",text:"Xbox",value:"4",bg:"rgba(15, 124, 17, 1)"}],m=e=>e.indexOf("win")>-1?l[0]:"switch"===e?l[1]:"xbox"===e?l[3]:e.indexOf("ps")>-1?l[2]:l[0]}}]);