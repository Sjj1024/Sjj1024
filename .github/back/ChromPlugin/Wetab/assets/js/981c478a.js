"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[5268,6201],{73186:(e,t,a)=>{a.d(t,{O9:()=>p,ST:()=>x,XM:()=>S,dJ:()=>w,f8:()=>T,hQ:()=>_,o7:()=>k,t4:()=>d,zY:()=>m});var i=a(994),r=a(80661),s=a.n(r),l=a(74003),n=a(63477),o=a(55332),c=a(27542);const p={font:["rgba(248, 248, 248, 1)","rgba(28, 28, 30, 1)","rgba(58, 58, 60, 1)","rgba(95, 95, 99, 1)","rgba(142, 142, 147, 1)","rgba(176, 176, 182, 1)","rgba(199, 199, 204, 1)"],background:["rgba(248, 248, 248, 1)","rgba(58, 58, 60, 1)","rgba(28, 28, 30, 1)","rgba(244, 171, 18, 1)","rgba(74, 197, 92, 1)","rgba(35, 207, 168, 1)","rgba(67, 133, 241, 1)","rgba(56, 100, 255, 1)","rgba(118, 33, 249, 1)","rgba(224, 78, 150, 1)","rgba(224, 78, 78, 1)","rgba(253, 90, 90, 1)","rgba(183, 163, 150, 1)","rgba(171, 131, 131, 1)","rgba(182, 150, 135, 1)","rgba(109, 131, 95, 1)","rgba(125, 171, 136, 1)","rgba(158, 172, 175, 1)","rgba(103, 124, 170, 1)"]},g=["rgba(183, 163, 150, 1)","rgba(171, 131, 131, 1)","rgba(182, 150, 135, 1)","rgba(109, 131, 95, 1)","rgba(125, 171, 136, 1)","rgba(158, 172, 175, 1)","rgba(103, 124, 170, 1)"],m=()=>(0,i.Z)(g),d=Array(20).fill(0).map(((e,t)=>{const a=`${t+1}`.padStart(2,"0");return{bgImage:{large:`${l.c1}/widget-background/background${a}_larg.jpg`,medium:`${l.c1}/widget-background/background${a}_medium.jpg`,small:`${l.c1}/widget-background/background${a}_small.jpg`},thumbnail:`${l.c1}/widget-background/background${a}.jpg`}})),y=(e,t)=>{let a=!1;e.isLeapYear()&&1===e.month()&&29===e.date()&&(a=!0);let i=(0,n.sG)(e.format(`${t}-MM-DD`));return a&&!i.isLeapYear()&&(i=i.add(-1,"day")),i.valueOf()>=f.valueOf()||(i=(0,n.sG)(e.format(`${t+1}-MM-DD`)),a&&!i.isLeapYear()&&(i=i.add(-1,"day"))),i},u=e=>{const t=o.q7.fromDate(new Date(e)),a=o.q7.fromDate(new Date).getYear(),i=s()((0,n.EJ)({year:a,month:t.getMonth(),day:t.getDay()}));return i.valueOf()>=f.valueOf()?i:s()((0,n.EJ)({year:a+1,month:t.getMonth(),day:t.getDay()}))},h=e=>{if(e.date()>=f.date())return(0,n.sG)(`${f.year()}-${f.month()+1}-${Math.min(f.daysInMonth(),e.date())}`);const t=f.add(1,"month");return(0,n.sG)(`${t.year()}-${t.month()+1}-${Math.min(t.daysInMonth(),e.date())}`)},b=e=>{const t=o.q7.fromDate(new Date),a=o.q7.fromDate(new Date(e)),i=t.getDay(),r=a.getDay();if(r>=i)return s()((0,n.EJ)({year:t.getYear(),month:t.getMonth(),day:r}));const l=o.o7.fromYm(t.getYear(),t.getMonth()).next(1);return s()((0,n.EJ)({year:l.getYear(),month:l.getMonth(),day:r}))},x=e=>{const t=Date.now(),a=s()().endOf("day").valueOf()+1;return window.setTimeout((()=>{try{e(a),x(e)}catch(e){}}),a-t)},S=e=>{const t=Date.now(),a=s()().add(30,"minute").valueOf();return window.setTimeout((()=>{try{e(a),S(e)}catch(e){}}),a-t)};let f=s()().startOf("day"),v=f.year();x((()=>{f=s()(),v=f.year()}));const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solar";if(!e)return 0;if(e>=f.valueOf())return s()(e).diff(f,"day");if("lunar"===t){return b(e).diff(f,"day")}const a=s()(e),i=h(a),r=i.diff(f,"day");return r},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solar";if(!e)return 0;if(e>=f.valueOf())return s()(e).diff(f,"day");if("lunar"===t){return u(e).diff(f,"day")}const a=s()(e),i=y(a,v),r=i.diff(f,"day");return r},T=e=>{const t=Math.floor(e/86400);e-=86400*t;const a=Math.floor(e/3600)%24;e-=3600*a;const i=Math.floor(e/60)%60;return{d:t,h:a,m:i,s:(e-=60*i)%60}};class k{views=new Map;execTime=0;execTimer=null;isPageVisible=!0;setViewVisibleInterval(){0!==this.views.size?this.isPageVisible?this.isViewVisible?this.setInterval(this.interval):this.setInterval(this.intervalOnViewOut):this.setPageVisibleInterval():this.setInterval(0)}setPageVisibleInterval(){0!==this.views.size?this.isPageVisible?this.setViewVisibleInterval():this.setInterval(this.intervalOnPageHide):this.setInterval(0)}setInterval(e){if(this.execTimer&&window.clearTimeout(this.execTimer),e<=0)return;let t=e;this.execTime&&(t=e-(Date.now()-this.execTime),t<0&&(t=0)),this.execTimer=window.setTimeout((async()=>{await this.execFn(),this.setInterval(e)}),t)}watchPageStatus(){c.Z.addEventListener("statechange",(e=>{"hidden"===e.newState?this.isPageVisible=!1:this.isPageVisible=!0,this.setPageVisibleInterval()}))}onChangeViewVisible(){let e=!1;this.views.forEach((t=>{e||(e=t)})),this.isViewVisible=e,this.setViewVisibleInterval()}initIo(){this.io=new IntersectionObserver((e=>{e.forEach((e=>{this.views.has(e.target)&&this.views.set(e.target,e.intersectionRatio>0)})),this.onChangeViewVisible()}),{threshold:[0]})}constructor(e,t){if(!t.interval)throw new Error("请设置间隔时间");this.interval=t.interval,this.intervalOnViewOut=t.intervalOnViewOut,this.intervalOnPageHide=t.intervalOnPageHide,this.execFn=async()=>{try{await e()}catch(e){}this.execTime=Date.now()},t.immediate&&this.execFn(),this.watchPageStatus(),this.initIo(),t.view&&this.addView(t.view)}addView(e){this.views.set(e,!1),this.io.observe(e)}removeView(e){this.views.delete(e),this.io.unobserve(e),this.onChangeViewVisible()}}},54765:(e,t,a)=>{a.d(t,{S:()=>r});var i=a(74003);const r={fontColor:"rgba(248, 248, 248, 1)",bgType:"image",bgColor:(0,a(73186).zY)(),bgImageColor:"",bgImage:{large:`${i.c1}/widget-background/background18_larg.jpg`,medium:`${i.c1}/widget-background/background18_medium.jpg`,small:`${i.c1}/widget-background/background18_small.jpg`},bgMask:20}},29852:(e,t,a)=>{a.d(t,{S:()=>l});var i=a(10435),r=a(54765),s=a(96201);const l=(0,i.Q_)("timer-year-modal",{state:()=>({timerStyle:r.S}),actions:{setStyle(e){this.timerStyle={...this.timerStyle,...e}},getOriginList(){const e=(0,s.useTimerYearStore)();this.timerStyle={...e.timerStyle}},saveStyle(){(0,s.useTimerYearStore)().saveStyle(this.timerStyle)}}})},96201:(e,t,a)=>{a.r(t),a.d(t,{useTimerYearStore:()=>h,widgetInfo:()=>g});var i=a(10435),r=a(54765),s=a(24581),l=a(73186),n=a(80661),o=a.n(n),c=a(28850),p=a(94119);const g=(0,s.E0)("widget-timer-year"),m=()=>o()().endOf("year").valueOf(),d=e=>{const t=o()(e+1).diff(o()(),"second");return(0,l.f8)(t)},y=()=>{const e=o()(),t=e.endOf("year").diff(e.startOf("year"),"day")+1,a=e.diff(e.startOf("year"),"day");return Number((a/t*100).toFixed(2))},u=m(),h=(0,i.Q_)(c.BU.timerYear,{syncStorage:{watch:["timerStyle"]},syncCloud:{watch:["timerStyle"]},state:()=>({modalShow:!1,modalState:{size:"s",openType:"add"},timerStyle:r.S,yearEndTime:u,year:o()().year(),gapTime:d(u),percent:y()}),actions:{updateDay(){this.yearEndTime=m(),this.year=o()().year(),this.percent=y()},updateGapDate(){this.gapTime=d(this.yearEndTime)},openModal(e){this.modalState=e,this.setModal(!0)},closeModal(){this.setModal(!1)},setModal(e){p.G.setStatus(s.Rm.timerYear,e),this.modalShow=e},saveStyle(e){this.timerStyle={...e}}}});(0,l.ST)((()=>{h().updateDay()})),setInterval((()=>{h().updateGapDate()}),1e3)},76383:(e,t,a)=>{a.d(t,{Z:()=>v});var i=a(57268),r=a(94209),s=a(29445),l=a(63477),n=a(96201);const o={class:"content relative flex h-full flex-col justify-between"},c={class:"text-[16px] text-opacity-80"},p={class:""},g={class:"mr-[4px] font-ali-75 text-[40px]"},m={class:"text-[12px] opacity-60"},d={class:""},y={class:"mr-[4px] font-ali-75 text-[20px]"},u=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"h",-1),h={class:"mr-[4px] font-ali-75 text-[20px]"},b=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"m",-1),x={class:"mr-[4px] inline-block w-[24px] font-ali-75 text-[20px]"},S=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"s",-1),f={class:"clock absolute right-[72px] top-[50%] -translate-y-1/2 icon-m:right-[60px] icon-s:right-[48px]"},v=(0,i.aZ)({__name:"year-home-large",props:{timerStyle:null},setup(e){const t=e,a=(0,n.useTimerYearStore)(),v=(0,i.Fl)((()=>"image"===t.timerStyle.bgType?{color:t.timerStyle.fontColor,backgroundColor:t.timerStyle.bgImageColor,backgroundImage:`url(${(0,l.Em)(t.timerStyle.bgImage.large,"default",532)})`}:{color:t.timerStyle.fontColor,backgroundColor:t.timerStyle.bgColor})),w=(0,i.Fl)((()=>"image"===t.timerStyle.bgType?{backgroundColor:`rgba(0, 0, 0, ${t.timerStyle.bgMask/100})`}:{})),_=(0,s.iH)();function T(){const e=112,i=t.timerStyle.fontColor;var r=_.value,s=r.getContext("2d");const l=2*window.devicePixelRatio;r.height=e*l,r.width=e*l,s.scale(l,l),s.font="20px ali-75",s.fillStyle=i;var n=a.percent+"",o=s.measureText(n);s.fillText(n,(e-o.width)/2,56),s.globalAlpha=.6,s.font="16px ali-65";o=s.measureText("%");s.fillText("%",(e-o.width)/2,80);s.globalAlpha=1;let c=-Math.PI/2,p=2*Math.PI*a.percent/100-Math.PI/2;function g(e,t,a){s.beginPath(),s.arc(56,56,44,e,t,!1),s.lineWidth=12,s.strokeStyle=a,s.lineCap="round",s.stroke(),s.closePath()}g(c,p,i),s.globalAlpha=.3,c=p,p=2*Math.PI-Math.PI/2,g(c,p,i)}return(0,i.bv)((()=>{T()})),(0,i.YP)((()=>t.timerStyle.fontColor),(()=>{T()})),(e,t)=>((0,i.wg)(),(0,i.iD)("section",{class:"year-home-large relative h-full bg-cover bg-center bg-no-repeat py-[60px] px-[32px] leading-none transition-[background,color] icon-m:py-[44px] icon-m:px-[28px] icon-s:py-[32px] icon-s:px-[24px]",style:(0,r.normalizeStyle)((0,s.SU)(v))},[(0,i._)("div",{class:"mask absolute inset-0 transition-colors",style:(0,r.normalizeStyle)((0,s.SU)(w))},null,4),(0,i._)("div",o,[(0,i._)("div",c,[(0,i._)("span",null,(0,r.toDisplayString)((0,s.SU)(a).year),1),(0,i._)("span",null,(0,r.toDisplayString)("年余额"),1)]),(0,i._)("div",p,[(0,i._)("span",g,(0,r.toDisplayString)((0,s.SU)(a).gapTime.d),1),(0,i._)("span",m,(0,r.toDisplayString)(((0,s.SU)(a).gapTime.d,"天")),1)]),(0,i._)("div",d,[(0,i._)("span",y,(0,r.toDisplayString)((0,s.SU)(a).gapTime.h),1),u,(0,i._)("span",h,(0,r.toDisplayString)((0,s.SU)(a).gapTime.m),1),b,(0,i._)("span",x,(0,r.toDisplayString)((0,s.SU)(a).gapTime.s<10?`0${(0,s.SU)(a).gapTime.s}`:(0,s.SU)(a).gapTime.s),1),S])]),(0,i._)("div",f,[(0,i._)("canvas",{ref_key:"canvasRef",ref:_,class:"h-[112px] w-[112px]"},null,512)])],4))}})},10854:(e,t,a)=>{a.d(t,{Z:()=>v});var i=a(57268),r=a(94209),s=a(29445),l=a(63477),n=a(96201);const o={class:"content relative flex h-full flex-col justify-between"},c={class:"text-[12px] text-opacity-80"},p={class:""},g={class:"mb-[24px]"},m={class:"mr-[8px] font-ali-75 text-[48px]"},d={class:"text-[12px] opacity-60"},y={class:""},u={class:"mr-[4px] font-ali-75 text-[20px]"},h=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"h",-1),b={class:"mr-[4px] font-ali-75 text-[20px]"},x=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"m",-1),S={class:"mr-[4px] inline-block w-[24px] font-ali-75 text-[20px]"},f=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"s",-1),v=(0,i.aZ)({__name:"year-home-medium",props:{timerStyle:null},setup(e){const t=e,a=(0,n.useTimerYearStore)(),v=(0,i.Fl)((()=>"image"===t.timerStyle.bgType?{color:t.timerStyle.fontColor,backgroundColor:t.timerStyle.bgImageColor,backgroundImage:`url(${(0,l.Em)(t.timerStyle.bgImage.medium,"default",236)})`}:{color:t.timerStyle.fontColor,backgroundColor:t.timerStyle.bgColor})),w=(0,i.Fl)((()=>"image"===t.timerStyle.bgType?{backgroundColor:`rgba(0, 0, 0, ${t.timerStyle.bgMask/100})`}:{}));return(e,t)=>((0,i.wg)(),(0,i.iD)("section",{class:"year-home-medium relative h-full bg-cover bg-center bg-no-repeat p-[28px] leading-none transition-[background,color] icon-m:p-[24px] icon-s:p-[20px]",style:(0,r.normalizeStyle)((0,s.SU)(v))},[(0,i._)("div",{class:"mask absolute inset-0 transition-colors",style:(0,r.normalizeStyle)((0,s.SU)(w))},null,4),(0,i._)("div",o,[(0,i._)("div",c,[(0,i._)("span",null,(0,r.toDisplayString)((0,s.SU)(a).year),1),(0,i._)("span",null,(0,r.toDisplayString)("年余额"),1)]),(0,i._)("div",p,[(0,i._)("div",g,[(0,i._)("span",m,(0,r.toDisplayString)((0,s.SU)(a).gapTime.d),1),(0,i._)("span",d,(0,r.toDisplayString)(((0,s.SU)(a).gapTime.d,"天")),1)]),(0,i._)("div",y,[(0,i._)("span",u,(0,r.toDisplayString)((0,s.SU)(a).gapTime.h),1),h,(0,i._)("span",b,(0,r.toDisplayString)((0,s.SU)(a).gapTime.m),1),x,(0,i._)("span",S,(0,r.toDisplayString)((0,s.SU)(a).gapTime.s<10?`0${(0,s.SU)(a).gapTime.s}`:(0,s.SU)(a).gapTime.s),1),f])])])],4))}})},1893:(e,t,a)=>{a.d(t,{Z:()=>w});var i=a(57268),r=a(94209),s=a(29445),l=a(63477),n=a(96201);const o={class:"content relative flex h-full flex-col items-center justify-between leading-none"},c={class:"flex items-center justify-center text-[12px] text-opacity-80"},p=(0,i._)("div",{class:"mr-[8px] h-[1px] w-[36px] opacity-20 icon-m:w-[28px] icon-s:w-[16px]",style:{"background-color":"currentColor"}},null,-1),g={class:""},m=(0,i._)("div",{class:"ml-[8px] h-[1px] w-[36px] opacity-20 icon-m:w-[28px] icon-s:w-[16px]",style:{"background-color":"currentColor"}},null,-1),d={class:""},y={class:"mr-[4px] font-ali-75 text-[18px]"},u=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"d",-1),h={class:"mr-[4px] font-ali-75 text-[18px]"},b=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"h",-1),x={class:"mr-[4px] font-ali-75 text-[18px]"},S=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"m",-1),f={class:"mr-[4px] inline-block w-[20px] font-ali-75 text-[18px]"},v=(0,i._)("span",{class:"mr-[8px] text-[12px] opacity-60"},"s",-1),w=(0,i.aZ)({__name:"year-home-small",props:{timerStyle:null},setup(e){const t=e,a=(0,n.useTimerYearStore)(),w=(0,i.Fl)((()=>"image"===t.timerStyle.bgType?{color:t.timerStyle.fontColor,backgroundColor:t.timerStyle.bgImageColor,backgroundImage:`url(${(0,l.Em)(t.timerStyle.bgImage.small,"default",236)})`}:{color:t.timerStyle.fontColor,backgroundColor:t.timerStyle.bgColor})),_=(0,i.Fl)((()=>"image"===t.timerStyle.bgType?{backgroundColor:`rgba(0, 0, 0, ${t.timerStyle.bgMask/100})`}:{}));return(e,t)=>((0,i.wg)(),(0,i.iD)("section",{class:"year-home-small relative h-full bg-cover bg-center bg-no-repeat pt-[16px] pb-[26px] transition-[background,color] icon-m:pt-[12px] icon-m:pb-[20px] icon-s:pt-[8px] icon-s:pb-[12px]",style:(0,r.normalizeStyle)((0,s.SU)(w))},[(0,i._)("div",{class:"mask absolute inset-0 transition-colors",style:(0,r.normalizeStyle)((0,s.SU)(_))},null,4),(0,i._)("div",o,[(0,i._)("div",c,[p,(0,i._)("div",g,[(0,i._)("span",null,(0,r.toDisplayString)((0,s.SU)(a).year),1),(0,i._)("span",null,(0,r.toDisplayString)("年余额"),1)]),m]),(0,i._)("div",d,[(0,i._)("span",y,(0,r.toDisplayString)((0,s.SU)(a).gapTime.d),1),u,(0,i._)("span",h,(0,r.toDisplayString)((0,s.SU)(a).gapTime.h),1),b,(0,i._)("span",x,(0,r.toDisplayString)((0,s.SU)(a).gapTime.m),1),S,(0,i._)("span",f,(0,r.toDisplayString)((0,s.SU)(a).gapTime.s<10?`0${(0,s.SU)(a).gapTime.s}`:(0,s.SU)(a).gapTime.s),1),v])])],4))}})}}]);