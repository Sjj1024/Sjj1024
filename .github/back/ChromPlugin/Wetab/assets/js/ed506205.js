"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[3533],{68533:(t,e,i)=>{i.d(e,{RQ:()=>c,qH:()=>a});var n,o=i(74003);!function(t){t.all="all",t.baidu="baidu",t.weibo="weibo",t.zhihu="zhihu",t.bilibili="bilibili",t.kr36="kr36",t.toutiao="toutiao",t.sspai="sspai",t.csdn="csdn",t.douyin="douyin",t.wechat="wechat"}(n||(n={}));const a={type:n.all,name:"全部",label:""},l=[{type:n.baidu,name:"百度",label:"热搜",icon:"/hot-search-icon/baidu.png",bgColor:"#4A7AFF"},{type:n.weibo,name:"微博",label:"热搜榜",icon:"/hot-search-icon/weibo.png",bgColor:"#ED4C15"},{type:n.zhihu,name:"知乎",label:"热榜",icon:"/hot-search-icon/zhihu.png",bgColor:"#0066FF"},{type:n.wechat,name:"微信",label:"24小时热文榜",icon:"/hot-search-icon/weixin.png",bgColor:"#04D76A"},{type:n.bilibili,name:"哔哩哔哩",label:"热门",icon:"/hot-search-icon/bilibili.png",bgColor:"#03A7FD"},{type:n.kr36,name:"36氪",label:"24小时热榜",icon:"/hot-search-icon/kr36.png",bgColor:"#4285F4"},{type:n.douyin,name:"抖音",label:"视频榜",icon:"/hot-search-icon/douyin.png",bgColor:"#170B1A"},{type:n.toutiao,name:"今日头条",label:"热文榜",icon:"/hot-search-icon/toutiao.png",bgColor:"#E62318"},{type:n.sspai,name:"少数派",label:"热门文章",icon:"/hot-search-icon/sspai.png",bgColor:"#D7191A"},{type:n.csdn,name:"CSDN",label:"今日热点",icon:"/hot-search-icon/csdn.png",bgColor:"#DD1700"}];let s;!function(t){t.google="google",t.twitter="twitter",t.youtube="youtube",t.tiktok="tiktok",t.netflix="netflix",t.tumblr="tumblr",t.cnet="cnet"}(s||(s={}));const r=[{type:s.google,name:"Google",label:" Trending",icon:"/hot-search-icon/google.png"},{type:s.youtube,name:"Youtube",label:" Trending",icon:"/hot-search-icon/youtube.png"},{type:s.twitter,name:"Twitter",label:" Trending",icon:"/hot-search-icon/twitter.png"},{type:s.tiktok,name:"Tiktok",label:" Trending",icon:"/hot-search-icon/douyin.png"},{type:s.netflix,name:"Netflix",label:" Top 10",icon:"/hot-search-icon/netflix.png"},{type:s.tumblr,name:"Tumblr",label:" Trending",icon:"/hot-search-icon/tumblr.png"},{type:s.cnet,name:"Tumblr",label:" Trending",icon:"/hot-search-icon/cnet.png"}],c=(o.sM?l:r).map((t=>({...t,icon:o.c1+t.icon,list:[],expired:0,updatetime:0})))},3533:(t,e,i)=>{i.r(e),i.d(e,{useHotsearchStore:()=>x,widgetInfo:()=>T});var n=i(10435),o=i(68533),a=i(24581),l=i(28850),s=i(94223),r=i(81212),c=i(34906),h=i(97188),p=i(94007),d=i(12793),u=i(74003),y=i(63477),g=i(88287);const b=new y._P("hotsearch/types",6e5);var m=i(57268),w=i(94119),f=i(20409);const T=(0,a.E0)(a.Rm.hotsearch),x=(0,n.Q_)(l.BU.hotsearch,{syncStorage:{watch:["allType","all"]},state:()=>({allType:"baidu",modalShow:!1,configShow:!1,modalState:{size:"m",openType:"add"},all:o.RQ,loading:!1,modalActiveType:"baidu"}),getters:{optionsList(){return[o.qH].concat(this.all)},allOptions(){return[{text:o.qH.name}].concat(this.all.map((t=>({id:t.type,text:t.name+"·"+t.label}))))},allTypesList(){return this.all.map((t=>t.type))},getListItem:t=>e=>{const i=t.all.find((t=>t.type===e));return i||null},getHomeListItem:t=>e=>{const i=t.all.find((t=>t.type===e));return i?{...i,list:(0,s.Z)(i.list,5)}:null}},actions:{setAllType(t){this.allType=t},addToHome(t,e){(0,d.i)().saveIcon({type:"widget",name:T.title,widgetSize:e,widgetName:T.name,origin:"add",widgetData:t??"all"})},async reqAll(){const[t,e]=await(async()=>{try{if(b.isLocked)return["locked error"];const t=await g.hj.get(`${u.H}hotsearch/types`,{},{_delay:0});if(0===t.code&&t.data.list.length>0)return b.setLock(),[null,t.data.list.map((t=>({...t,icon:u.c1+t.icon})))];throw t}catch(t){return["catch error"]}})();if(t||!e)return;const i=e.map((t=>{const{list:e,expired:i,updatetime:n,...o}=t;return o})),n=this.all.map((t=>{const{list:e,expired:i,updatetime:n,...o}=t;return o}));if((0,r.Z)(i,n))return;const o=new Map;this.all.forEach((t=>{t.list.length>0&&Date.now()>t.expired&&o.set(t.type,t)})),this.all=e.map((t=>{const e=o.get(t.type);return e?(t.list=e.list,t.expired=e.expired,t.updatetime=e.updatetime):(t.list=[],t.expired=0,t.updatetime=0),t}))},async reqHotsearchList(t){const e=this.getListItem(t);if(!e)return;if(Date.now()<e.expired)return;const[i,n]=await(async t=>{try{const e=await g.hj.get(`${u.H}hotsearch/list`,{type:t},{_delay:0});if(0===e.code&&e.data.list.length>0)return[null,e.data];throw e}catch(t){return["catch error"]}})(t);if(i||!n)return;if("baidu"===t){const t=(0,f.R)().baiduUrl;n.list=n.list.map((e=>({...e,oriUrl:e.url,url:t+encodeURIComponent(e.title)})))}this.all.some((e=>{if(e.type===t)return e.list=n.list,e.expired=(0,c.Z)(n.expired,Date.now()+12e4,Date.now()+36e5),e.updatetime=n.updatetime,!0}))&&(this.all=[...this.all])},openModal(t,e){this.reqAll(),e?this.setModalActive(e):this.setModalActive(this.all[0].type),this.modalState=t,this.setModal(!0),"add"===t.openType&&this.setConfigShow(!0)},closeModal(){this.setModal(!1),this.setConfigShow(!1)},setModal(t){w.G.setStatus(a.Rm.hotsearch,t),this.modalShow=t},setConfigShow(t){this.configShow=t},setModalActive(t){this.reqHotsearchList(t),this.modalActiveType=t},switchHomeActive(t){let e="";if("next"===t&&this.allType!==(0,h.Z)(this.allTypesList)){const t=this.allTypesList.findIndex((t=>t===this.allType));e=this.allTypesList[t+1]}else if("prev"===t&&this.allType!==(0,p.Z)(this.allTypesList)){const t=this.allTypesList.findIndex((t=>t===this.allType));t>0&&(e=this.allTypesList[t-1]),0===t&&(e=this.allType)}this.setAllType(e),this.reqHotsearchList(e)}}});(0,m.YP)((()=>x().allType),(t=>{x().reqHotsearchList(t)}))},39547:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(57422),o=i(60385),a=i(20684),l=i(9860);const s=function(t,e,i){if(!(0,l.Z)(i))return!1;var s=typeof e;return!!("number"==s?(0,o.Z)(i)&&(0,a.Z)(e,i.length):"string"==s&&e in i)&&(0,n.Z)(i[e],t)}},94223:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(52561),o=i(39547),a=i(60275),l=Math.ceil,s=Math.max;const r=function(t,e,i){e=(i?(0,o.Z)(t,e,i):void 0===e)?1:s((0,a.Z)(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var c=0,h=0,p=Array(l(r/e));c<r;)p[h++]=(0,n.Z)(t,c,c+=e);return p}},94007:(t,e,i)=>{i.d(e,{Z:()=>n});const n=function(t){return t&&t.length?t[0]:void 0}}}]);