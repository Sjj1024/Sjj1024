"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[115,7570,7244],{17570:(e,t,i)=>{i.r(t),i.d(t,{useCalcCounterStore:()=>n});const n=(0,i(10435).Q_)("calc-components-counter",{state:()=>({type:"base"}),getters:{},actions:{changeCalcType(){this.type="base"===this.type?"scientific":"base"}}})},87244:(e,t,i)=>{i.r(t),i.d(t,{useBaseCounterPanel:()=>f});var n=i(29445),a=i(57268),s=i(10435),o=i(55943),l=i(61045),r=i(17570);class c{constructor(e){this.precision=!1!==(null==e?void 0:e.precision),this.handleError=null==e?void 0:e.handleError,this.cache=(null==e?void 0:e.cache)||!1,this.caches={},this.symbols={},this._definedOperator("+",this.last,"prefix",3),this._definedOperator("-",this.negation,"prefix",3),this._definedOperator("+",this.add.bind(this),"infix",2),this._definedOperator("-",this.sub.bind(this),"infix",2),this._definedOperator("*",this.multi.bind(this),"infix",4),this._definedOperator("·",this.multi.bind(this),"infix",4),this._definedOperator("/",this.div.bind(this),"infix",4),this._definedOperator("(",this.last,"prefix"),this._definedOperator(")",null,"postfix"),this._definedOperator("|",this.mod,"infix",4),this._definedOperator("!",this.fac,"postfix",6),this._definedOperator("^",Math.pow,"infix",5,!0),this._definedOperator("min",Math.min),this._definedOperator("max",Math.max),this._definedOperator(",",Array.of,"infix",1),this._definedOperator("%",this.rate.bind(this),"postfix",6),this._definedOperator("cos",Math.cos),this._definedOperator("sin",Math.sin),this._definedOperator("tan",Math.tan),this._definedOperator("abs",Math.abs),this._definedOperator("log",this.log),this._definedOperator("//",this.sqrt,"infix",4),this.definedOperators((null==e?void 0:e.operators)||[])}calcReg(){const e="\\d+(?:\\.\\d+)?|"+Object.values(this.symbols).sort(((e,t)=>t.symbol.length-e.symbol.length)).map((e=>e.symbol.replace(/[\\*+^()$?.{}|[\]]/g,"\\$&"))).join("|")+"|(\\S)";this.pattern=new RegExp(e,"g")}_definedOperator(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"func",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];"func"===i&&(n=0);const s="infix"===i?2:1;this.symbols[e]=Object.assign({},this.symbols[e],{[i]:{symbol:e,handle:t,precedence:n,argCount:s,type:i,right2left:a},symbol:e})}definedOperators(e){e.map((e=>{if(-1===["(",")",","].indexOf(e.token)&&e.token&&e.func){const t=this.symbols[e.token];t&&(t.infix&&"postfix"===e.type||t.postfix&&"infix"===e.type)||this._definedOperator(e.token,e.func,e.type,e.weight,e.rtol)}})),this.calcReg()}parse(e){const t=e=>{"("!=e.symbol&&s.push(e);const t=e.handle(...[].concat(...a.splice(-e.argCount)));return t.code?t:(a.push(t),e.precedence)},i=(t,i)=>{const n={code:t,message:i,pos:o?o.index:e.length,token:l},a=this.handleError?this.handleError(n):n;return this.caches[e]=a,a},n=[this.symbols["("].prefix],a=[],s=[];let o,l,r=!1;e=e.replace(/\s/g,"");const c=this.caches[e];if(this.cache&&c)return c;this.caches[e]={},this.pattern.lastIndex=0;do{o=this.pattern.exec(e),l=o?o[0]:")";const c=this.symbols[l];if(o&&o[1])return i(1001,`${o[1]} is undefined`);if(!r&&isNaN(l)&&(!c||c&&!c.prefix&&!c.func))return i(1002,"Syntax error");if(r){const e=c.postfix||c.infix;let a;do{const s=n[n.length-1];if((e.precedence-s.precedence||s.right2left)>0)break;if(a=t(n.pop()),"object"==typeof a)return i(a.code,a.message)}while(a);")"!=(null==e?void 0:e.symbol)?"postfix"===(null==e?void 0:e.type)?(t(e),r=!0):(n.push(e),r=!1):r="postfix"===(null==e?void 0:e.type)}else if(isNaN(+l)){if(n.push(c.prefix||c.func),c.func&&(o=this.pattern.exec(e),!o||"("!==o[0]))return i(1003,`Missing a opening parenthesis after function "${l}"`)}else r=!0,a.push(+l),s.push(+l)}while(o&&n.length);return n.length?i(1004,"Opening parenthesis is more than closing parenthesis"):o?i(1005,"Closing parenthesis is more than opening parenthesis"):this.caches[e]={notation:s,value:a.pop()}}rectify(e,t,i){let n;const a=(String(e).split(".")[1]||"").length,s=(String(t).split(".")[1]||"").length;switch(i){case"+":return n=Math.pow(10,Math.max(a,s)),(e*n+t*n)/n;case"-":return n=Math.pow(10,Math.max(a,s)),(e*n-t*n)/n;case"*":return(e*=Math.pow(10,a))*(t*=Math.pow(10,s))/Math.pow(10,a+s);case"/":return(e*=Math.pow(10,a))/(t*=Math.pow(10,s))*Math.pow(10,s-a)}}last(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.pop()}negation(e){return-e}add(e,t){return this.precision?this.rectify(e,t,"+"):e+t}sub(e,t){return this.precision?this.rectify(e,t,"-"):e-t}multi(e,t){return this.precision?this.rectify(e,t,"*"):e*t}div(e,t){return 0===t?{code:1006,message:"The divisor cannot be zero"}:this.precision?this.rectify(e,t,"/"):e/t}mod(e,t){return 0===t?{code:1006,message:"The divisor cannot be zero"}:e%t}fac(e){if(e%1||!(+e>=0))return{code:1008,message:"The factorial base must be a non-negative integer"};if(e>170)return 1/0;let t=1;for(;e>1;)t*=e--;return t}log(e,t){return e<=0||1==e?{code:1007,message:"The base number of logarithmic operations must be greater than 0 and not equal to 1"}:Math.log(t)/Math.log(e)}rate(e){return this.rectify(e,100,"/")}sqrt(e,t){return Math.pow(t,1/e)}}var u=i(14754),d=i(48885),p=i(1585);let h;o.ZP.use(l.Z);const f=()=>{const e=(0,r.useCalcCounterStore)(),t=(0,s.Jk)(e),i=new c,l=(0,n.iH)(""),f=(0,n.iH)(!0),x=(0,n.iH)([]),v=(0,n.iH)(),m=(0,n.iH)(null),y=(0,n.iH)(null),b=(0,n.iH)([0,0]);function g(e){l.value=e}function k(){const[e,t]=b.value;if(0===l.value.length)return void y.value.focus();if(0===e)return y.value.focus(),void setTimeout((()=>{y.value.setSelectionRange(0,0)}),10);const i=l.value.split("");e!==t?(i.splice(e,t),l.value=i.join(""),b.value=[e,e]):(i.splice(e-1,1),l.value=i.join(""),b.value=[e-1,e-1]),y.value.focus(),setTimeout((()=>{y.value.setSelectionRange(e-1,e-1)}),10)}function _(){var e;if(!l.value)return!1;null===(e=x.value)||void 0===e||e.push({equation:l.value,result:v.value}),(0,a.Y3)((()=>{h.refresh(),h.scrollTo(0,h.maxScrollY,300)})),l.value="",v.value="",b.value=[0,0],y.value.focus()}function w(e){const[t,i]=b.value;if(!l.value)return g(e),y.value.focus(),void(b.value=[t+e.length,t+e.length]);const n=l.value.split("");n.splice(t,i-t,e),g(n.join("")),y.value.focus(),b.value=[t+e.length,t+e.length],setTimeout((()=>{y.value.setSelectionRange(t+e.length,t+e.length)}),10)}return(0,a.bv)((()=>{h=new o.ZP(m.value,{...p.IO,scrollX:!1,scrollY:!0,mouseWheel:!0,bounce:!1,momentum:!1})})),(0,a.YP)((()=>l.value),(()=>{if(l.value)try{const e=i.parse(l.value);e.code?v.value="Error":e.value===1/0?v.value="Infinity":v.value=(0,u.uf)(e.value,8,8)}catch(e){v.value="Error"}else v.value=""})),{onInputBase:()=>{},baseExpression:l,onClickKeyBtn:e=>{switch(e){case"bra":!function(){if(l.value.endsWith("."))return!1;if(!l.value)return void w("(");const[e]=b.value;let t=0;for(;t<e;)"("===l.value.charAt(t)?f.value=!1:")"===l.value.charAt(t)&&(f.value=!0),t++;w(f.value?"(":")")}();break;case"del":k();break;case"c":l.value="",f.value=!0,y.value.focus();break;case"enter":_();break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":!function(e){if(l.value.endsWith("%"))return!1;w(e)}(e);break;case"div":case"times":case"minus":case"plus":!function(e){const t=l.value;if(t.endsWith("."))return!1;switch((t.endsWith("/")||t.endsWith("·")||t.endsWith("+")||t.endsWith("-"))&&k(),e){case"div":w("/");break;case"times":w("·");break;case"plus":w("+");break;case"minus":w("-")}}(e);break;case"dot":!function(){const e=l.value,t=e.charAt(e.length-1);isNaN(parseInt(t))||w(".")}();break;case"per":!function(){const e=l.value,t=e.charAt(e.length-1);isNaN(parseInt(t))||w("%")}()}},resultValue:v,scrollHistoryRef:m,onClickHistory:function(e){var t;l.value&&(null===(t=x.value)||void 0===t||t.push({equation:l.value,result:v.value})),l.value=x.value[e].equation,x.value.splice(e,1),(0,a.Y3)((()=>{h.refresh(),h.scrollTo(0,h.maxScrollY,300)})),y.value.focus()},clickEnter:_,inputRef:y,updateCursorPosition:(0,d.Z)((function(){const e=y.value.selectionStart||0,t=y.value.selectionEnd||0;b.value=[e,t]}),50),historyList:x,type:t.type}}},14754:(e,t,i)=>{i.d(t,{D:()=>f,Mb:()=>h,UC:()=>s,WS:()=>p,fS:()=>l,uf:()=>n,vZ:()=>a,zX:()=>o});const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!e)return 0;const n=Math.floor(Math.log(Math.abs(e))/Math.LN10);if(Math.abs(n)<=t)return Number(e.toFixed(i));{const t=e*Math.pow(10,-n);return Number(t.toFixed(i))+"e"+(n>0?"+"+n:n)}},a=(e,t)=>{const i=[...t],n=i.find((e=>e.base)),a=i.find((t=>t.name===e.name));return n.base=!1,a.base=!0,a.value=n.value,i},s=e=>{const t=[...e],i=e.find((e=>e.calcBase)),n=e.find((e=>e.base));var a;i.base?t.map((e=>{var t;e.base||e.calcBase||(e.value=null===(t=e.getValue)||void 0===t?void 0:t.call(null,Number(i.value)))})):(i.value=null===(a=n.reverseValue)||void 0===a?void 0:a.call(null,Number(n.value)),t.map((e=>{var t;e.base||e.calcBase||(e.value=null===(t=e.getValue)||void 0===t?void 0:t.call(null,Number(i.value)))})));return t},o=(e,t)=>{const i=String(e).split("."),n=i[1].split("");let a=0;for(let e=0;e<i[1].length;e++)a+=n[e]*Math.pow(t,-1*(e+1));return parseInt(i[0],t)+a},l=e=>Number(e||0).toFixed(2).replace(/\d+/,(e=>e.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"))),r=[{min:-1/0,max:36e3,rate:.03,deduction:0},{min:36e3,max:144e3,rate:.1,deduction:2520},{min:144e3,max:3e5,rate:.2,deduction:16920},{min:3e5,max:42e4,rate:.25,deduction:31920},{min:42e4,max:66e4,rate:.3,deduction:52920},{min:66e4,max:96e4,rate:.35,deduction:85920},{min:96e4,max:1/0,rate:.45,deduction:181920}],c=[{min:-1/0,max:3e3,rate:.03,deduction:0},{min:3e3,max:12e3,rate:.1,deduction:210},{min:12e3,max:25e3,rate:.2,deduction:1410},{min:25e3,max:35e3,rate:.25,deduction:2660},{min:35e3,max:55e3,rate:.3,deduction:4410},{min:55e3,max:8e4,rate:.35,deduction:7160},{min:8e4,max:1/0,rate:.45,deduction:15160}],u=[{min:-1/0,max:2e4,rate:.2,deduction:0},{min:2e4,max:5e4,rate:.3,deduction:2e3},{min:5e4,max:1/0,rate:.4,deduction:7e3}],d=(e,t)=>t.find((t=>e>t.min&&e<=t.max)),p=e=>d(e,r),h=e=>d(e,c),f=e=>d(e,u)},41573:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(57268),a=i(94209);const s=(0,n.aZ)({__name:"calculator-key-btn",props:{disabled:{type:Boolean,default:!1},fontSize:{default:"16px"},yellow:{type:Boolean,default:!1}},setup(e){const t=e;return(e,i)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,a.normalizeClass)(["calc-btn relative flex cursor-pointer items-center justify-center rounded-[8px] bg-color-calc-b1 text-[16px] text-color-calc-t2 transition-all hover:opacity-60 active:opacity-50",[t.disabled?"pointer-events-none opacity-40":"",t.yellow?"yellow bg-color-calc-l9":""]])},[(0,n.WI)(e.$slots,"default")],2))}})},10115:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var n=i(57268),a=i(29445),s=i(94209),o=i(68398),l=i(87244),r=i(41573);const c={class:"calc-box font-times mx-auto flex h-[528px] w-[500px] flex-col rounded-[16px] border border-color-calc-l5 bg-color-calc-b2 p-[16px] text-[14px] text-color-calc-t1"},u={class:"result-box relative flex h-[236px] flex-col rounded-[6px] bg-color-calc-l0 p-[8px]"},d={class:"flex min-h-full w-full flex-col justify-end"},p=["onClick"],h={class:"flex h-[44px] rounded-[4px] border border-color-calc-l7 bg-color-calc-b2"},f={class:"flex w-[135px] items-center justify-end pr-[12px] text-[16px]"},x={key:0,class:"mr-[6px]"},v={class:"whitespace-nowrap"},m=(e=>((0,n.dD)("data-v-07e608d6"),e=e(),(0,n.Cn)(),e))((()=>(0,n._)("div",{class:"py-[10px]"},null,-1))),y={class:"align-b flex flex-1 flex-wrap justify-between"},b={key:0,class:"flex"},g={key:3,class:"flex w-full items-center justify-between px-[12px] text-color-calc-t1"},k={class:"text-[12px]"},_=(0,n.aZ)({__name:"counter-panel",setup(e){const{type:t,baseExpression:i,onInputBase:_,onClickKeyBtn:w,resultValue:S,historyList:M,onClickHistory:C,scrollHistoryRef:O,clickEnter:D,inputRef:N,updateCursorPosition:H}=(0,l.useBaseCounterPanel)(),U=[{key:"bra",text:"",icon:"icon-brackets_l_icon",icon2:"icon-a-"},{key:"del",text:"",icon:"icon-shanchu1"},{key:"c",text:"C",icon:""},{key:"enter",text:"Enter",icon:"icon-enter"},{key:"7",text:"7",icon:""},{key:"8",text:"8",icon:""},{key:"9",text:"9",icon:""},{key:"div",text:"",icon:"icon-divide"},{key:"4",text:"4",icon:""},{key:"5",text:"5",icon:""},{key:"6",text:"6",icon:""},{key:"times",text:"",icon:"icon-times_icon"},{key:"1",text:"1",icon:""},{key:"2",text:"2",icon:""},{key:"3",text:"3",icon:""},{key:"minus",text:"",icon:"icon-minus_icon"},{key:"0",text:"0",icon:""},{key:"dot",text:".",icon:""},{key:"per",text:"",icon:"icon-percent_icon",size:20},{key:"plus",text:"",icon:"icon-plus_icon"}];return(e,l)=>((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",u,[(0,n._)("div",{ref_key:"scrollHistoryRef",ref:O,class:"h-[176px] overflow-hidden"},[(0,n._)("div",d,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,a.SU)(M),((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"mb-[4px] flex h-[44px] w-full shrink-0 items-center justify-between rounded-[4px] bg-color-black bg-opacity-[0.08] px-[12px] text-[16px] text-color-calc-t3 first:mt-0",onClick:e=>(0,a.SU)(C)(t)},[(0,n._)("span",null,(0,s.toDisplayString)(e.equation),1),(0,n._)("span",null,"= "+(0,s.toDisplayString)(e.result),1)],8,p)))),128))])],512),(0,n._)("div",h,[(0,n.wy)((0,n._)("input",{ref_key:"inputRef",ref:N,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,a.dq)(i)?i.value=e:null),autofocus:"",class:"flex-1 select-none bg-color-none px-[12px] text-[16px]",type:"text",onInput:l[1]||(l[1]=function(){return(0,a.SU)(_)&&(0,a.SU)(_)(...arguments)}),onKeyup:l[2]||(l[2]=(0,o.withKeys)((function(){return(0,a.SU)(D)&&(0,a.SU)(D)(...arguments)}),["enter"]))},null,544),[[o.vModelText,(0,a.SU)(i)]]),(0,n._)("div",f,[(0,a.SU)(i)?((0,n.wg)(),(0,n.iD)("span",x,"=")):(0,n.kq)("",!0),(0,n._)("span",v,(0,s.toDisplayString)((0,a.SU)(S)),1)])])]),m,(0,n.wy)((0,n._)("div",y,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(U,(e=>(0,n.Wm)(r.Z,{key:e.key,class:"h-[36px] w-[111px] text-[16px]",yellow:"enter"===e.key,onClick:t=>(0,a.SU)(w)(e.key),onMouseover:(0,a.SU)(H)},{default:(0,n.w5)((()=>["bra"===e.key?((0,n.wg)(),(0,n.iD)("div",b,[(0,n._)("i",{class:(0,s.normalizeClass)(["iconfont text-[24px]",e.icon])},null,2),(0,n._)("i",{class:(0,s.normalizeClass)(["iconfont text-[24px]",e.icon2])},null,2)])):(0,n.kq)("",!0),"bra"!==e.key&&"enter"!==e.key&&e.icon?((0,n.wg)(),(0,n.iD)("i",{key:1,class:(0,s.normalizeClass)(["iconfont",[e.icon,"per"===e.key?"text-[18px]":"text-[24px]"]])},null,2)):(0,n.kq)("",!0),e.text&&"enter"!==e.key?((0,n.wg)(),(0,n.iD)("span",{key:2,class:(0,s.normalizeClass)(["c"===e.key?" text-color-calc-l9":""])},(0,s.toDisplayString)(e.text),3)):(0,n.kq)("",!0),"enter"===e.key?((0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("span",k,(0,s.toDisplayString)(e.text),1),(0,n._)("i",{class:(0,s.normalizeClass)(["iconfont text-[22px]",e.icon])},null,2)])):(0,n.kq)("",!0)])),_:2},1032,["yellow","onClick","onMouseover"]))),64))],512),[[o.vShow,"base"===(0,a.SU)(t)]])]))}});const w=(0,i(76911).Z)(_,[["__scopeId","data-v-07e608d6"]])}}]);