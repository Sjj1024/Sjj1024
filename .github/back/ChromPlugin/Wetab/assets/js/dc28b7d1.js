"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[2972,2421,102,7331],{97520:(e,t,a)=>{a.d(t,{JD:()=>r,_k:()=>d,bV:()=>c});var l=a(80661),o=a.n(l),i=a(29445),s=a(57268),n=a(73186);const r=(e,t,a)=>{const l=(0,i.iH)(0);let r;const d=()=>{if(e)if("none"===a)l.value=o()(e).diff(o()().startOf("day"),"day");else if("week"===a){if(e>=o()().startOf("day").valueOf())return void(l.value=o()(e).diff(o()().startOf("day"),"day"));let t=o()(e).day()-o()().day();t<0&&(t+=7),l.value=t}else"month"===a?l.value=(0,n.dJ)(e,t):"year"===a&&(l.value=(0,n.hQ)(e,t));else l.value=0};(0,s.bv)((()=>{d(),r=(0,n.ST)(d)})),(0,s.Ah)((()=>{r&&(clearTimeout(r),r=void 0)}));return{diffDay:l,changeTimer:(l,o,i)=>{e=l,t=o,a=i,r&&(clearTimeout(r),r=void 0),d(),r=(0,n.ST)(d)}}},d=e=>{const t=(0,i.iH)(0);let a;const l=()=>{t.value=e?o()().diff(o()(e),"day"):0};(0,s.bv)((()=>{l(),a=(0,n.ST)(l)})),(0,s.Ah)((()=>{a&&(clearTimeout(a),a=void 0)}));return{diffDay:t,changeTimer:t=>{e=t,a&&(clearTimeout(a),a=void 0),l(),a=(0,n.ST)(l)}}},c=()=>{const e=(0,i.iH)({}),t=(0,i.iH)({}),a=(0,i.iH)({});let l,n=null;const r=()=>{l=window.setTimeout((()=>{r()}),1e3);const i=o()(),s=i.second();if(s===n)return;n=s;const d=i.hour()%12,c=i.minute();e.value={transform:`rotate(${30*d+Math.floor(c/2)}deg)`},t.value={transform:`rotate(${6*c}deg)`},a.value={transform:`rotate(${6*s}deg)`}};return(0,s.bv)((()=>{r()})),(0,s.Ah)((()=>{l&&(clearTimeout(l),l=void 0)})),{hourStyle:e,minStyle:t,secondStyle:a}}},68642:(e,t,a)=>{a.r(t);a(42325);var l=a(97982),o=(a(57334),a(66155)),i=a(68398),s=a(96755),n=a(79282),r=a(43451),d=a(35427),c=a(35400),p=a(23709),m=a(57268),u=a(29445),g=a(94209),y=a(49194),f=a(47895),v=a(62144),S=a(97520),w=a(28696),b=a(83389),h=a(56546);const D=(0,m.aZ)({__name:"countdown-modal-preview",setup(e){const t=(0,y.useTimerCountdownStore)(),{diffDay:a,changeTimer:l}=(0,S.JD)(t.widgetData.time,t.widgetData.dateType||"solar",t.widgetData.repeatType||"year");return(0,m.YP)((()=>({time:t.widgetData.time,dateType:t.widgetData.dateType,repeatType:t.widgetData.repeatType})),(e=>{l(e.time,e.dateType||"solar",e.repeatType||"year")})),(e,l)=>((0,m.wg)(),(0,m.j4)(v.Z,{sizes:(0,u.SU)(y.widgetInfo).sizes,"default-size":(0,u.SU)(t).modalState.size},{item:(0,m.w5)((e=>{let{size:l}=e;return["s"===l?((0,m.wg)(),(0,m.j4)(h.Z,{key:0,state:(0,u.SU)(t).widgetData,"diff-day":(0,u.SU)(a)},null,8,["state","diff-day"])):"m"===l?((0,m.wg)(),(0,m.j4)(b.Z,{key:1,state:(0,u.SU)(t).widgetData,"diff-day":(0,u.SU)(a)},null,8,["state","diff-day"])):"l"===l?((0,m.wg)(),(0,m.j4)(w.Z,{key:2,state:(0,u.SU)(t).widgetData,"diff-day":(0,u.SU)(a)},null,8,["state","diff-day"])):(0,m.kq)("",!0)]})),_:1},8,["sizes","default-size"]))}});var x=a(17319),_=a(63477),T=a(40294),k=a(81700);const C={class:"mx-[24px] mb-[20px] h-[44px]"},U={class:"mx-[24px] mb-[20px]"},Z=(0,m.aZ)({__name:"widget-countdown-modal",setup(e){const t=(0,y.useTimerCountdownStore)(),a=(0,u.iH)(),l=(0,m.Fl)((()=>"preview"===t.modalState.openType||"add"===t.modalState.openType)),o=e=>{t.saveModalData({timerStyle:{...t.widgetData.timerStyle,...e}})},i=e=>{t.saveModalData(e)},s=(0,m.Fl)({get:()=>t.widgetData.repeatType||"year",set(e){t.saveModalData({repeatType:e})}}),v={none:{text:"不重复"},week:{text:"每周"},month:{text:"每月"},year:{text:"每年"}},S=async()=>{var e,l;return await(0,_._v)(20),t.widgetData.name?t.widgetData.time?(t.saveWidgetData(),void t.closeModal()):(x.R.fail({message:"请选择日期"}),void(null===(l=a.value)||void 0===l||l.focus())):(x.R.fail({message:"请填写名称"}),void(null===(e=a.value)||void 0===e||e.focus()))};return(e,w)=>{const b=p.Z,h=c.Z,x=d.Z,_=r.Z,Z=n.Z;return(0,m.wg)(),(0,m.j4)(Z,{class:"widget-countdown-modal",ani:"fade",show:(0,u.SU)(t).modalShow},{default:(0,m.w5)((()=>[(0,m.Wm)(_,{"full-screen-btn":!1,onOnClose:w[1]||(w[1]=e=>(0,u.SU)(t).closeModal())},{default:(0,m.w5)((()=>[(0,m.Wm)(f.Z,null,{title:(0,m.w5)((()=>[(0,m.Uk)((0,g.toDisplayString)((0,u.SU)(y.widgetInfo).title),1)])),left:(0,m.w5)((e=>[(0,m.Wm)(T.Z,{class:"relative mt-[28px]","timer-style":(0,u.SU)(t).widgetData.timerStyle,onOnChange:o},{default:(0,m.w5)((()=>[(0,m._)("div",C,[(0,m.Wm)(k.Z,{ref_key:"inputRef",ref:a,class:"z-20","date-picker-teleport":e.containerRef,name:(0,u.SU)(t).widgetData.name,time:(0,u.SU)(t).widgetData.time,"date-type":(0,u.SU)(t).widgetData.dateType,placeholder:"输入事件名称",onOnChange:i},null,8,["date-picker-teleport","name","time","date-type","placeholder"])]),(0,m._)("div",U,[(0,m.Wm)(h,{class:"grow",title:"重复"},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{value:(0,u.SU)(s),"onUpdate:value":w[0]||(w[0]=e=>(0,u.dq)(s)?s.value=e:null),options:v},null,8,["value"])])),_:1},8,["title"])])])),_:2},1032,["timer-style"])])),right:(0,m.w5)((()=>[(0,m.Wm)(D)])),footer:(0,m.w5)((()=>[(0,m.Wm)(x,{class:"w-full",onClick:S},{default:(0,m.w5)((()=>[(0,m.Uk)((0,g.toDisplayString)((0,u.SU)(l)?"添加":"完成"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}});var z=a(75008);(()=>{const e=(0,_.em)(),t=(0,i.createApp)(Z);(0,z.f)(t),t.use(s.M),t.use(o.Z),t.use(l.Z),t.mount(e)})()},49194:(e,t,a)=>{a.r(t),a.d(t,{useTimerCountdownStore:()=>m,widgetInfo:()=>p});var l=a(10435),o=a(74003);const i={name:"",time:0,repeatType:"none",dateType:"solar",timerStyle:{fontColor:"rgba(248, 248, 248, 1)",bgType:"image",bgColor:(0,a(73186).zY)(),bgImageColor:"",bgImage:{large:`${o.c1}/widget-background/background08_larg.jpg`,medium:`${o.c1}/widget-background/background08_medium.jpg`,small:`${o.c1}/widget-background/background08_small.jpg`},bgMask:20}};var s=a(12793),n=a(24581),r=a(5588),d=a(62731),c=a(94119);const p=(0,n.E0)(n.Rm.timerCountdown),m=(0,l.Q_)("timer-countdown",{state:()=>({modalShow:!1,modalState:{size:"s",openType:"add"},widgetData:i}),actions:{getWidgetData(e){if("edit"===e.openType){const t=(0,s.i)().getIconData(e.editId);this.widgetData=t?{...t.widgetData}:{...d.VU}}else this.widgetData={...i}},openModal(e){this.getWidgetData(e),this.modalState=e,this.setModal(!0)},closeModal(){this.setModal(!1),r.r.cancel()},setModal(e){c.G.setStatus(n.Rm.timerCountdown,e),this.modalShow=e},saveModalData(e){this.widgetData={...this.widgetData,...e}},saveWidgetData(){const e=(0,s.i)();"add"===this.modalState.openType||"preview"===this.modalState.openType?e.saveIcon({type:"widget",name:p.title,widgetSize:this.modalState.size,widgetName:p.name,origin:"add",widgetData:this.widgetData}):"edit"===this.modalState.openType&&e.saveWidgetData(this.modalState.editId,this.widgetData)}}})},81700:(e,t,a)=>{a.d(t,{Z:()=>g});var l=a(57268),o=a(68398),i=a(94209),s=a(29445),n=a(63477),r=a(5588);const d={class:"timer-input flex h-full items-center justify-between rounded-[8px] bg-color-m2 bg-opacity-[0.06]"},c=["value","placeholder"],p={class:"timer flex h-full items-center"},m={class:"pointer-events-none absolute right-[64px] text-color-t3"},u=[(0,l._)("i",{class:"iconfont icon-riqi text-[20px] text-color-blue"},null,-1)],g=(0,l.aZ)({__name:"timer-input",props:{name:null,time:null,dateType:null,datePickerTeleport:null,placeholder:{default:"请输入"}},emits:["on-change"],setup(e,t){let{expose:a,emit:g}=t;const y=e,f=(0,s.iH)(!1),v=(0,s.iH)(null),S=()=>{var e;null===(e=v.value)||void 0===e||e.focus()},w=(0,l.Fl)((()=>y.time?(0,n.F8)(y.time,y.dateType):"")),b=e=>{r.r.open({initType:y.dateType||"solar",teleport:y.datePickerTeleport,initValue:y.time||Date.now(),beforeOk(e){var t;let{value:a,type:l}=e;return g("on-change",{name:null===(t=v.value)||void 0===t?void 0:t.value,dateType:l,time:a}),S(),!0},beforeCancel:()=>(S(),!0)}),e.stopPropagation()},h=()=>{f.value=!0},D=e=>{f.value&&(f.value=!1);const t=e.target.value;g("on-change",{name:t})};return a({focus:S,getValue:()=>{var e;return null===(e=v.value)||void 0===e?void 0:e.value}}),(e,t)=>((0,l.wg)(),(0,l.iD)("section",d,[(0,l._)("input",{ref_key:"inputRef",ref:v,autofocus:"",class:"h-full w-full border-0 bg-color-none pl-[12px] pr-[100px] font-ali-65 text-color-t2 outline-0",spellcheck:"false",maxlength:"100",value:y.name,type:"text",placeholder:y.placeholder,onKeyup:t[0]||(t[0]=(0,o.withKeys)((e=>D(e)),["enter"])),onBlur:t[1]||(t[1]=e=>D(e))},null,40,c),(0,l._)("div",p,[(0,l._)("span",m,(0,i.toDisplayString)((0,s.SU)(w)),1),(0,l._)("div",{class:"flex h-full cursor-pointer items-center pr-[12px]",onClick:b,onMousedown:h},u,32)])]))}})},28696:(e,t,a)=>{a.d(t,{Z:()=>S});var l=a(57268),o=a(94209),i=a(29445),s=a(63477),n=a(80661),r=a.n(n);const d={class:"content relative flex h-full flex-col justify-evenly leading-none"},c={class:"text-[12px] leading-[18px] opacity-80"},p={class:""},m={class:""},u={class:"text-[16px]"},g={class:"whitespace-nowrap"},y={class:"mx-[16px] font-ali-75 text-[64px]"},f={class:"whitespace-nowrap"},v={class:"text-right opacity-80"},S=(0,l.aZ)({__name:"countdown-home-large",props:{state:null,diffDay:null},setup(e){const t=e,a=(0,l.Fl)((()=>{const e=r()().startOf("day").add(t.diffDay,"day"),a=(0,s.dG)(e.valueOf(),!0,t.state.dateType);return{...t.state,formateDay:a}})),n=(0,l.Fl)((()=>"image"===t.state.timerStyle.bgType?{color:t.state.timerStyle.fontColor,backgroundColor:t.state.timerStyle.bgImageColor,backgroundImage:`url(${(0,s.Em)(t.state.timerStyle.bgImage.large,"default",532)})`}:{color:t.state.timerStyle.fontColor,backgroundColor:t.state.timerStyle.bgColor})),S=(0,l.Fl)((()=>"image"===t.state.timerStyle.bgType?{backgroundColor:`rgba(0, 0, 0, ${t.state.timerStyle.bgMask/100})`}:{}));return(e,s)=>((0,l.wg)(),(0,l.iD)("section",{class:"countdown-home-large relative h-full bg-cover bg-center bg-no-repeat px-[32px] transition-[background,color] icon-m:px-[28px] icon-s:px-[24px]",style:(0,o.normalizeStyle)((0,i.SU)(n))},[(0,l._)("div",{class:"mask absolute inset-0 transition-colors",style:(0,o.normalizeStyle)((0,i.SU)(S))},null,4),(0,l._)("div",d,[(0,l._)("div",c,[(0,l._)("h1",p,(0,o.toDisplayString)((0,i.SU)(a).name),1),(0,l._)("h2",m,(0,o.toDisplayString)("倒计时"),1)]),(0,l._)("div",u,[(0,l._)("span",g,(0,o.toDisplayString)("还有"),1),(0,l._)("span",y,(0,o.toDisplayString)(t.diffDay),1),(0,l._)("span",f,(0,o.toDisplayString)((t.diffDay,"天")),1)]),(0,l._)("div",v,(0,o.toDisplayString)((0,i.SU)(a).formateDay),1)])],4))}})},83389:(e,t,a)=>{a.d(t,{Z:()=>v});var l=a(57268),o=a(94209),i=a(29445),s=a(63477),n=a(80661),r=a.n(n);const d={class:"content relative flex h-full flex-col items-center justify-around text-[12px] leading-none"},c={class:"text-center leading-[18px] opacity-80"},p={class:""},m={class:""},u={class:"relative mb-[30px] text-[14px] icon-m:mb-[20px] icon-s:mb-[10px]"},g={class:"absolute bottom-[6px] left-[-6px] translate-x-[-100%] whitespace-nowrap"},y={class:"absolute bottom-[6px] right-[-6px] translate-x-[100%] whitespace-nowrap"},f={class:"opacity-80"},v=(0,l.aZ)({__name:"countdown-home-medium",props:{state:null,diffDay:null},setup(e){const t=e,a=(0,l.Fl)((()=>{const e=r()().startOf("day").add(t.diffDay,"day"),a=(0,s.dG)(e.valueOf(),!0,t.state.dateType);return{...t.state,formateDay:a}})),n=(0,l.Fl)((()=>"image"===t.state.timerStyle.bgType?{color:t.state.timerStyle.fontColor,backgroundColor:t.state.timerStyle.bgImageColor,backgroundImage:`url(${(0,s.Em)(t.state.timerStyle.bgImage.medium,"default",236)})`}:{color:t.state.timerStyle.fontColor,backgroundColor:t.state.timerStyle.bgColor})),v=(0,l.Fl)((()=>"image"===t.state.timerStyle.bgType?{backgroundColor:`rgba(0, 0, 0, ${t.state.timerStyle.bgMask/100})`}:{}));return(e,s)=>((0,l.wg)(),(0,l.iD)("section",{class:"countdown-home-medium relative h-full bg-cover bg-center bg-no-repeat transition-[background,color]",style:(0,o.normalizeStyle)((0,i.SU)(n))},[(0,l._)("div",{class:"mask absolute inset-0 transition-colors",style:(0,o.normalizeStyle)((0,i.SU)(v))},null,4),(0,l._)("div",d,[(0,l._)("div",c,[(0,l._)("h1",p,(0,o.toDisplayString)((0,i.SU)(a).name),1),(0,l._)("h2",m,(0,o.toDisplayString)("倒计时"),1)]),(0,l._)("div",u,[(0,l._)("span",g,(0,o.toDisplayString)("还有"),1),(0,l._)("span",{class:(0,o.normalizeClass)([[t.diffDay>1e4?"icon-m:text-[40px] icon-s:text-[34px] ":t.diffDay>1e3?"icon-s:text-[40px]":""],"font-ali-75 text-[48px]"])},(0,o.toDisplayString)(t.diffDay),3),(0,l._)("span",y,(0,o.toDisplayString)((t.diffDay,"天")),1)]),(0,l._)("div",f,(0,o.toDisplayString)((0,i.SU)(a).formateDay),1)])],4))}})},56546:(e,t,a)=>{a.d(t,{Z:()=>f});var l=a(57268),o=a(94209),i=a(29445),s=a(63477),n=a(80661),r=a.n(n);const d={class:"content relative flex h-full flex-col items-center justify-evenly text-[12px] leading-none"},c={class:"opacity-80"},p={class:"relative mt-[4px] icon-m:mt-[2px] icon-s:mt-0"},m={class:"absolute bottom-[2px] left-[-6px] translate-x-[-100%] whitespace-nowrap opacity-80"},u={class:"font-ali-75 text-[20px]"},g={class:"absolute bottom-[2px] right-[-6px] translate-x-[100%] whitespace-nowrap opacity-80"},y={class:"opacity-80"},f=(0,l.aZ)({__name:"countdown-home-small",props:{state:null,diffDay:null},setup(e){const t=e,a=(0,l.Fl)((()=>{const e=r()().startOf("day").add(t.diffDay,"day"),a=(0,s.dG)(e.valueOf(),!0,t.state.dateType);return{...t.state,formateDay:a}})),n=(0,l.Fl)((()=>"image"===t.state.timerStyle.bgType?{color:t.state.timerStyle.fontColor,backgroundColor:t.state.timerStyle.bgImageColor,backgroundImage:`url(${(0,s.Em)(t.state.timerStyle.bgImage.small,"default",236)})`}:{color:t.state.timerStyle.fontColor,backgroundColor:t.state.timerStyle.bgColor})),f=(0,l.Fl)((()=>"image"===t.state.timerStyle.bgType?{backgroundColor:`rgba(0, 0, 0, ${t.state.timerStyle.bgMask/100})`}:{}));return(e,s)=>((0,l.wg)(),(0,l.iD)("section",{class:"countdown-home-small relative h-full bg-cover bg-center bg-no-repeat transition-[background,color]",style:(0,o.normalizeStyle)((0,i.SU)(n))},[(0,l._)("div",{class:"mask absolute inset-0 transition-colors",style:(0,o.normalizeStyle)((0,i.SU)(f))},null,4),(0,l._)("div",d,[(0,l._)("h1",c,(0,o.toDisplayString)((0,i.SU)(a).name),1),(0,l._)("div",p,[(0,l._)("span",m,(0,o.toDisplayString)("还有"),1),(0,l._)("span",u,(0,o.toDisplayString)(t.diffDay),1),(0,l._)("span",g,(0,o.toDisplayString)((t.diffDay,"天")),1)]),(0,l._)("div",y,(0,o.toDisplayString)((0,i.SU)(a).formateDay),1)])],4))}})}}]);