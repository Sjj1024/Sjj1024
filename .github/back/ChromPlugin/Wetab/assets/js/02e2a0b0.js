"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[2556,1261,96,4118,3292,6611,3980,3391],{45069:(e,l,a)=>{a.d(l,{o:()=>t});const t=(0,a(10435).Q_)("settings-home",{state:()=>({settingHomeView:"backup"})})},35400:(e,l,a)=>{a.d(l,{Z:()=>i});var t=a(57268),o=a(94209);const s={class:"hi-cell not-last:mb-[20px]"},r={class:"flex items-center justify-between"},n={class:"flex-1 text-[14px] text-color-t2"},u={class:"flex-shrink-0"},i=(0,t.aZ)({__name:"hi-cell",props:{title:{default:""}},setup(e){const l=e;return(e,a)=>((0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",r,[(0,t._)("span",n,(0,o.toDisplayString)(l.title),1),(0,t._)("div",u,[(0,t.WI)(e.$slots,"default")])])]))}})},51753:(e,l,a)=>{a.d(l,{Z:()=>n});var t=a(79282),o=a(57268),s=a(94209);const r=(0,o._)("i",{class:"iconfont icon-checked_icon rounded-full text-[14px] text-color-white"},null,-1),n=(0,o.aZ)({__name:"hi-checkbox",props:{value:{type:Boolean}},setup(e){const l=e;return(e,a)=>{const n=t.Z;return(0,o.wg)(),(0,o.iD)("button",{class:(0,s.normalizeClass)(["hi-checkbox block h-[16px] w-[16px] overflow-hidden rounded-[4px]",l.value?"border-[1px] border-color-blue bg-color-blue":"border-[3px] border-color-t4"])},[(0,o.Wm)(n,{show:l.value,ani:"scale"},{default:(0,o.w5)((()=>[r])),_:1},8,["show"])],2)}}})},57185:(e,l,a)=>{a.d(l,{Z:()=>r});var t=a(57268),o=a(94209);const s=["onClick"],r=(0,t.aZ)({__name:"hi-popover-menu",props:{options:null,hideBoxClass:{type:Boolean}},emits:["update:value","menu-click"],setup(e,l){let{emit:a}=l;const r=e;return(e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:(0,o.normalizeClass)(r.hideBoxClass?"":"hi-select-menu overflow-hidden rounded-[8px] bg-color-b5 p-[4px] shadow-popover")},[(0,t._)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.options,((e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,{key:l},[e?((0,t.wg)(),(0,t.iD)("button",{key:0,type:"button",class:(0,o.normalizeClass)(["h-[32px] w-full cursor-pointer rounded-[4px] px-[16px] text-left text-[14px] text-color-t2 hover:bg-color-m2 hover:bg-opacity-[0.06] hover:text-color-t1 not-last:mb-[4px]",{[`text-color-${e.color}`]:e.color}]),onClick:e=>{return a("update:value",t=l),a("menu-click"),void(null===(o=(s=r.options[t]).handler)||void 0===o||o.call(s));var t,o,s}},(0,o.toDisplayString)(e.text),11,s)):(0,t.kq)("",!0)],64)))),128))])],2))}})},17530:(e,l,a)=>{a.d(l,{Z:()=>i});var t=a(57185),o=a(57268),s=a(29445),r=a(94209),n=a(73446),u=a(92620);const i=(0,o.aZ)({__name:"hi-popover",props:{show:{type:Boolean},value:{default:""},options:{default:void 0},showArrow:{type:Boolean,default:!1},placement:{default:"bottom-end"},menuClass:{default:""},onlyTheme:{default:void 0}},emits:["update:show","update:value"],setup(e,l){let{emit:a}=l;const i=e,d=(0,o.Fl)({get:()=>i.show,set(e){a("update:show",e)}}),c=(0,o.Fl)({get:()=>i.value,set(e){a("update:value",e)}}),p=(0,s.iH)(0),v=(0,s.iH)(0);return(0,o.YP)(d,(e=>{e&&(v.value=(0,n.K)(),p.value=(0,n.K)())})),(l,a)=>{const n=t.Z,m=(0,o.up)("van-popover");return(0,o.wg)(),(0,o.j4)(m,{show:(0,s.SU)(d),"onUpdate:show":a[2]||(a[2]=e=>(0,s.dq)(d)?d.value=e:null),placement:e.placement,"show-arrow":e.showArrow,style:(0,r.normalizeStyle)({zIndex:p.value,...e.onlyTheme?(0,s.SU)(u.gh)(e.onlyTheme):null}),overlay:"","overlay-class":"!bg-[transparent]","overlay-style":{zIndex:v.value}},{default:(0,o.w5)((()=>[(0,o.WI)(l.$slots,"default",{},(()=>[(0,o.Wm)(n,{value:(0,s.SU)(c),"onUpdate:value":a[0]||(a[0]=e=>(0,s.dq)(c)?c.value=e:null),options:i.options,class:(0,r.normalizeClass)(i.menuClass),onMenuClick:a[1]||(a[1]=e=>d.value=!1)},null,8,["value","options","class"])]))])),reference:(0,o.w5)((()=>[(0,o.WI)(l.$slots,"reference")])),_:3},8,["show","placement","show-arrow","style","overlay-style"])}}})},31261:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});var t=a(35427),o=a(57268),s=a(94209);const r=(0,o.aZ)({__name:"userinfo-dialog-cancel-button",setup(e){const l=(0,o.f3)("changeShow"),a=()=>{l(!1)};return(e,l)=>{const r=t.Z;return(0,o.wg)(),(0,o.j4)(r,{type:"main",class:"bg-color-white dark:bg-opacity-20",onClick:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.toDisplayString)("取消"),1)])),_:1})}}})},60096:(e,l,a)=>{a.r(l),a.d(l,{default:()=>c});var t=a(57268),o=a(94209),s=a(29445);const r={class:"h-full pb-[24px]"},n={class:"flex h-full flex-col"},u={class:"mb-[24px] h-[44px] flex-shrink-0 border-b-[1px] border-color-m2 border-opacity-[0.06] px-[24px] text-center text-[16px] leading-[44px] text-color-t1"},i={class:"flex-1 overflow-hidden px-[24px]"},d={key:0,class:"mt-[24px] flex-shrink-0 px-[24px]"},c=(0,t.aZ)({__name:"userinfo-dialog-template",props:{title:null,isScroll:{type:Boolean,default:!0}},setup(e){const l=e,a=(0,t.Rr)();return(e,c)=>((0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",n,[(0,t._)("div",u,(0,o.toDisplayString)(l.title),1),(0,t._)("div",i,[(0,t._)("div",{class:(0,o.normalizeClass)(["h-full",{"hi-scroll":l.isScroll}])},[(0,t.WI)(e.$slots,"default")],2)]),(0,s.SU)(a).footer?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.WI)(e.$slots,"footer")])):(0,t.kq)("",!0)])]))}})},74118:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var t=a(70308),o=a(35427),s=a(61694),r=a(83218),n=a(70581),u=a(88265),i=a(57268),d=a(94209),c=a(29445),p=a(60096),v=a(31261),m=a(18666),w=a(88793),f=a(24118),x=a.n(f),h=a(74003),_=a(50344),g=a(22140);const y={class:"flex h-full flex-col"},b={class:"mb-[20px] flex-shrink-0 text-[14px] text-color-t2"},k={class:"flex-1 overflow-hidden"},W=["src"],C=(0,i.aZ)({__name:"change-email",setup(e){const l=(0,g.useUserStore)(),a=(0,i.f3)("changeShow"),f=(0,c.iH)("verify-password"),C=(0,c.qj)({password:{value:"",props:{type:"password",placeholder:"密码"}}}),Z={password:m.dZ},S=(0,c.iH)(Date.now()),H=(0,i.Fl)((()=>`${h.H}verify/image?i-branch=zh&type=modify_email&t=${S.value}`)),U=()=>{S.value=Date.now()},D=(0,c.iH)(null),P={text:"下一步",async handler(){const[e]=await(0,w.Gv)({password:x()(C.password.value)});e?D.value.setErrorMsg(e):f.value="input-email"}},j=(0,c.qj)({email:{value:"",props:{placeholder:"邮箱"}},imgCode:{value:"",props:{placeholder:"图片验证码",rawAttrs:{maxlength:4}}},verifyCode:{value:"",props:{placeholder:"邮箱验证码",rawAttrs:{maxlength:6}}}}),I={email:m.Tt,imgCode:[{validator:e=>4===e.trim().length,message:"图片验证码必须有4位"}],verifyCode:[{validator:e=>6===e.trim().length,message:"邮箱验证码必须有6位"}]},z=(0,c.iH)(null),$={text:"完成",async handler(){const[e]=await(0,w.oq)({email:j.email.value,emailCode:j.verifyCode.value});var t;e?null===(t=z.value)||void 0===t||t.setErrorMsg("验证码错误"):(l.user.email=j.email.value,l.user={...l.user},a(!1))}},T=(0,c.iH)(!0),q=(0,c.iH)("发送"),E=e=>{T.value=!!e||!j.imgCode.value},M=e=>{T.value=!!e||!j.email.value};let A,B=60;const G=()=>{if(q.value="重新发送"+B,B--,-1===B)return q.value="发送",A=60,void(T.value=!1);A=(0,_.delay)(G,1e3)},V=(0,c.iH)(null),Y=(0,c.iH)(null),K=async()=>{var e,l;null===(e=Y.value)||void 0===e||e.setErrorMsg(""),null===(l=V.value)||void 0===l||l.setErrorMsg(""),T.value=!0,clearTimeout(A),B=60,G();const[a]=await(0,w.Cz)({email:j.email.value,type:"modify_email",imgCode:j.imgCode.value});var t,o;return"验证码错误"===a?(T.value=!1,q.value="发送",clearTimeout(A),B=60,void(null===(t=Y.value)||void 0===t||t.setErrorMsg("验证码错误"))):"账号已存在"===a?(T.value=!1,q.value="发送",clearTimeout(A),B=60,void(null===(o=V.value)||void 0===o||o.setErrorMsg("账号已存在"))):void 0};return(e,l)=>{const a=u.Z,m=n.Z,w=r.Z,x=s.Z,h=o.Z,_=t.Z;return(0,i.wg)(),(0,i.j4)(p.default,{title:"更改邮箱","is-scroll":!1},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{variable:f.value,class:"h-[247px]"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{value:"verify-password"},{default:(0,i.w5)((()=>[(0,i._)("div",y,[(0,i._)("span",b,(0,d.toDisplayString)("为了您的帐户安全，请输入您的帐户密码"),1),(0,i._)("div",k,[(0,i.Wm)(w,{"content-class":"flex-1",model:C,rules:Z,"submit-btn-attrs":P},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{path:"password"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,(0,i.dG)({ref_key:"$passwordInput",ref:D,value:C.password.value,"onUpdate:value":l[0]||(l[0]=e=>C.password.value=e)},C.password.props),null,16,["value"])])),_:1})])),"form-btn":(0,i.w5)((()=>[(0,i.Wm)(v.default)])),_:1},8,["model"])])])])),_:1}),(0,i.Wm)(x,{value:"input-email"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{model:j,rules:I,"submit-btn-attrs":$},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{path:"email",onOnValidate:E},{default:(0,i.w5)((()=>[(0,i.Wm)(a,(0,i.dG)({ref_key:"$emailInput",ref:V,value:j.email.value,"onUpdate:value":l[1]||(l[1]=e=>j.email.value=e)},j.email.props),null,16,["value"])])),_:1}),(0,i.Wm)(m,{path:"imgCode",onOnValidate:M},{default:(0,i.w5)((()=>[(0,i.Wm)(a,(0,i.dG)({ref_key:"$imgCodeInput",ref:Y},j.imgCode.props,{value:j.imgCode.value,"onUpdate:value":l[2]||(l[2]=e=>j.imgCode.value=e)}),{"outer-right":(0,i.w5)((()=>[(0,i._)("div",{class:"h-[44px] w-[100px] cursor-pointer rounded-[8px] bg-color-t4",onClick:U},[(0,i._)("img",{src:(0,c.SU)(H),class:"h-full"},null,8,W)])])),_:1},16,["value"])])),_:1}),(0,i.Wm)(m,{path:"verifyCode"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,(0,i.dG)({ref_key:"$emailCodeInput",ref:z,value:j.verifyCode.value,"onUpdate:value":l[3]||(l[3]=e=>j.verifyCode.value=e)},j.verifyCode.props),{"inner-right":(0,i.w5)((()=>[(0,i.Wm)(h,{type:"main",size:"medium",disabled:T.value,"text-color":"color-primary",class:"h-full",onClick:K},{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.toDisplayString)(q.value),1)])),_:1},8,["disabled"])])),_:1},16,["value"])])),_:1})])),"form-btn":(0,i.w5)((()=>[(0,i.Wm)(v.default)])),_:1},8,["model"])])),_:1})])),_:1},8,["variable"])])),_:1},8,["title"])}}})},3292:(e,l,a)=>{a.r(l),a.d(l,{default:()=>w});var t=a(83218),o=a(70581),s=a(88265),r=a(57268),n=a(29445),u=a(60096),i=a(31261),d=a(18666),c=a(88793),p=a(24118),v=a.n(p),m=a(22140);const w=(0,r.aZ)({__name:"change-password",setup(e){const l=(0,m.useUserStore)(),a=(0,n.qj)({oldPassword:{value:"",props:{placeholder:"旧密码",type:"password"}},newPassword:{value:"",props:{placeholder:"新密码",type:"password"}},confirmPassword:{value:"",props:{placeholder:"确认密码",type:"password"}}}),p=(0,n.iH)({oldPassword:d.dZ,newPassword:d.dZ,confirmPassword:[{validator:e=>e===a.newPassword.value,message:"两次输入的密码不一致"}]}),w=(0,n.qj)({oldPassword:null,newPassword:null,confirmPassword:null});(0,r.YP)((()=>a.newPassword.value),(()=>{var e;a.confirmPassword.value&&(null===(e=w.confirmPassword)||void 0===e||e.checkInputIsError())}));const f=(0,r.f3)("changeShow"),x=(0,n.iH)({text:"提交",async handler(){const[e,t]=await(0,c.Io)({oldPassword:v()(a.oldPassword.value),newPassword:v()(a.newPassword.value),rePassword:v()(a.confirmPassword.value)});var o;"密码错误"!==e?(l.token=t.token,l.refreshToken=t.refreshToken,f(!1)):null===(o=w.oldPassword)||void 0===o||o.setErrorMsg("密码错误")}});return(e,l)=>{const n=s.Z,d=o.Z,c=t.Z;return(0,r.wg)(),(0,r.j4)(u.default,{title:"更改密码"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{model:a,rules:p.value,"submit-btn-attrs":x.value},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a,((e,l)=>((0,r.wg)(),(0,r.j4)(d,{key:l,path:l},{default:(0,r.w5)((()=>[(0,r.Wm)(n,(0,r.dG)({ref_for:!0,ref:e=>{e&&(w[l]=e)},value:e.value,"onUpdate:value":l=>e.value=l},e.props),null,16,["value","onUpdate:value"])])),_:2},1032,["path"])))),128))])),"form-btn":(0,r.w5)((()=>[(0,r.Wm)(i.default)])),_:1},8,["model","rules","submit-btn-attrs"])])),_:1},8,["title"])}}})},66611:(e,l,a)=>{a.r(l),a.d(l,{default:()=>v});var t=a(83218),o=a(70581),s=a(88265),r=a(57268),n=a(29445),u=a(60096),i=a(31261),d=a(18666),c=a(88793),p=a(22140);const v=(0,r.aZ)({__name:"change-username",props:{username:null},setup(e){const l=e,a=(0,p.useUserStore)(),v=(0,n.qj)({username:{value:l.username,props:{placeholder:"用户名"}}}),m=(0,n.iH)({username:d.yH}),w=(0,r.f3)("changeShow"),f=(0,n.iH)(),x=(0,n.iH)({text:"提交",async handler(){const[e]=await(0,c.Q8)({nickname:v.username.value});var l;e?null===(l=f.value)||void 0===l||l.setErrorMsg(e):(a.user.nickname=v.username.value,a.user={...a.user},w(!1))}});return(e,l)=>{const a=s.Z,n=o.Z,d=t.Z;return(0,r.wg)(),(0,r.j4)(u.default,{title:"更改用户名"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{model:v,rules:m.value,"submit-btn-attrs":x.value},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{path:"username"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,(0,r.dG)({ref_key:"$usernameInput",ref:f,value:v.username.value,"onUpdate:value":l[0]||(l[0]=e=>v.username.value=e)},v.username.props),null,16,["value"])])),_:1})])),"form-btn":(0,r.w5)((()=>[(0,r.Wm)(i.default)])),_:1},8,["model","rules","submit-btn-attrs"])])),_:1},8,["title"])}}})},53980:(e,l,a)=>{a.r(l),a.d(l,{default:()=>f});var t=a(35427),o=a(51753),s=a(57268),r=a(94209),n=a(29445),u=a(60096),i=a(31261),d=a(83078),c=a(22140);const p={class:"text-[14px] text-color-t3"},v={class:"pl-[9px] text-color-t2"},m={class:"flex justify-end"},w={key:0},f=(0,s.aZ)({__name:"delete-account",setup(e){const l=(0,c.useUserStore)(),a=(0,n.iH)("main"),f=(0,n.iH)(!0),x=(0,n.iH)(!1),h=(0,n.iH)(!1),_=()=>{h.value=!h.value},g=(0,n.iH)(9);let y=0;const b=()=>{y=(0,d.Z)((()=>{g.value--,g.value>0?b():(a.value="danger",f.value=!1)}),1e3)};b();const k=(0,s.f3)("changeShow"),W=async()=>{x.value=!0,await l.delete(h.value),k(!1)};return(0,s.Ah)((()=>{clearTimeout(y)})),(e,l)=>{const n=o.Z,d=t.Z;return(0,s.wg)(),(0,s.j4)(u.default,{title:"删除账号？"},{default:(0,s.w5)((()=>[(0,s._)("span",p,(0,r.toDisplayString)("删除账号之后，此账号下的所有信息（包括已上传的图片）均会被清除，是否确认删除此账号？"),1),(0,s._)("button",{class:"mt-[18px] flex items-center",onClick:_},[(0,s.Wm)(n,{value:h.value,"onUpdate:value":l[0]||(l[0]=e=>h.value=e)},null,8,["value"]),(0,s._)("span",v,(0,r.toDisplayString)("清除本地数据"),1)])])),footer:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Wm)(i.default),(0,s.Wm)(d,{type:a.value,disabled:f.value,loading:x.value,class:"ml-[12px]",onClick:W},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.toDisplayString)("删除")+" ",1),g.value?((0,s.wg)(),(0,s.iD)("span",w,"("+(0,r.toDisplayString)(g.value)+")",1)):(0,s.kq)("",!0)])),_:1},8,["type","disabled","loading"])])])),_:1},8,["title"])}}})},93391:(e,l,a)=>{a.r(l),a.d(l,{default:()=>h});var t=a(35427),o=a(51753),s=a(57268),r=a(94209),n=a(29445),u=a(60096),i=a(31261),d=a(22140),c=a(45069),p=a(91294),v=a(74003),m=a(6594);const w={class:"text-[14px] text-color-t3"},f={class:"pl-[9px] text-color-t2"},x={class:"flex justify-end"},h=(0,s.aZ)({__name:"login-out",setup(e){const l=(0,n.iH)(!1),a=()=>{l.value=!l.value},h=(0,d.useUserStore)(),_=(0,c.o)(),g=(0,n.iH)(!1),y=(0,s.f3)("changeShow"),b=async()=>{if(h.loginOut(l.value),_.settingHomeView="backup",v.AN){const e=(0,p.V)(),l=(0,m.t)();e.settingsShow=!1,l.setActiveCard("login")}y(!1)};return(e,n)=>{const d=o.Z,c=t.Z;return(0,s.wg)(),(0,s.j4)(u.default,{title:"退出登录？"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("span",w,(0,r.toDisplayString)("清除本地数据以防止此设备上不同帐户的数据连接"),1),(0,s._)("button",{class:"mt-[18px] flex items-center",onClick:a},[(0,s.Wm)(d,{value:l.value,"onUpdate:value":n[0]||(n[0]=e=>l.value=e)},null,8,["value"]),(0,s._)("span",f,(0,r.toDisplayString)("清除本地数据"),1)])])])),footer:(0,s.w5)((()=>[(0,s._)("div",x,[(0,s.Wm)(i.default),(0,s.Wm)(c,{type:"danger",loading:g.value,class:"ml-[12px]",onClick:b},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.toDisplayString)("退出"),1)])),_:1},8,["loading"])])])),_:1},8,["title"])}}})},92556:(e,l,a)=>{a.r(l),a.d(l,{default:()=>V});var t=a(30789),o=a(96466),s=a(35400),r=a(78005),n=a(55395),u=a(82099),i=a(17530),d=a(57268),c=a(29445),p=a(94209),v=a(93391),m=a(53980),w=a(66611),f=a(3292),x=a(74118),h=a(45069),_=a(22140),g=a(10435),y=a(96643),b=a(88793),k=a(17319),W=a(16097);const C=e=>((0,d.dD)("data-v-478918ed"),e=e(),(0,d.Cn)(),e),Z={id:"settings-userinfo",class:"px-[70px] py-[40px]"},S=C((()=>(0,d._)("button",{class:"h-[24px] w-[24px]"},[(0,d._)("i",{class:"iconfont icon-single_hover_icon text-[24px] text-color-t2"})],-1))),H={class:"mt-[44px] flex justify-center border-b-[1px] border-color-m2 border-opacity-[0.06] pb-[27px] text-center"},U={class:"relative mx-auto block h-[48px] w-[48px] overflow-hidden rounded-full"},D=["src"],P=C((()=>(0,d._)("i",{class:"iconfont icon-pen_icon text-[20px] text-color-white"},null,-1))),j={class:"mt-[28px]"},I={class:"flex items-center"},z={class:"max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap pr-[12px] text-[14px] text-color-t3"},$=C((()=>(0,d._)("i",{class:"iconfont icon-arrow_icon text-[12px] text-color-t2"},null,-1))),T={class:"flex items-center"},q={class:"flex max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap pr-[12px] text-[11px] text-color-t3"},E=C((()=>(0,d._)("i",{class:"iconfont icon-arrow_icon text-[12px] text-color-t2"},null,-1))),M={class:"flex items-center"},A={class:"max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap pr-[12px] text-[14px] text-color-t3"},B=C((()=>(0,d._)("i",{class:"iconfont icon-arrow_icon text-[12px] text-color-t2"},null,-1))),G=(0,d.aZ)({__name:"settings-userinfo",setup(e){const l=(0,h.o)(),a=(0,_.useUserStore)(),C=(0,c.iH)(!1),G=(0,c.iH)(!1),V=(0,c.iH)(!1),Y=(0,c.iH)(!1),K=(0,c.iH)(!1),O=(0,c.iH)(!1),R=(0,c.iH)(!1),F=(0,c.iH)({"sign-out":{text:"退出登录",handler(){C.value=!0}},"delete-count":{text:"删除账号",color:"danger",handler(){G.value=!0}}}),{user:Q}=(0,g.Jk)(a),J=(0,c.iH)(Q.value.avatar),N=e=>{J.value=e,V.value=!0},L=async e=>{if(e.blob.size>2097152)return void k.R.fail({message:"文件大小超出限制"});const[l,t]=await(0,y.E)("user-avatar",e.blob);if(l)return void k.R.fail({message:l});const[o]=await(0,b.Q8)({avatar:t});o?k.R.fail({message:o}):a.modifyUserInfo({avatar:t})};return(e,a)=>{const h=i.Z,_=u.Z,g=n.Z,y=r.Z,b=s.Z,k=o.Z,X=t.Z;return(0,d.wg)(),(0,d.iD)("div",Z,[(0,d.Wm)(_,{title:"个人信息",onBack:a[1]||(a[1]=e=>(0,c.SU)(l).settingHomeView="backup")},{right:(0,d.w5)((()=>[(0,d.Wm)(h,{show:R.value,"onUpdate:show":a[0]||(a[0]=e=>R.value=e),options:F.value},{reference:(0,d.w5)((()=>[S])),_:1},8,["show","options"])])),_:1},8,["title"]),(0,d._)("div",H,[(0,d.Wm)(y,{onOnSuccess:N},{default:(0,d.w5)((()=>[(0,d._)("button",U,[(0,d._)("img",{class:"h-full w-full",src:(0,c.SU)(Q).avatar||(0,c.SU)(W.c),alt:""},null,8,D),(0,d.Wm)(g,{opacity:60,class:"flex items-center justify-center rounded-[16px] opacity-0 transition-opacity hover:opacity-100"},{default:(0,d.w5)((()=>[P])),_:1})])])),_:1})]),(0,d._)("div",j,[(0,d.Wm)(b,{title:"用户名",class:"cursor-pointer",onClick:a[2]||(a[2]=e=>Y.value=!0)},{default:(0,d.w5)((()=>[(0,d._)("div",I,[(0,d._)("span",z,(0,p.toDisplayString)((0,c.SU)(Q).nickname),1),$])])),_:1},8,["title"]),(0,d.Wm)(b,{title:"密码",class:"cursor-pointer",onClick:a[3]||(a[3]=e=>K.value=!0)},{default:(0,d.w5)((()=>[(0,d._)("div",T,[(0,d._)("div",q,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(new Array(8).fill(""),((e,l)=>((0,d.wg)(),(0,d.iD)("div",{key:l,class:"ml-[3px] h-[6px] w-[6px] rounded-[50%] bg-color-t3"})))),128))]),E])])),_:1},8,["title"]),(0,d.Wm)(b,{title:"邮箱",class:"cursor-pointer",onClick:a[4]||(a[4]=e=>O.value=!0)},{default:(0,d.w5)((()=>[(0,d._)("div",M,[(0,d._)("span",A,(0,p.toDisplayString)((0,c.SU)(Q).email),1),B])])),_:1},8,["title"])]),(0,d.Wm)(k,{show:C.value,"onUpdate:show":a[5]||(a[5]=e=>C.value=e),width:400},{default:(0,d.w5)((()=>[(0,d.Wm)(v.default)])),_:1},8,["show"]),(0,d.Wm)(k,{show:G.value,"onUpdate:show":a[6]||(a[6]=e=>G.value=e),width:400},{default:(0,d.w5)((()=>[(0,d.Wm)(m.default)])),_:1},8,["show"]),(0,d.Wm)(X,{show:V.value,"onUpdate:show":a[7]||(a[7]=e=>V.value=e),"show-color-picker":!1,title:"编辑头像","max-img-size":200,img:J.value,onCropperSuccess:L},null,8,["show","title","img"]),(0,d.Wm)(k,{show:Y.value,"onUpdate:show":a[8]||(a[8]=e=>Y.value=e),width:300},{default:(0,d.w5)((()=>[(0,d.Wm)(w.default,{username:(0,c.SU)(Q).nickname},null,8,["username"])])),_:1},8,["show"]),(0,d.Wm)(k,{show:K.value,"onUpdate:show":a[9]||(a[9]=e=>K.value=e),width:300},{default:(0,d.w5)((()=>[(0,d.Wm)(f.default)])),_:1},8,["show"]),(0,d.Wm)(k,{show:O.value,"onUpdate:show":a[10]||(a[10]=e=>O.value=e),width:300},{default:(0,d.w5)((()=>[(0,d.Wm)(x.default)])),_:1},8,["show"])])}}});const V=(0,a(76911).Z)(G,[["__scopeId","data-v-478918ed"]])}}]);