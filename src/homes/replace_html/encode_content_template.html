<div class="theme-doc-markdown markdown"><h1>Syntax</h1><p>There are two types of parsers in the system: the full SQL parser (a recursive descent parser), and the data format parser (a fast stream parser).
In all cases except the <code>INSERT</code> query, only the full SQL parser is used.
The <code>INSERT</code> query uses both parsers:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token keyword" style="color: rgb(0, 0, 255);">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 255);">INTO</span><span class="token plain"> t </span><span class="token keyword" style="color: rgb(0, 0, 255);">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token number" style="color: rgb(9, 134, 88);">1</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">'Hello, world'</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token number" style="color: rgb(9, 134, 88);">2</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">'abc'</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token number" style="color: rgb(9, 134, 88);">3</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">'def'</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>INSERT INTO t VALUES</code> fragment is parsed by the full parser, and the data <code>(1, 'Hello, world'), (2, 'abc'), (3, 'def')</code> is parsed by the fast stream parser. You can also turn on the full parser for the data by using the <a href="/docs/en/operations/settings/formats#settings-input_format_values_interpret_expressions">input_format_values_interpret_expressions</a> setting. When <code>input_format_values_interpret_expressions = 1</code>, ClickHouse first tries to parse values with the fast stream parser. If it fails, ClickHouse tries to use the full parser for the data, treating it like an SQL <a href="#syntax-expressions">expression</a>.</p><p>Data can have any format. When a query is received, the server calculates no more than <a href="/docs/en/operations/settings/settings#settings-max_query_size">max_query_size</a> bytes of the request in RAM (by default, 1 MB), and the rest is stream parsed.
It allows for avoiding issues with large <code>INSERT</code> queries.</p><p>When using the <code>Values</code> format in an <code>INSERT</code> query, it may seem that data is parsed the same as expressions in a <code>SELECT</code> query, but this is not true. The <code>Values</code> format is much more limited.</p><p>The rest of this article covers the full parser. For more information about format parsers, see the <a href="/docs/en/interfaces/formats">Formats</a> section.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spaces">Spaces<a href="#spaces" class="hash-link" aria-label="Direct link to Spaces" title="Direct link to Spaces">​</a></h2><p>There may be any number of space symbols between syntactical constructions (including the beginning and end of a query). Space symbols include the space, tab, line feed, CR, and form feed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="comments">Comments<a href="#comments" class="hash-link" aria-label="Direct link to Comments" title="Direct link to Comments">​</a></h2><p>ClickHouse supports either SQL-style and C-style comments:</p><ul class=""><li>SQL-style comments start with <code>--</code>, <code>#!</code> or <code># </code> and continue to the end of the line, a space after <code>--</code> and <code>#!</code> can be omitted.</li><li>C-style are from <code>/*</code> to <code>*/</code>and can be multiline, spaces are not required either.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="keywords">Keywords<a href="#keywords" class="hash-link" aria-label="Direct link to Keywords" title="Direct link to Keywords">​</a></h2><p>Keywords are case-insensitive when they correspond to:</p><ul class=""><li>SQL standard. For example, <code>SELECT</code>, <code>select</code> and <code>SeLeCt</code> are all valid.</li><li>Implementation in some popular DBMS (MySQL or Postgres). For example, <code>DateTime</code> is the same as <code>datetime</code>.</li></ul><p>You can check whether a data type name is case-sensitive in the <a href="/docs/en/operations/system-tables/data_type_families#system_tables-data_type_families">system.data_type_families</a> table.</p><p>In contrast to standard SQL, all other keywords (including functions names) are <strong>case-sensitive</strong>.</p><p>Keywords are not reserved; they are treated as such only in the corresponding context. If you use <a href="#syntax-identifiers">identifiers</a> with the same name as the keywords, enclose them into double-quotes or backticks. For example, the query <code>SELECT "FROM" FROM table_name</code> is valid if the table <code>table_name</code> has column with the name <code>"FROM"</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="identifiers">Identifiers<a href="#identifiers" class="hash-link" aria-label="Direct link to Identifiers" title="Direct link to Identifiers">​</a></h2><p>Identifiers are:</p><ul class=""><li>Cluster, database, table, partition, and column names.</li><li>Functions.</li><li>Data types.</li><li><a href="#syntax-expression_aliases">Expression aliases</a>.</li></ul><p>Identifiers can be quoted or non-quoted. The latter is preferred.</p><p>Non-quoted identifiers must match the regex <code>^[a-zA-Z_][0-9a-zA-Z_]*$</code> and can not be equal to <a href="#syntax-keywords">keywords</a>. Examples: <code>x</code>, <code>_1</code>, <code>X_y__Z123_</code>.</p><p>If you want to use identifiers the same as keywords or you want to use other symbols in identifiers, quote it using double quotes or backticks, for example, <code>"id"</code>, <code>`id`</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="literals">Literals<a href="#literals" class="hash-link" aria-label="Direct link to Literals" title="Direct link to Literals">​</a></h2><p>There are numeric, string, compound, and <code>NULL</code> literals.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="numeric">Numeric<a href="#numeric" class="hash-link" aria-label="Direct link to Numeric" title="Direct link to Numeric">​</a></h3><p>Numeric literal tries to be parsed:</p><ul class=""><li>First, as a 64-bit signed number, using the <a href="https://en.cppreference.com/w/cpp/string/byte/strtoul" target="_blank" rel="noopener noreferrer">strtoull</a> function.</li><li>If unsuccessful, as a 64-bit unsigned number, using the <a href="https://en.cppreference.com/w/cpp/string/byte/strtol" target="_blank" rel="noopener noreferrer">strtoll</a> function.</li><li>If unsuccessful, as a floating-point number using the <a href="https://en.cppreference.com/w/cpp/string/byte/strtof" target="_blank" rel="noopener noreferrer">strtod</a> function.</li><li>Otherwise, it returns an error.</li></ul><p>Literal value has the smallest type that the value fits in.
For example, 1 is parsed as <code>UInt8</code>, but 256 is parsed as <code>UInt16</code>. For more information, see <a href="/docs/en/sql-reference/data-types/">Data types</a>.
Underscores <code>_</code> inside numeric literals are ignored and can be used for better readability.</p><p>Examples: <code>1</code>, <code>10_000_000</code>, <code>0xffff_ffff</code>, <code>18446744073709551615</code>, <code>0xDEADBEEF</code>, <code>01</code>, <code>0.1</code>, <code>1e100</code>, <code>-1e-100</code>, <code>inf</code>, <code>nan</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="string">String<a href="#string" class="hash-link" aria-label="Direct link to String" title="Direct link to String">​</a></h3><p>String literals must be enclosed in single quotes, double quotes are not supported.
Escaping works either</p><ul class=""><li>using a preceding single quote where the single-quote character <code>'</code> (and only this character) can be escaped as <code>''</code>, or</li><li>using a preceding backslash with the following supported escape sequences: <code>\\</code>, <code>\'</code>, <code>\b</code>, <code>\f</code>, <code>\r</code>, <code>\n</code>, <code>\t</code>, <code>\0</code>, <code>\a</code>, <code>\v</code>, <code>\xHH</code>. The backslash loses its special meaning, i.e. will be interpreted literally, if it precedes characters different than the listed ones.</li></ul><p>In string literals, you need to escape at least <code>'</code> and <code>\</code> using escape codes <code>\'</code> (or: <code>''</code>) and <code>\\</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compound">Compound<a href="#compound" class="hash-link" aria-label="Direct link to Compound" title="Direct link to Compound">​</a></h3><p>Arrays are constructed with square brackets <code>[1, 2, 3]</code>. Tuples are constructed with round brackets <code>(1, 'Hello, world!', 2)</code>.
Technically these are not literals, but expressions with the array creation operator and the tuple creation operator, respectively.
An array must consist of at least one item, and a tuple must have at least two items.
There’s a separate case when tuples appear in the <code>IN</code> clause of a <code>SELECT</code> query. Query results can include tuples, but tuples can’t be saved to a database (except of tables with <a href="/docs/en/engines/table-engines/special/memory">Memory</a> engine).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="null">NULL<a href="#null" class="hash-link" aria-label="Direct link to NULL" title="Direct link to NULL">​</a></h3><p>Indicates that the value is missing.</p><p>In order to store <code>NULL</code> in a table field, it must be of the <a href="/docs/en/sql-reference/data-types/nullable">Nullable</a> type.</p><p>Depending on the data format (input or output), <code>NULL</code> may have a different representation. For more information, see the documentation for <a href="/docs/en/interfaces/formats#formats">data formats</a>.</p><p>There are many nuances to processing <code>NULL</code>. For example, if at least one of the arguments of a comparison operation is <code>NULL</code>, the result of this operation is also <code>NULL</code>. The same is true for multiplication, addition, and other operations. For more information, read the documentation for each operation.</p><p>In queries, you can check <code>NULL</code> using the <a href="/docs/en/sql-reference/operators/#operator-is-null">IS NULL</a> and <a href="/docs/en/sql-reference/operators/">IS NOT NULL</a> operators and the related functions <code>isNull</code> and <code>isNotNull</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="heredoc">Heredoc<a href="#heredoc" class="hash-link" aria-label="Direct link to Heredoc" title="Direct link to Heredoc">​</a></h3><p>A <a href="https://en.wikipedia.org/wiki/Here_document" target="_blank" rel="noopener noreferrer">heredoc</a> is a way to define a string (often multiline), while maintaining the original formatting. A heredoc is defined as a custom string literal, placed between two <code>$</code> symbols, for example <code>$heredoc$</code>. A value between two heredocs is processed "as-is".</p><p>You can use a heredoc to embed snippets of SQL, HTML, or XML code, etc.</p><p><strong>Example</strong></p><p>Query:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token keyword" style="color: rgb(0, 0, 255);">SELECT</span><span class="token plain"> $smth$</span><span class="token keyword" style="color: rgb(0, 0, 255);">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 255);">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 255);">VIEW</span><span class="token plain"> my_view$smth$</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">┌─'SHOW CREATE VIEW my_view'─┐</span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">│ SHOW CREATE VIEW my_view   │</span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">└────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="defining-and-using-query-parameters">Defining and Using Query Parameters<a href="#defining-and-using-query-parameters" class="hash-link" aria-label="Direct link to Defining and Using Query Parameters" title="Direct link to Defining and Using Query Parameters">​</a></h2><p>Query parameters allow you to write generic queries that contain abstract placeholders instead of concrete identifiers. When a query with query parameters is executed, all placeholders are resolved and replaced by the actual query parameter values.</p><p>There are two way to define a query parameter:</p><ul class=""><li>use the <code>SET param_&lt;name&gt;=&lt;value&gt;</code> command</li><li>use <code>--param_&lt;name&gt;='&lt;value&gt;'</code> as an argument to <code>clickhouse-client</code> on the command line. <code>&lt;name&gt;</code> is the name of the query parameter and <code>&lt;value&gt;</code> is its value</li></ul><p>A query parameter can be referenced in a query using <code>{&lt;name&gt;: &lt;datatype&gt;}</code>, where <code>&lt;name&gt;</code> is the query parameter name and <code>&lt;datatype&gt;</code> is the datatype it is converted to.</p><p>For example, the following SQL defines parameters named <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> - each with a different data type:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token keyword" style="color: rgb(0, 0, 255);">SET</span><span class="token plain"> param_a </span><span class="token operator" style="color: rgb(0, 0, 0);">=</span><span class="token plain"> </span><span class="token number" style="color: rgb(9, 134, 88);">13</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">SET</span><span class="token plain"> param_b </span><span class="token operator" style="color: rgb(0, 0, 0);">=</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">'str'</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">SET</span><span class="token plain"> param_c </span><span class="token operator" style="color: rgb(0, 0, 0);">=</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">'2022-08-04 18:30:53'</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">SET</span><span class="token plain"> param_d </span><span class="token operator" style="color: rgb(0, 0, 0);">=</span><span class="token plain"> {</span><span class="token string" style="color: rgb(163, 21, 21);">'10'</span><span class="token plain">: </span><span class="token punctuation" style="color: rgb(4, 81, 165);">[</span><span class="token number" style="color: rgb(9, 134, 88);">11</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(9, 134, 88);">12</span><span class="token punctuation" style="color: rgb(4, 81, 165);">]</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">'13'</span><span class="token plain">: </span><span class="token punctuation" style="color: rgb(4, 81, 165);">[</span><span class="token number" style="color: rgb(9, 134, 88);">14</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(9, 134, 88);">15</span><span class="token punctuation" style="color: rgb(4, 81, 165);">]</span><span class="token plain">}'</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">   {a: UInt32}</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">   {b: String}</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">   {c: </span><span class="token keyword" style="color: rgb(0, 0, 255);">DateTime</span><span class="token plain">}</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">   {d: Map</span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token plain">String</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> Array</span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token plain">UInt8</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token plain">}</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">13  str 2022-08-04 18:30:53 {'10':[11,12],'13':[14,15]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are using <code>clickhouse-client</code>, the parameters are specified as <code>--param_name=value</code>. For example, the following parameter has the name <code>message</code> and it is retrieved as a <code>String</code>:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">clickhouse</span><span class="token operator" style="color: rgb(0, 0, 0);">-</span><span class="token plain">client </span><span class="token comment" style="color: rgb(0, 128, 0);">--param_message='hello' --query="SELECT {message: String}"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the query parameter represents the name of a database, table, function or other identifier, use <code>Identifier</code> for its type. For example, the following query returns rows from a table named <code>uk_price_paid</code>:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token keyword" style="color: rgb(0, 0, 255);">SET</span><span class="token plain"> param_mytablename </span><span class="token operator" style="color: rgb(0, 0, 0);">=</span><span class="token plain"> </span><span class="token string" style="color: rgb(163, 21, 21);">"uk_price_paid"</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">SELECT</span><span class="token plain"> </span><span class="token operator" style="color: rgb(0, 0, 0);">*</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 255);">FROM</span><span class="token plain"> {mytablename:Identifier}</span><span class="token punctuation" style="color: rgb(4, 81, 165);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Query parameters are not general text substitutions which can be used in arbitrary places in arbitrary SQL queries. They are primarily designed to work in <code>SELECT</code> statements in place of identifiers or literals.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><p>Function calls are written like an identifier with a list of arguments (possibly empty) in round brackets. In contrast to standard SQL, the brackets are required, even for an empty argument list. Example: <code>now()</code>.
There are regular and aggregate functions (see the section “Aggregate functions”). Some aggregate functions can contain two lists of arguments in brackets. Example: <code>quantile (0.9) (x)</code>. These aggregate functions are called “parametric” functions, and the arguments in the first list are called “parameters”. The syntax of aggregate functions without parameters is the same as for regular functions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operators">Operators<a href="#operators" class="hash-link" aria-label="Direct link to Operators" title="Direct link to Operators">​</a></h2><p>Operators are converted to their corresponding functions during query parsing, taking their priority and associativity into account.
For example, the expression <code>1 + 2 * 3 + 4</code> is transformed to <code>plus(plus(1, multiply(2, 3)), 4)</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-types-and-database-table-engines">Data Types and Database Table Engines<a href="#data-types-and-database-table-engines" class="hash-link" aria-label="Direct link to Data Types and Database Table Engines" title="Direct link to Data Types and Database Table Engines">​</a></h2><p>Data types and table engines in the <code>CREATE</code> query are written the same way as identifiers or functions. In other words, they may or may not contain an argument list in brackets. For more information, see the sections “Data types,” “Table engines,” and “CREATE”.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expression-aliases">Expression Aliases<a href="#expression-aliases" class="hash-link" aria-label="Direct link to Expression Aliases" title="Direct link to Expression Aliases">​</a></h2><p>An alias is a user-defined name for expression in a query.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">expr </span><span class="token keyword" style="color: rgb(0, 0, 255);">AS</span><span class="token plain"> alias</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul class=""><li><p><code>AS</code> — The keyword for defining aliases. You can define the alias for a table name or a column name in a <code>SELECT</code> clause without using the <code>AS</code> keyword.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">For example, `SELECT table_name_alias.column_name FROM table_name table_name_alias`.</span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">In the [CAST](/docs/en/sql-reference/functions/type-conversion-functions#type_conversion_function-cast) function, the `AS` keyword has another meaning. See the description of the function.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><code>expr</code> — Any expression supported by ClickHouse.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">For example, `SELECT column_name * 2 AS double FROM some_table`.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><code>alias</code> — Name for <code>expr</code>. Aliases should comply with the <a href="#syntax-identifiers">identifiers</a> syntax.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">For example, `SELECT "table t".column_name FROM table_name AS "table t"`.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-usage">Notes on Usage<a href="#notes-on-usage" class="hash-link" aria-label="Direct link to Notes on Usage" title="Direct link to Notes on Usage">​</a></h3><p>Aliases are global for a query or subquery, and you can define an alias in any part of a query for any expression. For example, <code>SELECT (1 AS n) + 2, n</code>.</p><p>Aliases are not visible in subqueries and between subqueries. For example, while executing the query <code>SELECT (SELECT sum(b.a) + num FROM b) - a.a AS num FROM a</code> ClickHouse generates the exception <code>Unknown identifier: num</code>.</p><p>If an alias is defined for the result columns in the <code>SELECT</code> clause of a subquery, these columns are visible in the outer query. For example, <code>SELECT n + m FROM (SELECT 1 AS n, 2 AS m)</code>.</p><p>Be careful with aliases that are the same as column or table names. Let’s consider the following example:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token keyword" style="color: rgb(0, 0, 255);">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 255);">TABLE</span><span class="token plain"> t</span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">    a </span><span class="token keyword" style="color: rgb(0, 0, 255);">Int</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">    b </span><span class="token keyword" style="color: rgb(0, 0, 255);">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">ENGINE</span><span class="token plain"> </span><span class="token operator" style="color: rgb(0, 0, 0);">=</span><span class="token plain"> TinyLog</span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token keyword" style="color: rgb(0, 0, 255);">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">    argMax</span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token plain">a</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"> b</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token punctuation" style="color: rgb(4, 81, 165);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">    </span><span class="token function" style="color: rgb(0, 0, 255);">sum</span><span class="token punctuation" style="color: rgb(4, 81, 165);">(</span><span class="token plain">b</span><span class="token punctuation" style="color: rgb(4, 81, 165);">)</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 255);">AS</span><span class="token plain"> b</span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain"></span><span class="token keyword" style="color: rgb(0, 0, 255);">FROM</span><span class="token plain"> t</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000; --prism-background-color:#ffffff;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">Received exception from server (version 18.14.17):</span><br></span><span class="token-line" style="color: rgb(0, 0, 0);"><span class="token plain">Code: 184. DB::Exception: Received from localhost:9000, 127.0.0.1. DB::Exception: Aggregate function sum(b) is found inside another aggregate function in query.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, we declared table <code>t</code> with column <code>b</code>. Then, when selecting data, we defined the <code>sum(b) AS b</code> alias. As aliases are global, ClickHouse substituted the literal <code>b</code> in the expression <code>argMax(a, b)</code> with the expression <code>sum(b)</code>. This substitution caused the exception. You can change this default behavior by setting <a href="/docs/en/operations/settings/settings#prefer_column_name_to_alias">prefer_column_name_to_alias</a> to <code>1</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="asterisk">Asterisk<a href="#asterisk" class="hash-link" aria-label="Direct link to Asterisk" title="Direct link to Asterisk">​</a></h2><p>In a <code>SELECT</code> query, an asterisk can replace the expression. For more information, see the section “SELECT”.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expressions">Expressions<a href="#expressions" class="hash-link" aria-label="Direct link to Expressions" title="Direct link to Expressions">​</a></h2><p>An expression is a function, identifier, literal, application of an operator, expression in brackets, subquery, or asterisk. It can also contain an alias.
A list of expressions is one or more expressions separated by commas.
Functions and operators, in turn, can have expressions as arguments.</p></div>
<p>使用方法：</p>
<div style="display: none">
    encodeContent
</div>
<p>&nbsp;</p>
<hr />