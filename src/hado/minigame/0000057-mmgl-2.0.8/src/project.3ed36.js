window.__require=function t(i,e,n){function a(o,s){if(!e[o]){if(!i[o]){var h=o.split("/");if(h=h[h.length-1],!i[h]){var r="function"==typeof __require&&__require;if(!s&&r)return r(h,!0);if(c)return c(h,!0);throw new Error("Cannot find module '"+o+"'")}}var g=e[o]={exports:{}};i[o][0].call(g.exports,function(t){return a(i[o][1][t]||t)},g,g.exports,t,i,e,n)}return e[o].exports}for(var c="function"==typeof __require&&__require,o=0;o<n.length;o++)a(n[o]);return a}({AD_loading:[function(t,i,e){"use strict";cc._RF.push(i,"57d0eNsezhHGpn/PsLl8dXe","AD_loading"),cc.Class({extends:cc.Component,properties:{t:0,icon:cc.Node},show:function(){this.node.active=!0,this.node.zIndex=9999},hide:function(){this.node.active=!1},update:function(t){this.t+=t,this.t>=.1&&(this.icon.rotation+=30,this.t=0)}}),cc._RF.pop()},{}],AudioMgr:[function(t,i,e){"use strict";cc._RF.push(i,"84ea7avRlpFXIsIqwiaFqk0","AudioMgr"),cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1},init:function(){var t;null!=(t=cc.sys.localStorage.getItem("bgmVolume"))&&(this.bgmVolume=parseFloat(t)),null!=(t=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(t)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(t){return cc.loader.getRes("sounds/"+t,cc.AudioClip)},playBGM:function(t){var i=this.getUrl(t);console.log(i),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(i,!0,this.bgmVolume)},playSFX:function(t){var i=this.getUrl(t);cc.audioEngine.play(i,!1,1)},setSFXVolume:function(t){this.sfxVolume!=t&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},setBGMVolume:function(t,i){this.bgmAudioID>=0&&(t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=t||i)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],HTTP:[function(t,i,e){"use strict";cc._RF.push(i,"8fcf0ZsL9hFm6JVxc6cQwAk","HTTP");var n="https://applets.17kx.com/maomao",a=cc.Class({extends:cc.Component,statics:{sessionId:0,userId:0,master_url:n,url:n,sendRequest:function(t,i,e,n){var c=cc.loader.getXMLHttpRequest();c.timeout=5e3;var o="?";for(var s in i)"?"!=o&&(o+="&"),o+=s+"="+i[s];null==n&&(n=a.url);var h=n+t+encodeURI(o);return c.open("GET",h,!0),cc.sys.isNative&&c.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),c.onreadystatechange=function(){if(4===c.readyState&&c.status>=200&&c.status<300)try{var t=JSON.parse(c.responseText);null!==e&&e(t)}catch(t){console.log("err:"+t)}},c.send(),c}}});cc._RF.pop()},{}],alert:[function(t,i,e){"use strict";cc._RF.push(i,"fdd8aa4P8dKnrgVc5ipcQEj","alert"),cc.Class({extends:cc.Component,properties:{lbl_title:cc.Label,lbl_content:cc.Label,lbl_ok_tip:cc.Label,lbl_cancel_tip:cc.Label,_onokclick:null,_oncancelclick:null},showMessageBox:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u786e \u5b9a",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.lbl_content.string=t,this._onokclick=i,this._oncancelclick=a,this.node.getChildByName("button").active=!0,this.lbl_ok_tip.string=e,null!=n?(this.lbl_cancel_tip.node.parent.active=!0,this.lbl_cancel_tip.string=n):this.lbl_cancel_tip.node.parent.active=!1},showTip:function(t,i){var e=this;this.node.getChildByName("button").active=!1,this.lbl_content.string=t,this.schedule(function(){e.node.destroy(),e.destroy()},i)},on_ok_btn_click:function(){null!==this._onokclick&&this._onokclick(),this.onclose()},on_cancel_click:function(){null!==this._oncancelclick&&this._oncancelclick(),this.onclose()},onclose:function(){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(0,2,0),cc.callFunc(function(){t.node.removeFromParent(),t.node.destroy()})))}}),cc._RF.pop()},{}],cat_loading:[function(t,i,e){"use strict";function n(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}cc._RF.push(i,"a58c09LBRpCqp/pGh4WQ39u","cat_loading"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label,_stateStr:"",_progress:0,_isLoading:!1,prg:cc.ProgressBar,CompleteCount:0,cCount:0,totalCount:0},start:function(){var i=t("AudioMgr");if(cc.director.preloadScene("cat_start"),cc.director.preloadScene("cat_main"),gg.audioMgr=new i,gg.othergames=[],gg.userData=gg.getItem("maomaogame"),null==gg.userData){var e;gg.userData=(n(e={coin:1e5,gem:0,mqcoin:0,buy_coin:[100],running:0,level:0,park:[],jiasu_endtime:0,choujiangtime:0},"level",1),n(e,"lixiantime",Date.now()),e);for(var a=1;a<30;a++)gg.userData.buy_coin.push(parseInt(2.2*gg.userData.buy_coin[a-1]))}cc.log(gg.userData),this.startPreloading()},startPreloading:function(){this._isLoading=!0;var t=this;this.prg.node.active=!0;cc.loader.loadResDir("./",cc.SpriteFrame,function(i,e,n){t._progress=i/e},function(t,i){cc.director.loadScene("cat_start")})},update:function(t){this._isLoading&&(this.prg.progress=this._progress)}}),cc._RF.pop()},{AudioMgr:"AudioMgr"}],cat_main:[function(t,i,e){"use strict";cc._RF.push(i,"f9b04kTYDpLPaNpGJu86i6v","cat_main");var n=[cc.v2(10,50),cc.v2(86,5),cc.v2(-10,-50),cc.v2(-86,-5)];cc.Class({extends:cc.Component,properties:{cat_prefab:cc.Prefab,jb_prefab:cc.Prefab,jb_lbl_prefab:cc.Prefab,mallItem_prefab:cc.Prefab,xinshou_pre:cc.Prefab,rankItemPrefab:cc.Prefab},onLoad:function(){this.isShowFrank=!1,this.ShowFRank_t=0,this.tex=new cc.Texture2D},start:function(){gg.isXinShou=!1,gg.sceneNode=this.node,gg.jiasu=1,gg.coin=[4];for(var t=0;t<35;t++)gg.coin.push(parseInt(2*gg.coin[t]));gg.level_times=[12,11.82,11.65,11.47,11.29,11.12,10.94,10.76,10.59,10.41,10.24,10.06,9.88,9.71,9.53,9.35,9.18,9,8.82,8.65,8.47,8.29,8.12,7.94,7.76,7.59,7.41,7.24,7.06,6.88,6.71,6.53,6.35,6.18,6],gg.catsConfig=[100,1500,5e3,13500,47760];for(var i=5;i<35;i++)gg.catsConfig.push(parseInt(2.66*gg.catsConfig[i-1]));gg.mcgem=[3,5,7,10,15,20,25,30,35,40,45,50,55,60,65,70,80,90,100,110,120,130,140,150,170,190,210,230,260],this.init(),this.initEventHandlers(),this.show_jb_count(),this.show_jb_mq(),this.show_gem(),this.show_buy_coin();var e=this;cc.game.on(cc.game.EVENT_HIDE,function(){console.log("hide"),e.saveData()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("show"),e.replace()});gg.userData.openid,gg.userData.id,gg.userData.t,gg.userData.token;if(this.bx_date=gg.getMeiRiCount("bx_data"),this.bx_date.today_count<5&&this.scheduleOnce(this.tjbx,60),100==gg.userData.buy_coin[0]){gg.isXinShou=!0;var n=cc.instantiate(this.xinshou_pre);n.zIndex=99,n.parent=this.node,this.xs=n.getComponent("xinshou"),this.xinshouYD(1)}var a=gg.getMeiRiCount("cj_free"),c=gg.getMeiRiCount("cj_video"),o=cc.find("Canvas/panel/choujiang/tip").getComponent(cc.Label);a=a.today_count>1?1:a.today_count,c=c.today_count>3?3:c.today_count,o.string="\u5269\u4f59\u514d\u8d39\u62bd\u5956 "+(1-a)+" \u6b21,  \u89c6\u9891\u62bd\u5956 "+(3-c)+" \u6b21"},openMeiRiLiBao:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=cc.find("Canvas/panel/meirilibao/list"),e=this.mrlb_date.count+1;e>7&&this.mrlb_date.istoday&&(e=1);for(var n=null,a=1;a<e;a++)(n=i.getChildByName(a+"")).color=new cc.Color(73,73,73),n.getChildByName("tip").getComponent(cc.Label).string="\u5df2\u9886\u53d6";var c=i.parent.getChildByName("shuangbei");this.mrlb_date.istoday?((n=i.getChildByName(e+"")).getComponent(cc.Button).enabled=!0,n.getComponent(cc.Animation).play("UI_suofang"),c.setPosition(i.parent.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2(0,0)))),c.y-=117,c.active=!0):(c.active=!1,e-=1);for(var o=e+1;o<8;o++)(n=i.getChildByName(o+"")).color=new cc.Color(209,171,171),n.getChildByName("tip").getComponent(cc.Label).string=o==e+1?"\u660e\u65e5\u9886\u53d6":"";this.libaocount=e,t&&this.onOpenDialog(null,"meirilibao")},meirilibao_AD:function(){},meirilibao:function(t,i){var e=void 0,n=void 0,a=[10,20,30,35,40,45,50][this.libaocount-1];cc.find("Canvas/panel/meirilibao/shuangbei").active=!1,null==t&&"shuangbei"==i?(a*=2,e=this.libaocount,n=cc.find("Canvas/panel/meirilibao/list/"+this.libaocount)):(e=parseInt(t.target.name),n=t.target),e==this.libaocount&&(gg.showTip("\u606d\u559c\u4f60\u83b7\u5f97\u4e86\u94bb\u77f3*"+a),gg.userData.gem+=a,gg.saveUserData("gem",gg.userData.gem),this.show_gem(),n.color=new cc.Color(73,73,73),n.getChildByName("tip").getComponent(cc.Label).string="\u5df2\u9886\u53d6",n.getComponent(cc.Button).enabled=!1,n.getComponent(cc.Animation).stop("UI_suofang"),this.mrlb_date.count++,this.mrlb_date.istoday=!1,gg.setMeiRiCount("mrlb_date",this.mrlb_date))},xinshouYD:function(t){switch(t){case 1:this.xinshouYD_1()}},xinshouYD_1:function(){var t=this;this.scheduleOnce(function(){var i=cc.find("Canvas/UI/btn_buy"),e=i.convertToWorldSpaceAR(cc.v2(0,0));t.xs.mask_rect(e,i.width,i.height,"\u70b9\u51fb\u8d2d\u4e70\u732b\u54aa"),t.xs.setClick(i,function(){t.xinshouYD_2()})},.01)},xinshouYD_2:function(){var t=this,i=this;if(null!=this.park[0].cat){var e=[];e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(-3,547))),e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(-141.6,472.7))),e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(179.7,317))),e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(317.4,390.6))),this.scheduleOnce(function(){var n=t.park[0].cat.node,a=t.parkNode.convertToWorldSpaceAR(t.park[1].pos);i.xs.mask_shape(e,"\u62d6\u52a8\u5347\u7ea7\u732b\u54aa"),i.xs.setDrag(n,a,function(){i.scheduleOnce(function(){1==t.park[1].cat.catid&&i.xinshouYD_2_2()},1)})},.5)}else i.xinshouYD_1()},xinshouYD_2_2:function(){this.xinshouYD_3()},xinshouYD_3:function(){var t=this,i=this;if(null!=this.park[1].cat){var e=[];e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(89.2,530.4))),e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(240.7,456))),e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(-196,-331))),e.push(this.parkNode.convertToWorldSpaceAR(cc.v2(-347.4,-257.1))),this.scheduleOnce(function(){var n=t.park[1].cat.node,a=t.parkNode.convertToWorldSpaceAR(cc.v2(-185,-185.1));i.xs.mask_shape(e,"\u62d6\u52a8\u732b\u54aa\u5230\u8dd1\u9053\u8d5a\u53d6\u91d1\u5e01"),i.xs.setDrag(n,a,function(){i.scheduleOnce(function(){gg.userData.running>0?i.xinshouYD_4():i.xinshouYD_3()},.1)})},.01)}},xinshouYD_4:function(){for(var t=this,i=this,e=function(e){if(null!=t.park[e].cat&&t.park[e].cat.b_isRunning)return t.scheduleOnce(function(){var n=t.park[e].cat.cat_copy,a=n.convertToWorldSpaceAR(cc.v2(0,0));i.xs.mask_circle(a,88,"\u70b9\u51fb\u505c\u6b62"),i.xs.setClick(n,function(){i.xinshouYD_5()})},.01),"break"},n=0;n<12;n++){if("break"===e(n))break}},xinshouYD_5:function(){var t=this;this.scheduleOnce(function(){var i=cc.find("Canvas/UI/btn_mall"),e=i.convertToWorldSpaceAR(cc.v2(0,0));t.xs.mask_rect(e,i.width,i.height,"\u70b9\u51fb\u6253\u5f00\u732b\u54aa\u5546\u57ce"),t.xs.setClick(i,function(){t.scheduleOnce(function(){cc.find("Canvas/panel/maomao").active&&t.xinshouYD_6()},.5)})},.01)},xinshouYD_6:function(){var t=this,i=this;this.scheduleOnce(function(){var e=cc.find("Canvas/panel/maomao/listbg/sv_list/view/content"),n=(e=e.children[0].getChildByName("btn_buy")).convertToWorldSpaceAR(cc.v2(0,0));i.xs.mask_rect(n,e.width,e.height,"\u70b9\u51fb\u8d2d\u4e70\u732b\u54aa"),i.xs.setClick(e,function(){i.scheduleOnce(function(){for(var e=0;e<12;e++)if(null!=t.park[e].cat&&0==t.park[e].cat.catid){cc.find("Canvas/panel/maomao").active=!1,i.xinshouYD_7(t.park[e]);break}},.5)})},.01)},xinshouYD_7:function(t){var i=this,e=this,n=[],a=t.pos;n.push(this.parkNode.convertToWorldSpaceAR(cc.v2(a.x-109,a.y+29))),n.push(this.parkNode.convertToWorldSpaceAR(cc.v2(a.x+53,a.y+29))),n.push(this.parkNode.convertToWorldSpaceAR(cc.v2(317,-573))),n.push(this.parkNode.convertToWorldSpaceAR(cc.v2(155,-573))),this.scheduleOnce(function(){var a=t.cat.node,c=i.parkNode.convertToWorldSpaceAR(cc.v2(215,-519));e.xs.mask_shape(n,"\u62d6\u52a8\u56de\u6536\u732b\u54aa"),e.xs.setDrag(a,c,function(){e.scheduleOnce(function(){a.isValid||(e.xs.close(),gg.showTip("\u606d\u559c\u4f60\u901a\u8fc7\u4e86\u65b0\u624b\u5f15\u5bfc,\u795d\u60a8\u65e9\u65e5\u6210\u4e3a\u9996\u5bcc.",3))},.1)})},.01)},tjbx:function(){if(gg.isXinShou)this.scheduleOnce(this.tjbx,60);else{cc.log("\u5b9d\u7bb1\u6765\u4e86");var t=cc.find("Canvas/panel/baoxiang/baoxiang");t.active=!0,t.getComponent(cc.Animation).play("down"),t.getComponent(cc.Animation).on("finished",function(){cc.find("Canvas/panel/baoxiang/g").active=!0})}},onColseBx:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(cc.find("Canvas/panel/baoxiang/g").active=!1,cc.find("Canvas/panel/baoxiang/baoxiang").active=!1,this.bx_date.today_count++,gg.setMeiRiCount("bx_date",this.bx_date),"1"==i){var e=0;e=gg.userData.level>2?gg.userData.level-3:0,cc.find("Canvas/panel/openbaoxiang/icon").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("cats/"+(e+1)+".png",cc.SpriteFrame),this.onOpenDialog(null,"openbaoxiang"),this.bxcatid=e}this.bx_date.today_count<5&&this.scheduleOnce(this.tjbx,60)},bx_lingqu:function(){this.onBuycat(null,this.bxcatid,0),this.onCloseDialog(null,"openbaoxiang")},bx_lingqu_ad:function(){},js_ad:function(){},getgem_ad:function(){},saveData:function(){var t=this.getParkObj();gg.userData.lixiantime=Date.now(),gg.userData.park=t,gg.saveUserData()},init:function(){this.parkNode=cc.find("Canvas/park"),cc.find("Canvas/panel").zIndex=10,this.lbl_jb_count=cc.find("Canvas/UI/jb_bg/coin/lbl").getComponent(cc.Label),this.lbl_jb_count2=cc.find("Canvas/panel/maomao/jb/num").getComponent(cc.Label),this.lbl_jb_mq=cc.find("Canvas/UI/jb_bg/meiquan/lbl").getComponent(cc.Label),this.lbl_buy_coin=cc.find("Canvas/UI/btn_buy/lbl").getComponent(cc.Label),this.lbl_gem=cc.find("Canvas/UI/gem/lbl").getComponent(cc.Label),this.huishouNode=cc.find("Canvas/\u56de\u6536"),this.jiasu_lizi=cc.find("Canvas/js_lizi"),this.lbl_running=cc.find("Canvas/lupai/num").getComponent(cc.Label),this.lbl_jiasu=cc.find("Canvas/UI/js_lbl").getComponent(cc.Label),this.lbl_choujiang=cc.find("Canvas/UI/cj_lbl").getComponent(cc.Label),this.sp_friendrank=cc.find("Canvas/panel/paihang/friendrank/sp_list").getComponent(cc.Sprite),this.sp_myrank=cc.find("Canvas/panel/paihang/friendrank/wd/sp_num").getComponent(cc.Sprite),this.runwaystart=[cc.v2(-331,-270),cc.v2(-65,-123)],this.park=[];for(var t=0;t<3;t++)this.park.push({pos:cc.v2(12,486-329*t),cat:null}),this.park.push({pos:cc.v2(121,418-329*t),cat:null}),this.park.push({pos:cc.v2(-106,423-329*t),cat:null}),this.park.push({pos:cc.v2(12,349-329*t),cat:null});for(var i=0;i<gg.userData.park.length;i++){var e=gg.userData.park[i];if(!(e.catid>=30)){var n=cc.instantiate(this.cat_prefab);n.parent=this.parkNode,this.park[e.index].cat=n.getComponent("cat"),this.park[e.index].cat.init(e.index,this.park[e.index].pos,e.catid),e.b_isRunning&&(this.park[e.index].cat.copy(),this.park[e.index].cat.wayid=e.wayid,n.setPosition(e.pos),this.park[e.index].cat.run(!1,e.scaleX),gg.userData.mqcoin+=gg.coin[this.park[e.index].cat.catid],this.showRunningCount(1))}}this.replace()},replace:function(){this.js_time=0,this.cj_time=0;var t=gg.userData.jiasu_endtime>gg.userData.lixiantime?parseInt((gg.userData.jiasu_endtime-gg.userData.lixiantime)/1e3):0,i=parseInt((Date.now()-gg.userData.lixiantime)/1e3),e=this;i>t?t=0:t-=i,this.showLiXianShouYi(i),t>2?(this.js_time=t,this.scheduleOnce(function(){e.onJiaSu(1)},1)):(this.lbl_jiasu.string="\u672a\u52a0\u901f",this.js_time=0,gg.userData.jiasu_endtime=0,this.scheduleOnce(function(){e.onJiaSu(0)},1)),this.cj_time=(gg.userData.choujiangtime-Date.now())/1e3,this.cj_time<=0&&(this.lbl_choujiang.string="",gg.userData.choujiangtime=0,this.cj_time=0)},getParkObj:function(){for(var t=[],i=0;i<12;i++)this.park[i].cat&&t.push({index:this.park[i].cat.index,catid:this.park[i].cat.catid,b_isRunning:this.park[i].cat.b_isRunning,wayid:this.park[i].cat.wayid,pos:this.park[i].cat.node.getPosition(),fx:this.park[i].cat.fangxiang,scaleX:this.park[i].cat.node.scaleX});return t},onJiaSu:function(t){0==t?(gg.jiasu=1,this.jiasu_lizi.active=!1):(gg.jiasu=2,this.jiasu_lizi.active=!0),this.show_jb_mq()},showLiXianShouYi:function(t){var i=this.getLiXianShouYi();if(!(i<=0||null==i)){i=parseInt(i*t*.05);var e=this.onOpenDialog(null,"lixian");this.lixiannum=i,e.getChildByName("num").getComponent(cc.Label).string=gg.getNumString(i)}},lixian_AD:function(){},lixian_lq:function(){gg.userData.coin+=this.lixiannum,this.show_jb_count(),gg.audioMgr.playSFX("addjb"),this.lixiannum=0,this.onCloseDialog(null,"lixian")},initEventHandlers:function(){var t=this;this.node.on("cat_touch_start",function(i){t.huishouNode.color=cc.color(255,137,137)},this),this.node.on("cat_touch_end",this.onTouchcat,this),this.node.on("gold_add",this.onAddGold,this),this.node.on("cat_stop",function(i){gg.userData.mqcoin-=i,t.showRunningCount(-1),t.show_jb_mq()},this)},show_jb_count:function(){this.lbl_jb_count.string=gg.getNumString(gg.userData.coin),this.lbl_jb_count2.string=this.lbl_jb_count.string},show_jb_mq:function(){this.lbl_jb_mq.string=gg.getNumString(gg.userData.mqcoin)+"/\u79d2"},show_gem:function(){this.lbl_gem.string=gg.userData.gem},show_buy_coin:function(){this.lbl_buy_coin.string=gg.getNumString(gg.userData.buy_coin[0])},show_time:function(t){this.js_time>0&&(this.lbl_jiasu.string=gg.formatTime(this.js_time.toFixed(0)),this.js_time-=t,this.js_time<=0&&(this.lbl_jiasu.string="\u672a\u52a0\u901f",this.js_time=0,this.onJiaSu(0)))},onBuycat:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e=null==e?gg.userData.buy_coin[i]:e,gg.userData.coin<e)return console.log("\u91d1\u5e01\u4e0d\u8db3"),this.share_coin_count=gg.getMeiRiCount("share_coin_count"),void(this.share_coin_count.today_count<5?(this.share_getcoin=gg.randomNum(e-gg.userData.coin,e),cc.find("Canvas/panel/tishi/tip").getComponent(cc.Label).string="+"+gg.getNumString(this.share_getcoin)+"\u91d1\u5e01",this.onOpenDialog(null,"tishi")):gg.showTip("\u91d1\u5e01\u4e0d\u8db3,\u9700\u8981"+gg.getNumString(e)));for(var n=0;n<12;n++)if(!this.park[n].cat){gg.audioMgr.playSFX("move"),gg.userData.coin-=e;var a=cc.instantiate(this.cat_prefab);return a.parent=this.parkNode,this.park[n].cat=a.getComponent("cat"),this.park[n].cat.init(n,this.park[n].pos,i),gg.userData.buy_coin[i]=parseInt(1.2*gg.userData.buy_coin[i]),this.show_jb_count(),void this.show_buy_coin()}gg.showTip("\u732b\u7a9d\u90fd\u4f4f\u6ee1\u4e86\u54e6!",1)},onAddGold:function(t){gg.audioMgr.playSFX("addjb");var i=cc.instantiate(this.jb_prefab),e=cc.instantiate(this.jb_lbl_prefab);e.getComponent(cc.Label).string="+"+gg.getNumString(parseInt(t)),e.parent=this.node,e.setPosition(cc.v2(gg.randomNum(-50,50),-427)),e.active=!0,e.zIndex=6,e.runAction(cc.sequence(cc.spawn(cc.moveBy(1,cc.v2(0,98)),cc.fadeTo(1.1,0)),cc.callFunc(function(){e.destroy()}))),i.parent=this.node,i.active=!0,i.zIndex=6,i.setPosition(cc.v2(5,-427)),gg.userData.coin+=t,this.show_jb_count()},onTouchcat:function(t){var i=this;if(this.huishouNode.color=cc.color(255,255,255),cc.v2(206,-511).fuzzyEquals(t.pos,50))return t.cat.huishou(),gg.userData.coin+=100,gg.showTip("\u4f60\u7684\u732b\u54aa\u5356\u4e86100\u91d1\u5e01"),this.show_jb_count(),void(this.park[t.cat.index].cat=null);for(var e=!1,a=0;a<12;a++){var c=this.park[a].pos;if(a!=t.cat.index&&cc.Intersection.pointInPolygon(t.pos,[c.add(n[0]),c.add(n[1]),c.add(n[2]),c.add(n[3])])){if(e=!0,this.park[a].cat)return void(t.cat.catid<29&&this.park[a].cat.catid==t.cat.catid&&!this.park[a].cat.b_isRunning?(this.park[t.cat.index].cat=null,t.cat.merge(),this.park[a].cat.upgrade(),t.cat.catid!=gg.userData.level||gg.isXinShou||(gg.userData.level=t.cat.catid+1,this.scheduleOnce(function(){cc.find("Canvas/panel/unlockcat/icon").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("cats/"+(gg.userData.level+1)+".png",cc.SpriteFrame),i.onOpenDialog(null,"unlockcat")},.3))):(t.cat.replace(),t.cat.catid>=29&&this.park[a].cat.catid==t.cat.catid&&gg.showTip("\u5df2\u8fbe\u6700\u9ad8\u7b49\u7ea7.")));this.park[t.cat.index].cat=null,t.cat.index=a,t.cat.parkpos=this.park[a].pos,this.park[a].cat=t.cat,gg.audioMgr.playSFX("move");break}}if(e)t.cat.replace();else if(gg.userData.running<10&&cc.Intersection.pointLineDistance(t.pos,this.runwaystart[0],this.runwaystart[1],!0)<=30){var o=gg.getFootOfPerpendicular(t.pos,this.runwaystart[0],this.runwaystart[1]);t.cat.node.setPosition(o),t.cat.run(),gg.userData.mqcoin+=gg.coin[t.cat.catid],this.showRunningCount(1),this.show_jb_mq()}else t.cat.replace()},onOpenDialog:function(t,i){"maomao"===i&&this.initMallItem();var e=cc.find("Canvas/panel/"+i);return e.active=!0,e.scale=.1,e.runAction(cc.scaleTo(.1,1).easing(cc.easeBounceOut())),e},onCloseDialog:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=i)cc.find("Canvas/panel/"+i).active=!1;else{var e=t.target.parent;cc.log(e.name),e.active=!1,"choujiang"==e.name&&(e.getChildByName("choujiang").rotation=0,e.getChildByName("choujiang").stopAllActions()),this.isShowFrank=!1}},initMallItem:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=cc.find("Canvas/panel/maomao/listbg/sv_list").getComponent(cc.ScrollView),n=cc.find("Canvas/panel/maomao/listbg/sv_list/view/content");n.removeAllChildren();for(var a=function(i){var a=cc.instantiate(t.mallItem_prefab);if(a.getChildByName("sp_icon").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("cats/"+(i+1)+".png",cc.SpriteFrame),a.active=!0,a.parent=n,i>gg.userData.level&&(a.getChildByName("sp_icon").color=cc.color(0,0,0),a.opacity=188),0==i||i+4<=gg.userData.level){var c=null,o=gg.userData.buy_coin[i],s=!1;i>5&&i>=gg.userData.level-5?(c=a.getChildByName("btn_buy_zs"),o=gg.mcgem[i-6],s=!0):c=a.getChildByName("btn_buy"),c.active=!0,c.getChildByName("num").getComponent(cc.Label).string=gg.getNumString(o,3);var h=o;c.on("touchstart",function(){if(s){if(gg.userData.gem<h)return void gg.showTip("\u94bb\u77f3\u6570\u91cf\u4e0d\u8db3");gg.userData.gem-=h,this.onBuycat(null,i,0),this.show_gem()}else this.onBuycat(null,i,h);this.initMallItem(e.getScrollOffset())},t)}else{var r=a.getChildByName("lockbut");if(r.active=!0,i<26){var g=r.getChildByName("icon").getComponent(cc.Sprite);g.spriteFrame=cc.loader.getRes("cats/"+(i+5)+".png",cc.SpriteFrame),g.node.color=cc.color(0,0,0),r.getChildByName("level").getComponent(cc.Label).string=i+5}else r.getChildByName("level").getComponent(cc.Label).string="?"}},c=0;c<30;c++)a(c);i&&e.scrollToOffset(i)},showRunningCount:function(t){gg.userData.running>=10&&t>0||(gg.userData.running+=t,this.lbl_running.string=gg.userData.running+"/10")},onOpenChouJiang:function(){var t=gg.getMeiRiCount("cj_free");if(t.istoday)this.cj_isAD=!1,this.cj_date=t,this.onChouJiang();else{gg.getMeiRiCount("cj_video");gg.showTip("\u4eca\u5929\u7684\u62bd\u5956\u6b21\u6570\u5df2\u7528\u5b8c.")}},onChouJiang:function(){if(!(this.cj_time>0)){var t=this,i=gg.randomNum(1,100);i<=2?i=4:i<=5?i=3:i<=15?i=2:i<=30?i=1:i<=65&&(i=0),gg.cjdata=null,cc.find("Canvas/panel/choujiang/choujiang").runAction(cc.sequence(cc.rotateTo(4,7200+60*i).easing(cc.easeOut(10)),cc.callFunc(function(){var e=cc.find("Canvas/panel/choujiang/tip").getComponent(cc.Label);t.cj_date.today_count++,t.cj_isAD?(e.string="\u5269\u4f59\u514d\u8d39\u62bd\u5956 0 \u6b21,  \u89c6\u9891\u62bd\u5956 "+(3-t.cj_date.today_count)+" \u6b21",gg.setMeiRiCount("cj_video",t.cj_date)):(e.string="\u5269\u4f59\u514d\u8d39\u62bd\u5956 0 \u6b21,  \u89c6\u9891\u62bd\u5956 3 \u6b21",gg.setMeiRiCount("cj_free",t.cj_date));switch(i){case 0:gg.cjdata={type:"jb",num:1,tip:"\u79bb\u7ebf\u6536\u76ca1\u5c0f\u65f6"};break;case 1:gg.cjdata={type:"jb",num:2,tip:"\u79bb\u7ebf\u6536\u76ca2\u5c0f\u65f6"};break;case 2:gg.cjdata={type:"zs",num:8,tip:"\u94bb\u77f3*8"};break;case 3:gg.cjdata={type:"zs",num:18,tip:"\u94bb\u77f3*18"};break;case 4:gg.cjdata={type:"zs",num:88,tip:"\u94bb\u77f3*88"};break;default:gg.cjdata={type:"js",num:180,tip:"\u52a0\u901f3\u5206\u949f"}}t.onCloseDialog(null,"choujiang");var n=cc.find("Canvas/panel/choujiang_ts");n.getChildByName("icon").getChildByName(gg.cjdata.type).active=!0,n.getChildByName("tip").getComponent(cc.Label).string="\u606d\u559c\u4f60\u62bd\u5230\u4e86:"+gg.cjdata.tip,t.onOpenDialog(null,"choujiang_ts")})))}},onChouJiang_lingqu:function(){if(null!=gg.cjdata){"jb"==gg.cjdata.type?(gg.audioMgr.playSFX("addjb"),this.showLiXianShouYi(60*gg.cjdata.num*60)):"zs"==gg.cjdata.type?(gg.userData.gem+=gg.cjdata.num,this.show_gem(),gg.saveUserData("gem",gg.userData.gem)):"js"==gg.cjdata.type&&(gg.userData.jiasu_endtime?gg.userData.jiasu_endtime+=18e4:gg.userData.jiasu_endtime=Date.now()+18e4,this.js_time+=180,gg.audioMgr.playSFX("run"),this.onJiaSu(1));var t=cc.find("Canvas/panel/choujiang_ts");t.active=!1,t.getChildByName("icon").getChildByName(gg.cjdata.type).active=!1}},initworldrank:function(t){},onShowFrendRank:function(){this.isShowFrank=!0,cc.find("Canvas/panel/paihang/worldrank").active=!1,cc.find("Canvas/panel/paihang/friendrank").active=!0},onShowWorldRank:function(){this.isShowFrank=!1,cc.find("Canvas/panel/paihang/worldrank").active=!0,cc.find("Canvas/panel/paihang/friendrank").active=!1},updateFrank:function(){},update:function(t){this.show_time(t),this.isShowFrank&&(this.ShowFRank_t-=t,this.ShowFRank_t<=0&&(this.ShowFRank_t=.1,this.updateFrank()))},onMall_ZS:function(t,i){var e=[30,50,100,30,50,100],n=[360,720,1800,30,60,180],a=parseInt(i)-1;if(gg.userData.gem<e[a])gg.showmessage("\u94bb\u77f3\u4e0d\u8db3,\u70b9\u51fb\u5de6\u4e0a\u65b9\u94bb\u77f3\u52a0\u53f7\u514d\u8d39\u9886\u53d6.");else{if(gg.userData.gem-=e[a],a<3){var c=60*n[a]*1e3;this.showLiXianShouYi(c)}else{var o=60*n[a];gg.userData.jiasu_endtime?gg.userData.jiasu_endtime+=1e3*o:gg.userData.jiasu_endtime=Date.now()+1e3*o,this.js_time+=o,gg.audioMgr.playSFX("run"),this.onJiaSu(1)}this.show_gem()}this.onCloseDialog(null,"mall_zs")},onGetCoin_share:function(){this.onCloseDialog(null,"tishi")},onGotoOtherGame:function(){},changeOtherGame:function(t){if(!(gg.othergames.length<1)){var i=this.othergameID;i<0?i=gg.randomNum(0,gg.othergames.length-1):i+=1,i>=gg.othergames.length&&(i=0),null!=gg.othergames[i].sp?(this.othergamesp.spriteFrame=gg.othergames[i].sp,this.othergameID=i,gg.othergames.length>1&&null==t&&this.schedule(this.changeOtherGame,5)):this.scheduleOnce(this.changeOtherGame,1)}},onBtn_share:function(){},getLiXianShouYi:function(){for(var t=0,i=0;i<12;i++)null!=this.park[i].cat&&(t+=parseInt(gg.coin[this.park[i].cat.catid]*gg.level_times[this.park[i].cat.catid]));return t}}),cc._RF.pop()},{}],cat_start:[function(t,i,e){"use strict";cc._RF.push(i,"036a7Sm885D95rpNBTEjhbS","cat_start"),cc.Class({extends:cc.Component,properties:{},start:function(){this.othergamesp=cc.find("Canvas/othergame").getComponent(cc.Sprite),this.changeOtherGame(null),0==gg.othergames.length&&(cc.find("Canvas/othergame").active=!1)},changeOtherGame:function(t){if(!(gg.othergames.length<1)){var i=gg.randomNum(0,gg.othergames.length-1);this.othergameID=i,null!=gg.othergames[i].sp?(this.othergamesp.spriteFrame=gg.othergames[i].sp,gg.othergames.length>1&&null==t&&this.schedule(this.changeOtherGame,5)):this.scheduleOnce(this.changeOtherGame,1)}},onStartGame:function(){cc.director.loadScene("cat_main")},onGoto17kx:function(){},onGotoOtherGame:function(){if(console.log(gg.othergames),0!=gg.othergames.length)this.othergameID;else gg.showTip("\u5efa\u8bbe\u4e2d...")},onShowErWeiMa:function(){}}),cc._RF.pop()},{}],cat:[function(t,i,e){"use strict";cc._RF.push(i,"7b923PTW7VIxIpaqF2eVgDo","cat"),cc.Class({extends:cc.Component,properties:{index:0,catid:0,cat_copy:null,parkpos:null,b_isRunning:!1,wayid:0,speed:300,state:0,coin_quan:0,pb_hecheng:cc.Prefab},start:function(){},init:function(t,i,e){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.active=!0,this.parkpos=i,this.node.setPosition(i),this.index=t,this.catid=e,this.setSkin()},setSkin:function(){this.node.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("cats/"+(this.catid+1)+".png",cc.SpriteFrame),this.coin_quan=parseInt(gg.coin[this.catid]*gg.level_times[this.catid]),this.speed=3950/gg.level_times[this.catid]},copy:function(){this.cat_copy=cc.instantiate(this.node),this.cat_copy.parent=this.node.parent,this.cat_copy.setPosition(this.parkpos),this.cat_copy.active=!0,this.cat_copy.opacity=150,this.node.zIndex=999},onTouchStart:function(t){this.b_isRunning||gg.touchid>-1||(gg.sceneNode.emit("cat_touch_start",this),this.copy(),gg.touchid=this.index)},onTouchMove:function(t){if(!this.b_isRunning&&gg.touchid==this.index){var i=t.touch.getDelta();this.node.x+=i.x,this.node.y+=i.y}},onTouchEnd:function(t){this.b_isRunning||(this.node.zIndex=1,gg.sceneNode.emit("cat_touch_end",{cat:this,pos:this.node.getPosition()}))},replace:function(){gg.audioMgr.playSFX("move"),this.node.setPosition(this.parkpos),this.node.zIndex=this.index,this.cat_copy.destroy(),gg.touchid=-1},huishou:function(){this.node.destroy(),this.cat_copy&&this.cat_copy.destroy(),this.destroy(),gg.touchid=-1},merge:function(){var t=this.node.getPosition();this.cat_copy.opacity=255,this.cat_copy.zIndex=999,this.cat_copy.setPosition(t);var i=this;this.node.runAction(cc.sequence(cc.moveBy(.2,cc.v2(-150,0)).easing(cc.easeOut(2)),cc.moveBy(.2,cc.v2(150,0)).easing(cc.easeIn(3)),cc.callFunc(function(){i.node.destroy(),i.cat_copy.destroy()}))),this.cat_copy.runAction(cc.sequence(cc.moveBy(.2,cc.v2(150,0)).easing(cc.easeOut(2)),cc.moveBy(.2,cc.v2(-150,0)).easing(cc.easeIn(3))))},upgrade:function(){var t=this,i=this;this.node.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.scaleTo(.2,.8),cc.fadeTo(.2,0)),cc.callFunc(function(){gg.audioMgr.playSFX("hecheng"),i.catid++,i.setSkin(),i.node.scale=.1,i.node.opacity=255;var e=cc.instantiate(t.pb_hecheng);e.parent=t.node.parent,e.active=!0,e.zIndex=9999,e.setPosition(t.node.getPosition())}),cc.scaleTo(.2,2),cc.scaleTo(.2,1).easing(cc.easeBounceOut()),cc.callFunc(function(){gg.touchid=-1})))},run:function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("run"),i&&gg.audioMgr.playSFX("run"),this.b_isRunning=!0,this.cat_copy.on("touchstart",function(i){gg.sceneNode.emit("cat_stop",gg.coin[t.catid]),t.node.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("cats/"+(t.catid+1)+".png",cc.SpriteFrame),t.node.scaleX=1,t.node.scaleY=1,t.replace(),t.b_isRunning=!1,t.wayid=0},this),this.node.scale=.8,this.node.scaleX=e||-.8,gg.touchid=-1},update:function(t){if(this.b_isRunning){var i,e=this.node.getPosition(),n=gg.way[this.wayid],a=t*this.speed*gg.jiasu;i=Math.atan((n.y-e.y)/(n.x-e.x));var c=void 0,o=void 0,s=[0,1,2,3,4,11].indexOf(this.wayid)>=0;if(i<0&&s||i>0&&!s?(c=e.x-Math.cos(i)*a,o=e.y-Math.sin(i)*a):(c=e.x+Math.cos(i)*a,o=e.y+Math.sin(i)*a),s&&o>n.y||!s&&o<n.y)return 4==this.wayid?this.node.scaleX=.8:10==this.wayid&&(gg.sceneNode.emit("gold_add",this.coin_quan),this.node.scaleX=-.8),this.node.scaleX=-this.node.scaleX,this.wayid++,this.wayid=this.wayid>11?0:this.wayid,void this.node.setPosition(n);this.node.setPosition(cc.v2(c,o))}}}),cc._RF.pop()},{}],xinshou:[function(t,i,e){"use strict";cc._RF.push(i,"3d0c1bazbhLFpkMY4uPri9a","xinshou"),cc.Class({extends:cc.Component,properties:{target:null},onLoad:function(){this.hand=this.node.getChildByName("hand"),this.quan=this.node.getChildByName("quan"),this.mask=this.node.getChildByName("mask").getComponent(cc.Mask),this.tip=this.node.getChildByName("tip").getComponent(cc.Label),this.hand.active=!1,this.quan.active=!1,this.tip.string="",this.maskgp=this.mask._graphics,this.node.on("touchstart",this.ontouchstart,this),this.node.on("touchmove",this.ontouchmove,this),this.node.on("touchend",this.ontouchend,this),this.act=null},isInMaskShape:function(t){switch(t=this.mask.node.convertToNodeSpaceAR(t),this.act_time=0,this.masktype){case 1:return cc.Intersection.pointInPolygon(t,this.maskshape);case 2:return function(t,i,e){if(0===e)return!1;var n=i.x-t.x,a=i.y-t.y;return n*n+a*a<=e*e}(t,this.maskshape.c,this.maskshape.r);case 3:return this.maskshape.contains(t);default:return!1}},stopHandAction:function(){this.hand.stopAllActions(),this.hand.active=!1},ontouchstart:function(t){this.target.getBoundingBoxToWorld().contains(t.getLocation())&&(this.stopHandAction(),console.log("touch",this.target.name),t.target=this.target,this.target.emit("touchstart",t),this.act_time=3)},ontouchmove:function(t){this.isInMaskShape(t.getLocation())&&(console.log("move"),t.target=this.target,this.target.emit("touchmove",t),this.act_time=3)},ontouchend:function(t){this.isInMaskShape(t.getLocation())&&(this.callback&&this.callback(),cc.log("touch end"),t.target=this.target,this.target.emit("touchend",t),this.act_time=3)},mask_shape:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.masktype=1,this.maskgp.clear();for(var e=0;e<t.length;e++)t[e]=this.mask.node.convertToNodeSpaceAR(t[e]),0==e?this.maskgp.moveTo(t[0].x,t[0].y):this.maskgp.lineTo(t[e].x,t[e].y);this.maskgp.close(),this.maskgp.stroke(),this.maskgp.fill(),this.tip.node.y=t[0].y+50,this.tip.node.x=t[0].x,this.tip.string=i,this.maskshape=t},mask_circle:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.masktype=2;var n=(t=this.mask.node.convertToNodeSpaceAR(t)).x,a=t.y;this.maskgp.clear(),this.maskgp.circle(n,a,i),this.maskgp.fill(),this.tip.node.y=a+i+50,this.tip.node.x=n,this.tip.string=e,this.maskshape={c:t,r:i}},mask_rect:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.masktype=3;var a=(t=this.mask.node.convertToNodeSpaceAR(t)).x-i/2,c=t.y-e/2;this.maskgp.clear(),this.maskgp.rect(a,c,i,e),this.maskgp.fill(),this.tip.node.y=c+e+50,this.tip.node.x=a+i/2,this.tip.string=n,this.maskshape=new cc.rect(a,c,i,e)},setClick:function(t,i){this.stopHandAction(),this.target=t,this.target_rect=t.getBoundingBoxToWorld(),this.callback=i;var e=this;this.act=cc.sequence(cc.spawn(cc.scaleTo(.5,.8),cc.moveBy(.5,cc.v2(-50,50))),cc.callFunc(function(){e.quan.active=!0,e.quan.runAction(cc.spawn(cc.scaleTo(.3,2),cc.fadeTo(.3,0)))}),cc.scaleTo(.2,1),cc.delayTime(1),cc.callFunc(function(){e.hand.active=!1})),this.act_time=0},setDrag:function(t,i,e){this.stopHandAction(),this.target=t,this.target_rect=t.getBoundingBoxToWorld(),this.callback=e;var n=this;i=this.mask.node.convertToNodeSpaceAR(i),this.act=cc.sequence(cc.spawn(cc.scaleTo(.5,.8),cc.moveBy(.5,cc.v2(-50,50))),cc.callFunc(function(){n.quan.active=!0,n.quan.runAction(cc.spawn(cc.scaleTo(.3,2),cc.fadeTo(.3,0)))}),cc.delayTime(.5),cc.moveTo(.5,i),cc.scaleTo(.2,1),cc.delayTime(1),cc.callFunc(function(){n.hand.active=!1})),this.act_time=0},close:function(){this.act=null,gg.isXinShou=!1,this.node.destroy()},update:function(t){if(this.maskgp||(this.maskgp=this.mask._graphics),null!=this.act&&this.target.isValid)if(this.act_time<0){var i=this.target.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToNodeSpaceAR(i);this.quan.setPosition(e),this.quan.active=!1,this.quan.scale=.3,this.quan.opacity=255,this.hand.setPosition(cc.v2(e.x+50,e.y-50)),this.hand.active=!0,this.hand.scale=2,this.hand.runAction(this.act),this.act_time=3}else this.act_time-=t}}),cc._RF.pop()},{}]},{},["AD_loading","AudioMgr","HTTP","alert","cat","cat_loading","cat_main","cat_start","xinshou"]);