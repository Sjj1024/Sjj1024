window.__require=function t(e,i,n){function o(r,c){if(!i[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!c&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){return o(e[r][1][t]||t)},l,l.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({CustomMaterial:[function(t,e,i){"use strict";cc._RF.push(e,"cfce5sjVaJMCaopVI6IQgvZ","CustomMaterial");var n=cc.renderer.renderEngine,o=n.renderer,s=n.gfx,r=n.Material,c={"2d":o.PARAM_TEXTURE_2D,"1f":o.PARAM_FLOAT,"2f":o.PARAM_FLOAT2,"4f":o.PARAM_FLOAT4};var a=function(t){function e(e){t.call(this,!1);var i=new o.Pass(e.name);i.setDepth(!1,!1),i.setCullMode(s.CULL_NONE),i.setBlend(s.BLEND_FUNC_ADD,s.BLEND_SRC_ALPHA,s.BLEND_ONE_MINUS_SRC_ALPHA,s.BLEND_FUNC_ADD,s.BLEND_SRC_ALPHA,s.BLEND_ONE_MINUS_SRC_ALPHA);var n=new o.Technique(["transparent"],function(t){var e=[{name:"texture",type:o.PARAM_TEXTURE_2D},{name:"color",type:o.PARAM_COLOR4}];if(t){var i=!0,n=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var h=r.value;for(var l in c)h.endsWith(l)&&e.push({name:h,type:c[l]})}}catch(t){n=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw s}}}return e}(e.params),[i]);this._color={r:1,g:1,b:1,a:1},this._effect=new o.Effect([n],{color:this._color},[]),this._mainTech=n,this._texture=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={effect:{configurable:!0},texture:{configurable:!0},color:{configurable:!0}};return i.effect.get=function(){return this._effect},i.texture.get=function(){return this._texture},i.texture.set=function(t){this._texture!==t&&(this._texture=t,this._effect.setProperty("texture",t.getImpl()),this._texIds.texture=t.getId())},i.color.get=function(){return this._color},i.color.set=function(t){var e=this._color;e.r=t.r/255,e.g=t.g/255,e.b=t.b/255,e.a=t.a/255,this._effect.setProperty("color",e)},e.prototype.clone=function(){var t=new e;return t._mainTech.copy(this._mainTech),t.texture=this.texture,t.color=this.color,t.updateHash(),t},e.prototype.setParam=function(t,e){e instanceof cc.Texture2D?(this._effect.setProperty(t,e.getImpl()),this._texIds[t]=e.getId()):this._effect.setProperty(t,e)},Object.defineProperties(e.prototype,i),e}(r);e.exports=a,cc._RF.pop()},{}],GAPlugin:[function(t,e,i){"use strict";cc._RF.push(e,"ac68bTjQa1EM7O5nxg4MFV7","GAPlugin");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{key:"game key",secret:"secret key",version:"0.0.1"},start:function(){n.GAME_START.push(this.onGameStart.bind(this)),n.GAME_OVER.push(this.onGameOver.bind(this)),n.COIN_CHANGED.push(this.onCoinChanged.bind(this)),this.playTime=0,this.coin=0,this.game=cc.find("Canvas").getComponent("GameController"),this.spawner=cc.find("Camera").getComponent("spawner")},onGameStart:function(){this.playTime++,this.game.coin-this.coin>0&&(this.coin=this.game.coin)},onGameOver:function(){},onCoinChanged:function(t){t>0||(this.coin-=t)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],GameController:[function(t,e,i){"use strict";cc._RF.push(e,"767be/v4oZHrYRsZbJP/UXQ","GameController");var n=t("GameEvent"),o=5;cc.Class({extends:cc.Component,properties:{mainMenu:cc.Node,actionPhase:cc.Node,tutorial:cc.Node,coinTxt:cc.Label,scoreTxt:cc.Label,bestScoreTxt:cc.Label,lifeBar:cc.ProgressBar,subScore:cc.Label,splash:cc.Node,perfect:cc.Label},start:function(){n.GAME_OVER.push(this.onGameOver.bind(this)),n.POST_GAME.push(this.onPostGame.bind(this)),n.ENEMY_KILLED.push(this.onEnemyKilled.bind(this)),n.COIN_CHANGED.push(this.onCoinChanged.bind(this)),n.BOSS_HEALTH.push(this.onBossHealth.bind(this)),n.SPLASH.push(this.onHeadShot.bind(this)),this.bestScore=cc.sys.localStorage.getItem("bestScore")||0,this.coin=cc.sys.localStorage.getItem("coin")||0,this.coinTxt.string=this.coin,this.bestScoreTxt.string=this.bestScore,this.seq=cc.spawn(cc.moveBy(.5,0,100),cc.fadeOut(.5)),this.seq2=cc.sequence(cc.delayTime(.5),cc.spawn(cc.scaleTo(.3,1,1),cc.moveTo(.3,0,800)),cc.callFunc(this.showHealthBar.bind(this))),this.seq3=cc.sequence(cc.fadeTo(.1,200),cc.fadeOut(.5)),this.seq4=cc.spawn(cc.scaleTo(.2,1,1),cc.sequence(cc.fadeIn(.2),cc.delayTime(.5),cc.fadeOut(.3)))},onHeadShot:function(t){this.splash.runAction(this.seq3);var e=this.perfect;e.node.scale=3,t?this.combo=1:(e.string="HO\xc0N H\u1ea2O"+(this.combo>1?" x"+this.combo:""),e.node.runAction(this.seq4))},onEnemyKilled:function(t){o--,t?this.combo++:this.combo=1;var e=(t?this.combo:1)*this.boss;this.score+=e,this.scoreTxt.string=this.score,this.subScore.string="+"+e;var i=this.subScore.node;i.color=cc.color(t?"ffc800":"ffffff"),i.opacity=255,i.y=-200,i.runAction(this.seq),(i=this.lifeBar.node).active=!1,this.lifeBar.progress<.1&&(i.parent.active=!1)},showHealthBar:function(){this.lifeBar.node.active=!0},onBossHealth:function(t){if(1==t){this.boss++;var e=this.lifeBar.node.parent;e.active=!0,e.scale=2,e.y=250,e.runAction(this.seq2)}else t+=.001;this.lifeBar.progress=t},onCoinChanged:function(t){this.coin+=t,this.coinTxt.string=this.coin},play:function(){this.mainMenu.active=!1,this.actionPhase.active=!0,o>0&&(this.tutorial.active=!0,cc.director.pause()),this.score=0,this.boss=1,this.combo=1,this.scoreTxt.string="0",n.invoke("GAME_START")},hideTutorial:function(){this.tutorial.active=!1,cc.director.resume()},onGameOver:function(){this.mainMenu.active=!0,this.actionPhase.active=!1;var t=this.lifeBar.node;t.active=!1,t.parent.active=!1,n.invoke("PLAY_SOUND","ev_back_to_game"),this.score>this.bestScore&&(this.bestScore=this.score,this.bestScoreTxt.string=this.score)},onFacebookClick:function(){FB.ui({method:"share",href:"http://dndmedia.vn/myvt/vthero/index.html",quote:"I scored "+this.bestScore+" in this game. Enjoy it!!!"},function(t){cc.log(t)})},onPostGame:function(){cc.sys.localStorage.setItem("bestScore",this.bestScore),cc.sys.localStorage.setItem("coin",this.coin)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],GameEvent:[function(t,e,i){"use strict";cc._RF.push(e,"aa02422vZVIyqtBpn8Q41pR","GameEvent");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)},s=e.exports={};s.invoke=function(t,e,i){var n=this[t];for(var o in n)n[o](e,i)},s.reset=function(t){if("object"==(void 0===t?"undefined":o(t)))for(var e in t)s[t[e]]=[];else s[t]=[]},s.list=["ENEMY_KILLED","GAME_START","GAME_OVER","POST_GAME","COIN_CHANGED","BOSS_HIT","BOSS_HEALTH","SPLASH","PLAY_SOUND"],s.resetAll=function(){s.reset(s.list)},cc._RF.pop()},{}],LanguageData:[function(t,e,i){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=t("polyglot.min"),o=null;window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=function(t){return window.i18n.languages[t]}(t)||{};window.i18n.curLang=t,function(t){t&&(o?o.replace(t):o=new n({phrases:t,allowMissing:!0}))}(e),this.inst=o}},t:function(t,e){if(o)return o.t(t,e)},inst:o,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],i=0;i<t.length;++i){var n=t[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,n)}for(var o=0;o<e.length;++o){var s=e[o];s.node.active&&s.updateLabel()}for(var r=[],c=0;c<t.length;++c){var a=t[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(r,a)}for(var h=0;h<r.length;++h){var l=r[h];l.node.active&&l.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabel:[function(t,e,i){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,i){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MaterialLoader:[function(t,e,i){"use strict";cc._RF.push(e,"767daFU9llBPaKEknLq7owf","MaterialLoader");var n=t("CustomMaterial");cc.Class({extends:cc.Component,properties:{effect:"blend"},init:function(e){return this.target=this.node.getComponent(cc.RenderComponent),this.shader=t(e),this.material=new n(this.shader),this.targetMaterial=this.target._spriteMaterial||this.target.getMaterial(),this.material},onDisable:function(){this.target._spriteMaterial=this.targetMaterial,this.target._activateMaterial(!0)},onEnable:function(){var t=this.material||this.init(this.effect);t.color=this.node.color,t.texture=this.targetMaterial.texture,this.shader.start&&this.shader.start(t);var e=this.target;e._spriteMaterial?e._spriteMaterial=t:e._material=t,e._activateMaterial(!0),!this.shader.update&&(this.update=void 0)},set:function(t,e){this.shader.set&&this.shader.set(this.material,t,e)},update:function(t){this.shader.update(this.material,t)&&(this.enabled=!1)}}),cc._RF.pop()},{CustomMaterial:"CustomMaterial"}],PlayerController:[function(t,e,i){"use strict";cc._RF.push(e,"797ebBfgKNIIbtZ5k4ot0MI","PlayerController");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{gun:cc.Node,gunFire:cc.Node,deltaSpeed:2,minSpeed:30,maxSpeed:40,min:45,max:90,bullet:cc.Prefab,matLoader:t("MaterialLoader"),particle:cc.ParticleSystem,armor:cc.Node},onLoad:function(){this.enemy=cc.find("enemy").getComponent("enemy"),this.bulletPos=this.gun.children[0],this.bulletPool=cc.find("bulletPool"),this.count=1,this.armor.active=!1,this.seq=cc.sequence(cc.fadeTo(.05,200),cc.fadeOut(.05)),this.seq2=cc.sequence(cc.spawn(cc.rotateBy(.5,-1e3),cc.jumpTo(.5,cc.v2(-100,-500),500,1)),cc.callFunc(this.onRevive.bind(this))),this.anim=this.node.getComponentInChildren("body")},start:function(){n.GAME_START.push(this.onGameStart.bind(this)),n.BOSS_HEALTH.push(this.setRot.bind(this))},setRot:function(t){if(1==t){var e=this.minSpeed+this.deltaSpeed*this.boss;this.boss++,e>this.maxSpeed&&(e=this.maxSpeed),this.rot=e}},reset:function(){var t=this.node;this.fireCount=1,this.enabled=!1,this.matLoader.set(0),this.bulletPos.active=!1,t.setPosition(200,0),t.rotation=0,t.scaleX=1,this.gun.rotation=this.max,this.boss=0,this.setRot(1)},onGameStart:function(){},up:function(t){n.invoke("PLAY_SOUND","ev_reload_4"),this.anim.enabled=!0;var e=t.getFootPos(),i=t.getEnemyPos();this.node.runAction(cc.sequence(cc.moveTo(.3,e),cc.jumpTo(.1*t.c,i,50,t.c),cc.jumpTo(.1,cc.v2(this.node.scaleX<0?200:900,i.y),50,1),cc.callFunc(this.onFaceBack.bind(this))))},onFaceBack:function(){this.gun.rotation=this.max,this.rot=Math.abs(this.rot),this.fireCount=0,this.node.scaleX*=-1,this.bulletPos.active=!0,this.enabled=!0,this.particle.resetSystem(),n.invoke("PLAY_SOUND","ev_foot_boss_land"),this.anim.enabled=!1},fire:function(){this.bulletPos.active=!1,this.matLoader.set(0),!this.fireCount&&(this.fireCount=5*this.count)},update:function(t){var e=this.fireCount;if(e>1){if(e%5==0){var i=this.bulletPool.children,o=null,s=!0,r=!1,c=void 0;try{for(var a,h=i[Symbol.iterator]();!(s=(a=h.next()).done);s=!0){var l=a.value;!l.active&&(o=l)}}catch(t){r=!0,c=t}finally{try{!s&&h.return&&h.return()}finally{if(r)throw c}}o||((o=cc.instantiate(this.bullet)).parent=this.bulletPool);var u=this.gun.rotation;o.getComponent("bullet").set(this.gun.convertToWorldSpaceAR(this.bulletPos),this.node.scaleX>0?u-90:270-u,1/this.count,this.enemy),this.rot*=-1,n.invoke("PLAY_SOUND","ev_gun_4"),u*=Math.PI/180;var p=cc.v2(-20*Math.sin(u),-20*Math.cos(u));this.gun.runAction(cc.sequence(cc.moveBy(.05,p),cc.moveTo(.05,this.gun))),this.gunFire.runAction(this.seq)}this.fireCount--}else if(!e){var d=this.gun.rotation;(d-=t*this.rot)>this.max&&(this.rot=Math.abs(this.rot)),d<this.min&&(this.rot=-Math.abs(this.rot)),this.matLoader.set((this.max-d)/(this.max-this.min)),this.gun.rotation=d}},kill:function(){if(n.invoke("SPLASH",this),this.armor.active)return this.armor.runAction(this.seq2),void n.invoke("PLAY_SOUND","ev_armor_hit");n.invoke("PLAY_SOUND","ev_hit_head");var t=this.node.scaleX,e=cc.sequence(cc.spawn(cc.rotateBy(.5,1e3*-t),cc.jumpTo(.5,cc.v2(this.node.x,this.node.y-500),500,1)),cc.callFunc(this.onFinish.bind(this)));this.node.runAction(e)},onRevive:function(){var t=this.armor;t.active=!1,t.rotation=0,t.setPosition(0,80),this.gun.rotation=this.max,this.rot=Math.abs(this.rot),this.fireCount=0,this.bulletPos.active=!0,this.enemy.enabled=!0},onFinish:function(){n.invoke("GAME_OVER"),n.invoke("POST_GAME")}}),cc._RF.pop()},{GameEvent:"GameEvent",MaterialLoader:"MaterialLoader"}],SoundController:[function(t,e,i){"use strict";cc._RF.push(e,"201acJffCdCbqeCjGpKs/wV","SoundController");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{clips:{type:cc.AudioClip,default:[]}},start:function(){this.audio=new cc.Audio,this.audio.setLoop(!1),this.audio.setVolume(1),n.PLAY_SOUND.push(this.play.bind(this))},play:function(t){var e=this.audio;e.stop(),e.src=this.clips.find(function(e){return e.name==t}),e.setCurrentTime(0),e.play()}}),cc._RF.pop()},{GameEvent:"GameEvent"}],SpriteFrameSet:[function(t,e,i){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=n,cc._RF.pop()},{}],armorBtn:[function(t,e,i){"use strict";cc._RF.push(e,"4724c6FU4lDF4o4tk61f8K0","armorBtn");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{price:10},start:function(){this.armor=cc.find("player").getComponent("PlayerController").armor,n.COIN_CHANGED.push(this.onCoinChanged.bind(this)),n.GAME_OVER.push(this.onGameOver.bind(this)),this.btn=this.node.getComponent(cc.Button),this.node.getComponentInChildren(cc.Label).string=this.price,this.coin=0,this.onCoinChanged(0)},onCoinChanged:function(t){this.coin+=t;var e=this.coin>=this.price&&!this.armor.active;this.btn.interactable=e},onGameOver:function(){this.onCoinChanged(0)},onBuyArmor:function(){this.coin<this.price||(this.armor.active=!0,this.armor.getComponentInChildren(cc.ParticleSystem).resetSystem(),n.invoke("COIN_CHANGED",-this.price),n.invoke("PLAY_SOUND","ev_armor_equip"))}}),cc._RF.pop()},{GameEvent:"GameEvent"}],blend:[function(t,e,i){"use strict";cc._RF.push(e,"3a037kF7RxKB7Ms1qOIzugi","blend");var n={name:"blend",vert:"\n    uniform mat4 viewProj;\n    uniform mat4 model;\n    attribute vec3 a_position;\n    attribute vec2 a_uv0;\n    varying vec2 uv0;\n    \n    void main () {\n        mat4 mvp;\n        mvp = viewProj * model;\n        vec4 pos = mvp * vec4(a_position, 1);\n        gl_Position = pos;\n        uv0 = a_uv0;\n    }",frag:"\n    uniform sampler2D texture;\n    uniform vec4 color;\n    uniform float a1f;\n    varying vec2 uv0;\n\n    void main () {\n        vec2 uv = uv0 - 0.5;\n        float r = uv.x * uv.x + uv.y * uv.y;\n        float a = texture2D(texture, uv0).a + 0.001;\n        a = step(a, a1f) * step(r, 0.23);\n        gl_FragColor = vec4(color.rgb, 0.23 * a);\n    }",params:["a1f"],set:function(t,e){t.setParam("a1f",.13*e)}};cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.renderer._forward._programLib.define(n.name,n.vert,n.frag,[])}),e.exports=n,cc._RF.pop()},{}],body:[function(t,e,i){"use strict";cc._RF.push(e,"698b6cbh+tB35+zO2XoCU0g","body"),cc.Class({extends:cc.Component,properties:{interval:.1,sprites:[cc.SpriteFrame]},start:function(){this.sprite=this.node.getComponent(cc.Sprite),this.onDisable()},onDisable:function(){this.timer=0,this.id=0,this.sprite.spriteFrame=this.sprites[this.id++]},update:function(t){var e=this.timer-t;if(e<0){var i=this.id;this.sprite.spriteFrame=this.sprites[i++],i==this.sprites.length&&(i=0),this.id=i,e=this.interval}this.timer=e}}),cc._RF.pop()},{}],bullet:[function(t,e,i){"use strict";cc._RF.push(e,"8009fpudvJB25do++lYPPv7","bullet");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{speed:100,bullet:cc.SpriteFrame,glow:cc.SpriteFrame},start:function(){var t=cc.sequence(cc.fadeOut(.3),cc.callFunc(this.onFinish.bind(this)));this.seq=cc.spawn(cc.scaleTo(.3,2),t),this.sprite=this.node.getComponent(cc.Sprite)},onFinish:function(){var t=this.node;t.active=!1,t.opacity=255,t.setScale(1),this.sprite.spriteFrame=this.bullet,this.target.checkAlive()},set:function(t,e,i,n){var o=this.node;o.rotation=e+180,e*=Math.PI/180,this.vx=Math.cos(e)*this.speed*i,this.vy=-Math.sin(e)*this.speed*i,this.target=n,o.setPosition(t),o.color=cc.Color.WHITE,o.active=!0,this.enabled=!0},onHit:function(t){var e=this.node;this.enabled=!1,this.sprite.spriteFrame=this.glow,e.runAction(this.seq),t.kill()},aimPlayer:function(t,e,i){var o=this.node;this.enabled=!1,o.active=!0,o.setPosition(t);var s=cc.sequence(cc.moveTo(.1,e),cc.callFunc(this.onHit.bind(this,i)));o.runAction(s),n.invoke("PLAY_SOUND","ev_gun_4")},update:function(t){var e=this.node,i=e.getPosition(),n=cc.v2(i);n.x+=this.vx*t,n.y+=this.vy*t;var o=this.target,s=o.stair.check(i,cc.v2(n));s?this.onFinish():((s=o.check(i,cc.v2(n)))?(e.setPosition(s),this.onHit(o)):e.setPosition(n),(i.x<0||i.x>1100)&&this.onFinish())}}),cc._RF.pop()},{GameEvent:"GameEvent"}],coin:[function(t,e,i){"use strict";cc._RF.push(e,"defc46zd3RL+LOGuP76wzsl","coin");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{delay:2,speed:1},start:function(){n.GAME_OVER.push(this.onGameOver.bind(this))},onGameOver:function(){var t=this.node;t.active&&(t.active=!1,n.invoke("COIN_CHANGED",1))},set:function(t,e){var i=this.node;i.setPosition(t.node),this.target=e,i.active=!0;var n=t.stair.getCoinPos(),o=t.node.scaleX;n.x+=200*Math.random()*o,i.runAction(cc.sequence(cc.jumpTo(.3*this.delay,n,150+100*Math.random(),1),cc.moveBy(.7*this.delay,250*(Math.random()+.3)*o,0))),this.time=.3*-Math.random()},update:function(t){var e=this.time;if((e+=t)>this.delay){var i=this.node,o=this.target,s=cc.v2(o.x-i.x,o.y-i.y).normalize(),r=this.speed*t;i.x+=s.x*r,i.y+=s.y*r,Math.abs(i.x-o.x)<10&&(i.active=!1,n.invoke("COIN_CHANGED",1),n.invoke("PLAY_SOUND","ev_coin"))}this.time=e}}),cc._RF.pop()},{GameEvent:"GameEvent"}],enemy:[function(t,e,i){"use strict";cc._RF.push(e,"58f6cKWDqJCKK+9yUkr5Al4","enemy");var n=t("GameEvent"),o=[{x:50,y:60,z:70,w:50},{x:40,y:90,z:40,w:30},{x:90,y:60,z:80,w:50}],s=["00ffff","ff00ff","ff0000","0000ff","00ff00"];cc.Class({extends:cc.Component,properties:{gun:cc.Node,gunFire:cc.Node,coin:cc.Prefab,particle:cc.Prefab,text:cc.Label,landParticle:cc.ParticleSystem},onLoad:function(){this.bulletPos=this.gun.children[0],this.teleport=cc.find("teleport_light_0"),this.bulletPool=cc.find("bulletPool"),this.coinPool=cc.find("coinPool"),this.particlePool=cc.find("particlePool"),this.player=cc.find("player").getComponent("PlayerController"),this.seq=cc.sequence(cc.delayTime(.4),cc.fadeTo(.05,200),cc.fadeOut(.05)),this.seq2=cc.spawn(cc.moveBy(.5,0,100),cc.fadeOut(.5))},boss:function(t){this.maxHealth=t?3+Math.floor(3*Math.random()):1;var e=this.node.children,i=e[t?2:1];i.active=!0,(i=e[t?1:2]).active=!1,n.invoke("BOSS_HEALTH",t?1:0)},reset:function(){var t=this.node;t.setPosition(-1e3,0),t.rotation=0,t.scaleX=1,this.gun.rotation=90},onFinish:function(){this.node.rotation=0,this.node.scaleX*=-1,n.invoke("ENEMY_KILLED",this.isHeadShot)},onBossLand:function(){this.landParticle.resetSystem(),n.invoke("PLAY_SOUND","ev_boss_appear_land")},set:function(t){this.stair=t,this.dead=!1,this.enabled=!0,this.health=this.maxHealth,this.isHeadShot=!1;var e=t.getEnemyPos(),i=this.node;if(this.maxHealth>1){n.invoke("PLAY_SOUND","ev_boss_appear_spin"),i.setPosition(e.x>540?1200:-100,e.y+200);var s=cc.spawn(cc.jumpTo(.7,e,300,1),cc.rotateBy(.7,360*i.scaleX));i.runAction(s);var r=this.teleport;r.setPosition(e.x>540?1400:-300,e.y+200),r.scaleX=-i.scaleX,r.runAction(cc.sequence(cc.moveTo(.1,e.x>540?1080:0,e.y+200),cc.delayTime(.7),cc.callFunc(this.onBossLand.bind(this)),cc.moveTo(.1,r)))}else{var c=Math.floor(Math.random()*o.length);i.setPosition(e.x>540?1200:-100,e.y),0==c&&i.runAction(cc.moveTo(.3,e)),1==c&&i.runAction(cc.jumpTo(.3,e,50,1)),2==c&&i.runAction(cc.jumpTo(.5,e,20,5))}},updateColor:function(){var t=this.node,e=Math.floor(Math.random()*s.length);t.color=cc.color(s[e]),e=Math.floor(Math.random()*o.length);var i=o[e];return t.setContentSize(i.x,i.y),(t=this.node.children[0]).setContentSize(i.z,i.w),t.y=i.y,e},up:function(t){this.stair=t,this.dead=!1,this.enabled=!0,this.isHeadShot=!1;var e=t.getFootPos(),i=t.getEnemyPos();this.node.runAction(cc.sequence(cc.moveTo(.2,e),cc.jumpTo(.1*t.c,i,50,t.c),cc.callFunc(this.onFaceBack.bind(this))))},onFaceBack:function(){this.node.scaleX*=-1,n.invoke("PLAY_SOUND","ev_foot_boss_land")},swap:function(t,e){var i=t.x;t.x=e.x,e.x=i,i=t.y,t.y=e.y,e.y=i},check:function(t,e){var i=this.node,o=i.getBoundingBox(),s=cc.v2(),r=!0;if(i.scaleX<0?(e.x<o.xMin||t.x>o.xMax||t.y>o.yMax)&&(r=!1):(e.x>o.xMax||t.x<o.xMin||t.y>o.yMax)&&(r=!1),r)for(var c=0;c<1;c+=.1)if(s.x=t.x+(e.x-t.x)*c,s.y=t.y+(e.y-t.y)*c,o.contains(s))return n.invoke("PLAY_SOUND","ev_hit_torso"),s;if(o=i.children[0].getBoundingBoxToWorld(),r=!0,i.scaleX<0?(e.x<o.xMin||t.x>o.xMax||t.y>o.yMax)&&(r=!1):(e.x>o.xMax||t.x<o.xMin||t.y>o.yMax)&&(r=!1),r)for(var a=0;a<1;a+=.1)if(s.x=t.x+(e.x-t.x)*a,s.y=t.y+(e.y-t.y)*a,o.contains(s))return this.isHeadShot=!0,this.spawnParticle(20*(Math.random()+.5)),n.invoke("SPLASH"),n.invoke("PLAY_SOUND","ev_hit_head"),s},checkAlive:function(){if(!(this.health<1)&&this.enabled)if(this.enabled=!1,this.dead)n.invoke("BOSS_HIT",this.isHeadShot);else{var t=this.bulletPool.children,e=null,i=!0,o=!1,s=void 0;try{for(var r,c=t[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var a=r.value;!a.active&&(e=a.getComponent("bullet"))}}catch(t){o=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}var h=this.player.node,l=h.convertToWorldSpaceAR(h.children[0]),u=this.gun.convertToWorldSpaceAR(this.bulletPool),p=cc.v2(l.x-u.x,l.y-u.y);e.node.rotation=180*Math.atan2(p.y,-p.x)/Math.PI;var d=270+180*Math.atan2(p.y,-p.x*this.node.scaleX)/Math.PI;(h=this.gun).rotation=d,u=this.gun.convertToWorldSpaceAR(this.bulletPos),h.rotation=90;var f=d-h.rotation;d*=Math.PI/180,p=cc.v2(-20*Math.sin(d),-20*Math.cos(d));var v=cc.sequence(cc.rotateBy(.3,f),cc.delayTime(.1),cc.callFunc(e.aimPlayer.bind(e,u,l,this.player)),cc.moveBy(.05,p),cc.moveTo(.05,h),cc.rotateBy(.2,-f));this.gunFire.runAction(this.seq),h.runAction(v)}},spawnCoin:function(t){for(var e=this.coinPool.children;t-- >0;){var i=null,n=!0,o=!1,s=void 0;try{for(var r,c=e[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var a=r.value;!a.active&&(i=a)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}i||((i=cc.instantiate(this.coin)).parent=this.coinPool),i.getComponent("coin").set(this,this.player.node)}},spawnParticle:function(t){for(var e=this.particlePool.children;t-- >0;){var i=null,n=!0,o=!1,s=void 0;try{for(var r,c=e[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var a=r.value;!a.active&&(i=a)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}i||((i=cc.instantiate(this.particle)).parent=this.particlePool),i.getComponent("particle").set(this)}},kill:function(){var t=this.node,e=this.isHeadShot?2:1;if(this.health-=e,this.maxHealth>1&&(t.runAction(cc.sequence(cc.moveBy(.05,-30*t.scaleX,0),cc.moveTo(.1,t))),n.invoke("BOSS_HEALTH",this.health/this.maxHealth)),this.dead=!0,this.health>0){var i=this.text.node;return i.y=90,i.scaleX=t.scaleX,i.opacity=255,i.color=cc.color(this.isHeadShot?"ffc800":"ffffff"),this.text.string=-e,void i.runAction(this.seq2)}var o=t.scaleX,s=cc.sequence(cc.spawn(cc.rotateBy(.5,1e3*-o),cc.jumpTo(.5,cc.v2(o<0?1300:-100,t.y-500),500,1)),cc.callFunc(this.onFinish.bind(this)));t.runAction(s),(this.isHeadShot||this.maxHealth>1)&&this.spawnCoin(this.maxHealth)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],particle:[function(t,e,i){"use strict";cc._RF.push(e,"887daf/BktBhqZhyhZUoju9","particle");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{delay:2},start:function(){n.GAME_OVER.push(this.onGameOver.bind(this))},onGameOver:function(){this.node.active=!1},set:function(t){var e=this.node;e.setPosition(t.node),e.opacity=255,e.active=!0;var i=t.stair.getCoinPos(),n=t.node.scaleX;i.x+=500*Math.random()*n,e.runAction(cc.sequence(cc.jumpTo(this.delay*(.1*Math.random()+.25),i,150+500*Math.random(),1),cc.moveBy(this.delay*(Math.random()+.3),300*(Math.random()+.1)*n,0))),this.time=Math.random()+.3},update:function(t){var e=this.time;if((e+=t)>this.delay){var i=this.node;i.opacity--,i.opacity<=0&&(i.active=!1)}this.time=e}}),cc._RF.pop()},{GameEvent:"GameEvent"}],"polyglot.min":[function(t,e,i){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=e.exports={},s=e,r="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)};(function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==(void 0===o?"undefined":r(o))?s.exports=e(t):t.Polyglot=e(t)})(void 0,function(t){function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||n}function i(t,e,i){var n;return null!=i&&t?function(t){return t.replace(/^\s+|\s+$/g,"")}((n=t.split(o))[function(t,e){return s[function(t){var e=function(t){var e,i,n,o={};for(e in t)if(t.hasOwnProperty(e))for(n in i=t[e])o[i[n]]=e;return o}(c);return e[t]||e.en}(t)](e)}(e,i)]||n[0]):t}function n(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var i;for(var n in t)t.hasOwnProperty(n)&&(i=t[n],e&&(n=e+"."+n),"object"==(void 0===i?"undefined":r(i))?this.extend(i,n):this.phrases[n]=i)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,o;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof n&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),o=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(o=i(n,this.currentLocale,e.smart_count),e)),o},e.prototype.has=function(t){return t in this.phrases};var o="||||",s={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},c={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e}),cc._RF.pop()},{}],spawner:[function(t,e,i){"use strict";cc._RF.push(e,"092d76vWbdDjqjNrwSM8tDj","spawner");var n=t("GameEvent");cc.Class({extends:cc.Component,properties:{colors:[cc.Color],obj:cc.Prefab,count:10},onLoad:function(){n.resetAll()},reset:function(){this.player.reset(),this.enemy.reset(),this.node.y=0,this.id=0,this.prevC=2;var t=this.pos=cc.v2(0,this.player.node.y);this.color=this.colors[0];for(var e=this.stack,i=this.count,n=this.prevC,o=0;o<i;o++)n=e[o].set(t,n);this.prevC=n},start:function(){this.content=cc.director.getScene();for(var t=cc.find("player"),e=this.stack=[],i=this.content,o=this.count,s=0;s<o;s++){var r=cc.instantiate(this.obj),c=r.getComponent("stair");r.parent=i,r.scaleX=s%2?-1:1,e.push(c)}this.enemy=cc.find("enemy").getComponent("enemy"),this.player=t.getComponent("PlayerController"),this.delta=this.node.y-t.y,this.reset(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this)),n.ENEMY_KILLED.push(this.onEnemyKilled.bind(this)),n.GAME_START.push(this.onEnemyKilled.bind(this)),n.GAME_OVER.push(this.reset.bind(this)),n.BOSS_HIT.push(this.onBossHit.bind(this))},onEnemyKilled:function(){var t=this.id,e=this.stack;this.player.up(e[t]),++t>=e.length&&(t=0),this.enemy.boss(t&&t%9==0),this.enemy.set(e[t]),this.id=t},onBossHit:function(){var t=this.id,e=this.stack;this.player.up(e[t]),++t>=e.length&&(t=0),this.enemy.up(e[t]),this.id=t},onTouchStart:function(t){this.player.fire()},updateStack:function(){var t=this.stack,e=this.player.node.y,i=this.color,n=this.colors[1],o=!0,s=!1,r=void 0;try{for(var c,a=t[Symbol.iterator]();!(o=(c=a.next()).done);o=!0){var h=c.value,l=h.node.y-e;if(l<-1300)this.prevC=h.set(this.pos,this.prevC);else{var u=i.lerp(n,l/1300);h.updateColor(u)}}}catch(t){s=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(s)throw r}}},update:function(t){var e=this.player.node.y+this.delta,i=this.node;i.y<e&&(i.y=.5*(i.y+e),this.updateStack())}}),cc._RF.pop()},{GameEvent:"GameEvent"}],stair:[function(t,e,i){"use strict";cc._RF.push(e,"5f303zPbt1LLLIgPSVH+cdL","stair");var n=[0];cc.Class({extends:cc.Component,properties:{decoration:cc.Sprite,decoList:[cc.SpriteFrame],patterns:[cc.Node]},onLoad:function(){var t=this.node.children;this.stair=t[1],this.wall=t[0],this.pixel=t[2].children[0]},fillBag:function(t){for(var e=this.decoList.length,i=e,o=Math.floor(Math.random()*e);i--;){for(;n[o];)o+=Math.floor(Math.random()*e),o%=e;n[o]=i}n[e-1]==t&&(n[e-1]=n[1],n[1]=t),n.length=e},set:function(t,e){var i=this.node;if(Math.random()>.4)this.decoration.spriteFrame=null;else{var o=n.pop();!n.length&&this.fillBag(o),this.decoration.spriteFrame=this.decoList[o]}for(var s=this.patterns,r=Math.floor(Math.random()*(s.length-1)),c=0;c<s.length-1;c++)s[c].active=c==r;this.c=e;var a=5-Math.floor(Math.random()*(7-e)),h=50*e,l=cc.v2(50*a,h-this.stair.height);return this.pixel.width=1019+l.x-h,this.stair.setPosition(l),this.wall.setPosition(l),i.setPosition(540,t.y),i.setSiblingIndex(0),t.y+=h,(e+=Math.floor(3*(Math.random()+.3)))%7+2},updateColor:function(t){var e=this.node.children,i=!0,n=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)s.value.color=t}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}e=this.patterns;var c=!0,a=!1,h=void 0;try{for(var l,u=e[Symbol.iterator]();!(c=(l=u.next()).done);c=!0)l.value.color=t}catch(t){a=!0,h=t}finally{try{!c&&u.return&&u.return()}finally{if(a)throw h}}},swap:function(t,e){var i=t.x;t.x=e.x,e.x=i,i=t.y,t.y=e.y,e.y=i},check:function(t,e){for(var i=this.node,n=this.stair.getBoundingBoxToWorld(),o=cc.v2(),s=0;s<1;s+=.1){if(o.x=t.x+(e.x-t.x)*s,o.y=t.y+(e.y-t.y)*s,o.y>n.yMax)return null;var r=Math.floor((o.y-n.yMin-12)/50);if(i.scaleX<0){if(o.x<n.xMax-50*r)return o}else if(o.x>50*r+n.xMin)return o}},getEnemyPos:function(){var t=this.stair,e=this.node;return cc.v2(t.x*e.scaleX+e.x,t.y+t.height+e.y)},getCoinPos:function(){var t=this.stair,e=this.node,i=this.c+1;return cc.v2((t.x-50*i)*e.scaleX+e.x,e.y)},getFootPos:function(){var t=this.stair,e=this.node,i=this.c+1;return cc.v2((t.x-50*i)*e.scaleX+e.x,e.y)}}),cc._RF.pop()},{}]},{},["CustomMaterial","GAPlugin","GameController","GameEvent","LanguageData","LocalizedLabel","LocalizedSprite","MaterialLoader","PlayerController","SoundController","SpriteFrameSet","armorBtn","blend","body","bullet","coin","enemy","particle","polyglot.min","spawner","stair"]);