window.__require=function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var h=a.split("/");if(h=h[h.length-1],!e[h]){var l="function"==typeof __require&&__require;if(!c&&l)return l(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+a+"'")}}var r=i[a]={exports:{}};e[a][0].call(r.exports,function(t){return o(e[a][1][t]||t)},r,r.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({Audio:[function(t,e,i){"use strict";cc._RF.push(e,"0de855O8t1Nt7hBRUObuVIs","Audio"),cc.Class({extends:cc.Component,properties:{bgmAudioID:-1},init:function(){},getUrl:function(t){return"sound/"+t},playBGM:function(t){},stopBGM:function(){},playSFX:function(t){var e=this.getUrl(t);cc.loader.loadRes(e,cc.AudioClip,function(t,e){cc.audioEngine.play(e,!1,1)})},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},playStart:function(){this.playSFX("stage_start")},playFire:function(){this.playSFX("bullet_shot")},playWall:function(){this.playSFX("bullet_hit_1")},playTuWall:function(){this.playSFX("bullet_hit_2")},playTank:function(){var t="explosion_";t+=parseInt(10*Math.random())<=5?1:2,this.playSFX(t)},playGameOver:function(){this.playSFX("game_over")},playResult:function(){this.playSFX("statistics_1")},playPowerupAppear:function(){this.playSFX("powerup_appear")},playPowerupPick:function(){this.playSFX("powerup_pick")}}),cc._RF.pop()},{}],Config:[function(t,e,i){"use strict";cc._RF.push(e,"a9e9cGqDgtP9Ymcxav1H3DE","Config"),cc.Class({extends:cc.Component,ctor:function(){this.stage={},this.initStage()},getPlayerTankValue:function(t){var e={};return t>4&&(t=4),1==t?(e.moveSpeed=1.5,e.fireSpeed=3,e.live=1):2==t?(e.moveSpeed=1.7,e.fireSpeed=3.8,e.live=1):3==t?(e.moveSpeed=1.9,e.fireSpeed=4.8,e.live=1):4==t&&(e.moveSpeed=2.1,e.fireSpeed=5.3,e.live=1),e},getEnemyTankValue:function(t){var e={};return 1==t?(e.fireSpeed=2.5,e.moveSpeed=1,e.live=1):2==t?(e.fireSpeed=2.5,e.moveSpeed=1.5,e.live=1):3==t?(e.fireSpeed=3,e.moveSpeed=1,e.live=1):4==t&&(e.fireSpeed=2.5,e.moveSpeed=1,e.live=3),e},initStage:function(){this.stage.stage_1=function(){return{enemy:{tank_1:18,tank_2:2,tank_3:0,tank_4:0},hong:parseInt(3*Math.random())+2}},this.stage.stage_2=function(){return{enemy:{tank_1:16,tank_2:2,tank_3:2,tank_4:0},hong:parseInt(3*Math.random())+2}},this.stage.stage_3=function(){return{enemy:{tank_1:15,tank_2:2,tank_3:2,tank_4:1},hong:parseInt(3*Math.random())+2}},this.stage.stage_4=function(){return{enemy:{tank_1:13,tank_2:3,tank_3:3,tank_4:1},hong:parseInt(3*Math.random())+2}},this.stage.stage_5=function(){return{enemy:{tank_1:12,tank_2:4,tank_3:3,tank_4:1},hong:parseInt(3*Math.random())+2}},this.stage.stage_6=function(){return{enemy:{tank_1:11,tank_2:4,tank_3:4,tank_4:1},hong:parseInt(3*Math.random())+2}},this.stage.stage_7=function(){return{enemy:{tank_1:10,tank_2:4,tank_3:4,tank_4:2},hong:parseInt(3*Math.random())+2}},this.stage.stage_8=function(){return{enemy:{tank_1:9,tank_2:4,tank_3:5,tank_4:2},hong:parseInt(3*Math.random())+2}},this.stage.stage_9=function(){return{enemy:{tank_1:8,tank_2:5,tank_3:5,tank_4:2},hong:parseInt(3*Math.random())+2}},this.stage.stage_10=function(){return{enemy:{tank_1:7,tank_2:6,tank_3:5,tank_4:2},hong:parseInt(3*Math.random())+2}},this.stage.stage_11=function(){return{enemy:{tank_1:6,tank_2:6,tank_3:6,tank_4:2},hong:parseInt(3*Math.random())+2}},this.stage.stage_12=function(){return{enemy:{tank_1:5,tank_2:6,tank_3:6,tank_4:3},hong:parseInt(3*Math.random())+2}},this.stage.stage_13=function(){return{enemy:{tank_1:4,tank_2:6,tank_3:6,tank_4:4},hong:parseInt(3*Math.random())+2}},this.stage.stage_14=function(){return{enemy:{tank_1:4,tank_2:5,tank_3:6,tank_4:5},hong:parseInt(3*Math.random())+2}},this.stage.stage_15=function(){return{enemy:{tank_1:5,tank_2:4,tank_3:6,tank_4:5},hong:parseInt(3*Math.random())+2}},this.stage.stage_16=function(){return{enemy:{tank_1:4,tank_2:5,tank_3:6,tank_4:5},hong:parseInt(3*Math.random())+2}},this.stage.stage_17=function(){return{enemy:{tank_1:4,tank_2:6,tank_3:5,tank_4:5},hong:parseInt(3*Math.random())+2}},this.stage.stage_18=function(){return{enemy:{tank_1:3,tank_2:6,tank_3:6,tank_4:5},hong:parseInt(3*Math.random())+2}},this.stage.stage_19=function(){return{enemy:{tank_1:2,tank_2:6,tank_3:6,tank_4:6},hong:parseInt(3*Math.random())+2}},this.stage.stage_20=function(){return{enemy:{tank_1:3,tank_2:5,tank_3:6,tank_4:6},hong:parseInt(3*Math.random())+2}}}}),cc._RF.pop()},{}],Enum:[function(t,e,i){"use strict";cc._RF.push(e,"aa62dA9PNtPeaiGEo4vIetV","Enum");var n=cc.Enum({Single1:1,Single2:2,Single3:3,Single4:4}),o=cc.Enum({type1:1,type2:2,type3:3,type4:4,type5:5}),s=cc.Enum({zhalei:1,maozi:2,tieqiao:3,star:4,tank:5,dinglei:6});cc.Class({extends:cc.Component,ctor:function(){this.Props=s,this.Single_Game_Type=n,this.Game_Type=o}}),cc._RF.pop()},{}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"ca435xLbA9KD58mH9KDL4jD","Global"),cc.Class({extends:cc.Component,ctor:function(){this.game=null,this.map=null,this.tieqiao_time=null,this.dinglei_time=null,this.enemy_count=20,this.stage_info=null,this.die_tank={tank_1:0,tank_2:0,tank_3:0,tank_4:0}},start:function(){},isGrassland:function(t){return t>=9&&t<=12||t>=37&&t<=40||t>=65&&t<=68||t>=93&&t<=96},isGoldWall:function(t){return t>=5&&t<=8||t>=33&&t<=36||t>=61&&t<=64||t>=89&&t<=92},isCobWall:function(t){return t>=1&&t<=4||t>=29&&t<=32||t>=57&&t<=60||t>=85&&t<=88},isRiver:function(t){return t>=13&&t<=20||t>=41&&t<=48||t>=69&&t<=76||t>=97&&t<=104},isHome:function(t){return t>=21&&t<=28||t>=49&&t<=56||t>=77&&t<=84||t>=105&&t<=112}}),cc._RF.pop()},{}],Tank:[function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}cc._RF.push(e,"e8abdp0/GJEy7qzWALSo5ta","Tank");var o=cc.Enum({up:0,right:1,down:2,left:3});cc.Class({extends:cc.Component,ctor:function(){this.moveSpeed=1,this.fireSpeed=2.5,this.stopAttack=!1,this.onGuard=!1,this.isBlocked=!0,this.canMove=!0,this.adjustErr=2.5,this.is_fire=!1,this.is_enemy=!1,this.live=1,this.is_shield=!1,this.tank_level=1,this.tank_hong=!1},onLoad:function(){this.map=cc.vv.Global.game.map.getComponent("game_map")},start:function(){this.map=cc.vv.Global.game.map.getComponent("game_map")},moveUp:function(){if(this.node.angle=-90*o.up,this.canMove){var t=this.node.getPosition(),e=this.node.getBoundingBox(),i=cc.v2(t.x,t.y+e.height/2+1);t.y+e.height/2+1>416?this.isBlocked=!0:this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/2+this.adjustErr,t.y+e.height/2+4+1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/3,t.y+e.height/2+4+1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/2-this.adjustErr,t.y+e.height/2+4+1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/3,t.y+e.height/2+4+1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(this.node.y=t.y+this.moveSpeed,this.changeSkin())))))}},moveDown:function(){if(this.node.angle=-90*o.down,this.canMove){var t=this.node.getPosition(),e=this.node.getBoundingBox(),i=cc.v2(t.x,t.y-e.height/2-1);t.y-e.height/2-1<0?this.isBlocked=!0:this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/2+this.adjustErr,t.y-e.height/2-4-1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/3,t.y-e.height/2-4-1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/2-this.adjustErr,t.y-e.height/2-4-1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/3,t.y-e.height/2-4-1),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(this.node.y=t.y-this.moveSpeed,this.changeSkin())))))}},moveLeft:function(){if(this.node.angle=-90*o.left,this.canMove){var t=this.node.getPosition(),e=this.node.getBoundingBox(),i=cc.v2(t.x-e.width/2-1,t.y);t.x-e.height/2-1<0?this.isBlocked=!0:this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/2-4-1,t.y-e.height/2+this.adjustErr),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/2-4-1,t.y-e.height/3),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/2-4-1,t.y+e.height/2-this.adjustErr),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x-e.width/2-4-1,t.y+e.height/3),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(this.node.x=t.x-this.moveSpeed,this.changeSkin())))))}},moveRight:function(){if(this.node.angle=-90*o.right,this.canMove){var t=this.node.getPosition(),e=this.node.getBoundingBox(),i=cc.v2(t.x+e.width/2+1,t.y);t.x+e.height/2+1>416?this.isBlocked=!0:this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/2+4+1,t.y-e.height/2+this.adjustErr),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/2+4+1,t.y-e.height/3),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/2+4+1,t.y+e.height/2-this.adjustErr),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(i=cc.v2(t.x+e.width/2+4+1,t.y+e.height/3),this.map.checkPoint(i)||this.map.collisionTanks(i)?this.isBlocked=!0:(this.node.x=t.x+this.moveSpeed,this.changeSkin())))))}},onFire:function(){var t=this;if(!this.is_fire){this.is_enemy||cc.vv.Audio.playFire(),this.is_fire=!0;var e=-this.node.angle/90,i={map:this.map,direction:-this.node.angle/90,speed:this.fireSpeed,is_enemy:this.is_enemy,destroy:function(){t.is_fire=!1}},n=this.node.position;0==e?n=n.add(cc.v2(0,.5*this.node.height)):1==e?n=n.add(cc.v2(.5*this.node.height,0)):2==e?n=n.sub(cc.v2(0,.5*this.node.height)):3==e&&(n=n.sub(cc.v2(.5*this.node.height,0)));var o=cc.instantiate(cc.vv.Global.game.bullet_prefab);o.position=n,o.getComponent("bullet").init(i),this.node.parent.addChild(o,-1),cc.vv.Global.game.bullet_arr.push(o)}},changeTankValue:function(){this.node.skin||(this.node.skin=0);var t=[];this.is_enemy?1==this.tank_level?this.tank_hong?t.push.apply(t,n(this.tank_hong_1)):t.push.apply(t,n(this.tank_1)):2==this.tank_level?this.tank_hong?t.push.apply(t,n(this.tank_hong_2)):t.push.apply(t,n(this.tank_2)):3==this.tank_level?this.tank_hong?t.push.apply(t,n(this.tank_hong_3)):t.push.apply(t,n(this.tank_3)):4==this.tank_level&&(this.tank_hong?t.push.apply(t,n(this.tank_hong_4)):1==this.live?t.push.apply(t,n(this.tank_4_1)):2==this.live?t.push.apply(t,n(this.tank_4_2)):3==this.live&&t.push.apply(t,n(this.tank_4_3))):1==this.tank_level?t.push.apply(t,n(this.tank_1)):2==this.tank_level?t.push.apply(t,n(this.tank_2)):3==this.tank_level?t.push.apply(t,n(this.tank_3)):4==this.tank_level&&t.push.apply(t,n(this.tank_4)),this.node.getComponent(cc.Sprite).spriteFrame=t[this.node.skin],this.is_enemy||(1==this.tank_level?(this.node.width=26,this.node.height=25):2==this.tank_level?(this.node.width=26,this.node.height=30):3==this.tank_level?(this.node.width=26,this.node.height=30):4==this.tank_level&&(this.node.width=28,this.node.height=30))},changeSkin:function(){this.node.skin||(this.node.skin=0),this.node.skin=1-this.node.skin;var t=[];this.is_enemy?1==this.tank_level?this.tank_hong?t.push.apply(t,n(this.tank_hong_1)):t.push.apply(t,n(this.tank_1)):2==this.tank_level?this.tank_hong?t.push.apply(t,n(this.tank_hong_2)):t.push.apply(t,n(this.tank_2)):3==this.tank_level?this.tank_hong?t.push.apply(t,n(this.tank_hong_3)):t.push.apply(t,n(this.tank_3)):4==this.tank_level&&(this.tank_hong?t.push.apply(t,n(this.tank_hong_4)):1==this.live?t.push.apply(t,n(this.tank_4_1)):2==this.live?t.push.apply(t,n(this.tank_4_2)):3==this.live&&t.push.apply(t,n(this.tank_4_3))):1==this.tank_level?t.push.apply(t,n(this.tank_1)):2==this.tank_level?t.push.apply(t,n(this.tank_2)):3==this.tank_level?t.push.apply(t,n(this.tank_3)):4==this.tank_level&&t.push.apply(t,n(this.tank_4)),this.node.getComponent(cc.Sprite).spriteFrame=t[this.node.skin],this.is_enemy||(1==this.tank_level?(this.node.width=26,this.node.height=25):2==this.tank_level?(this.node.width=26,this.node.height=30):3==this.tank_level?(this.node.width=26,this.node.height=30):4==this.tank_level&&(this.node.width=28,this.node.height=30))}}),cc._RF.pop()},{}],Tools:[function(t,e,i){"use strict";cc._RF.push(e,"77241KWy6BJ8J1UM4sIYOJ4","Tools"),cc.Class({extends:cc.Component,random:function(t,e){return Math.floor(Math.random()*(e-t))+t}}),cc._RF.pop()},{}],UserInfo:[function(t,e,i){"use strict";cc._RF.push(e,"ff4a84xdVJBXbpGVHnIatHq","UserInfo"),cc.Class({extends:cc.Component,ctor:function(){this.level=1,this.live=3}}),cc._RF.pop()},{}],appear:[function(t,e,i){"use strict";cc._RF.push(e,"4fcf0zoFxFMZIBBaUHIy3LA","appear"),cc.Class({extends:cc.Component,properties:{},start:function(){},init:function(t){var e=this,i=(t.is_enemy,t.callback);this.getComponent(cc.Animation).play("appear"),this.scheduleOnce(function(){i(),e.node.destroy()},1.5)},onDestroy:function(){console.log("appear destroy")}}),cc._RF.pop()},{}],bullet:[function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}cc._RF.push(e,"b97a6rOkmFBtYvPGEX5Zbg2","bullet");var o=cc.Enum({up:0,right:1,down:2,left:3});cc.Class({extends:cc.Component,properties:{},start:function(){this.collision_tuwall=!1,this.collision_wall=!1,this.collision_tank=!1},init:function(t){this.data=t,this.is_enemy=this.data.is_enemy,this.is_shield=!1,this.is_destroy=!1},moveUp:function(){this.node.angle=-90*o.up;var t=this.data.speed;this.node.y+=t,this.node.y>=416&&(this.collision_wall=!0,this.node.destroy())},moveLeft:function(){this.node.angle=-90*o.left;var t=this.data.speed;this.node.x-=t,this.node.x<=0&&(this.collision_wall=!0,this.node.destroy())},moveDown:function(){this.node.angle=-90*o.down;var t=this.data.speed;this.node.y-=t,this.node.y<=0&&(this.collision_wall=!0,this.node.destroy())},moveRight:function(){this.node.angle=-90*o.right;var t=this.data.speed;this.node.x+=t,this.node.x>=416&&(this.collision_wall=!0,this.node.destroy())},update:function(t){var e=this.data.direction,i=this.data.map;if(i){var s=this.data.is_enemy;this.is_enemy=s;var a=this.node.position,c=a.add(cc.v2(-4,0)),h=a.add(cc.v2(-12,0)),l=a.add(cc.v2(4,0)),r=a.add(cc.v2(12,0)),p=a.add(cc.v2(0,4)),d=a.add(cc.v2(0,12)),v=a.add(cc.v2(0,-4)),_=a.add(cc.v2(0,-12)),m=[];e==o.up?(this.moveUp(),m=[c,h,l,r]):e==o.left?(this.moveLeft(),m=[p,d,v,_]):e==o.down?(this.moveDown(),m=[c,h,l,r]):e==o.right&&(this.moveRight(),m=[p,d,v,_]);var u=[].concat(n(m));u.push(a);for(var g=0;g<u.length;g++){var f=i.collisionBullet(u[g],s);if(f)return f.destroy(),void this.node.destroy()}for(var y=0;y<m.length;y++)if(s){var k=i.collisionBulletAndPlayerTanks(m[y]);if(k)return this.is_shield=k.is_shield,k.is_shield||(k.node.destroy(),this.collision_tank=!0),void this.node.destroy()}else{var b=i.collisionBulletAndEnemyTanks(m[y]);if(b&&(console.log(b.is_shield,11111),!b.is_shield)){if(b.live--,b.live<=0){var C=b.tank_level;cc.vv.Global.die_tank["tank_"+C]++,this.collision_tank=!0,b.node.destroy()}else this.collision_wall=!0;return b.tank_hong&&(console.log("\u7ea2\u5766\u514b"),i.initProps()),void this.node.destroy()}}for(var T=0;T<m.length;T++){var G=i.getTiledIdFromPos(m[T]);if(this.node.zIndex=-1,G>0)if(cc.vv.Global.isGrassland(G));else{if(cc.vv.Global.isGoldWall(G))return this.collision_wall=!0,void this.node.destroy();if(cc.vv.Global.isRiver(G))this.node.zIndex=this.node.parent.childrenCount;else if(cc.vv.Global.isHome(G))console.log("\u5bb6\u88ab\u6253\uff0c\u6e38\u620f\u7ed3\u675f"),i.bg3.node.active=!0,this.is_destroy=!0,cc.vv.Global.game.is_over=!0;else{this.is_destroy=!0;var x=i.getTiledCoordinate(m[T]);i.bg1.setTileGIDAt(0,x.x,x.y,0)}}}this.is_destroy&&(this.collision_tuwall=!0,this.node.destroy())}},onDestroy:function(){if(!this.is_shield){var t=cc.instantiate(cc.vv.Global.game.fire_flower_prefab);t.position=this.node.position,this.node.parent.addChild(t);var e={level:1,is_enemy:this.is_enemy,collision_tuwall:this.collision_tuwall,collision_wall:this.collision_wall,collision_tank:this.collision_tank};t.getComponent("fire_flower").init(e)}this.data.destroy()}}),cc._RF.pop()},{}],caozuo:[function(t,e,i){"use strict";cc._RF.push(e,"dbf8c+f4BRChL6e9aHYTeSa","caozuo"),cc.Class({extends:cc.Component,properties:{},start:function(){},onClickFire:function(){cc.vv.Global.game.player&&cc.vv.Global.game.player.onFire()}}),cc._RF.pop()},{}],direction:[function(t,e,i){"use strict";cc._RF.push(e,"a5115MVCu1KZIRXrsbU+qGb","direction");var n=cc.Enum({up:0,right:1,down:2,left:3,no:4});cc.Class({extends:cc.Component,properties:{diretion_icon:cc.Sprite,up:cc.SpriteFrame,down:cc.SpriteFrame,left:cc.SpriteFrame,right:cc.SpriteFrame,none:cc.SpriteFrame,up_icon:cc.Node,down_icon:cc.Node,left_icon:cc.Node,right_icon:cc.Node},start:function(){this.diretion_icon.spriteFrame=this.none,this.direction=n.no,this.node.parent.on(cc.Node.EventType.TOUCH_START,this.cbTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.cbTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.cbTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.cbTouchCancel,this)},cbTouchStart:function(t){this.diretion_icon.spriteFrame=this.none,this.direction=n.no;var e=t.getLocation();this.up_icon.getBoundingBoxToWorld().contains(e)?this.direction=n.up:this.down_icon.getBoundingBoxToWorld().contains(e)?this.direction=n.down:this.left_icon.getBoundingBoxToWorld().contains(e)?this.direction=n.left:this.right_icon.getBoundingBoxToWorld().contains(e)&&(this.direction=n.right)},cbTouchMove:function(t){var e=t.getLocation();this.up_icon.getBoundingBoxToWorld().contains(e)?this.direction=n.up:this.down_icon.getBoundingBoxToWorld().contains(e)?this.direction=n.down:this.left_icon.getBoundingBoxToWorld().contains(e)?this.direction=n.left:this.right_icon.getBoundingBoxToWorld().contains(e)&&(this.direction=n.right)},cbTouchEnd:function(t){this.direction=n.no,cc.vv.Global.game.player_direction=n.no},cbTouchCancel:function(t){this.direction=n.no,cc.vv.Global.game.player_direction=n.no},update:function(){this.direction==n.no?this.diretion_icon.spriteFrame=this.none:this.direction==n.up?(this.diretion_icon.spriteFrame=this.up,cc.vv.Global.game.player_direction=n.up):this.direction==n.down?(this.diretion_icon.spriteFrame=this.down,cc.vv.Global.game.player_direction=n.down):this.direction==n.left?(this.diretion_icon.spriteFrame=this.left,cc.vv.Global.game.player_direction=n.left):this.direction==n.right&&(this.diretion_icon.spriteFrame=this.right,cc.vv.Global.game.player_direction=n.right)}}),cc._RF.pop()},{}],enemy_tank:[function(t,e,i){"use strict";cc._RF.push(e,"492c3p9P+dMD4ghf4lXCLvE","enemy_tank");var n=t("Tank"),o=cc.Enum({up:0,right:1,down:2,left:3});cc.Class({extends:n,properties:{tank_1:[cc.SpriteFrame],tank_hong_1:[cc.SpriteFrame],tank_2:[cc.SpriteFrame],tank_hong_2:[cc.SpriteFrame],tank_3:[cc.SpriteFrame],tank_hong_3:[cc.SpriteFrame],tank_4_1:[cc.SpriteFrame],tank_4_2:[cc.SpriteFrame],tank_4_3:[cc.SpriteFrame],tank_hong_4:[cc.SpriteFrame]},start:function(){this.map=cc.vv.Global.game.map.getComponent("game_map"),this._super(),this.is_enemy=!0,this.fireSpeed=2.5;for(var t=!0;t;){var e=parseInt(4*Math.random())+1;this.tank_level=e;var i=cc.vv.Config.getEnemyTankValue(e);if(i&&(i.fireSpeed&&(this.fireSpeed=i.fireSpeed),i.moveSpeed&&(this.moveSpeed=i.moveSpeed),i.live&&(this.live=i.live)),1==e?cc.vv.Global.stage_info.enemy.tank_1<=0||(cc.vv.Global.stage_info.enemy.tank_1--,t=!1):2==e?cc.vv.Global.stage_info.enemy.tank_2<=0||(cc.vv.Global.stage_info.enemy.tank_2--,t=!1):3==e?cc.vv.Global.stage_info.enemy.tank_3<=0||(cc.vv.Global.stage_info.enemy.tank_3--,t=!1):4==e&&(cc.vv.Global.stage_info.enemy.tank_4<=0||(cc.vv.Global.stage_info.enemy.tank_4--,t=!1)),!t){for(var n=!1,o=cc.vv.Global.game.enemy_tank_arr,s=0;s<o.length;s++){var a=o[s];if(a&&a.node&&a.node.isValid&&a.tank_hong){n=!0;break}}parseInt(10*Math.random())%4==0&&cc.vv.Global.stage_info.hong>0&&cc.vv.Global.enemy_count<13&&!n?(this.tank_hong=!0,cc.vv.Global.stage_info.hong--):this.tank_hong=!1}}this.changeTankValue()},moveUp:function(){if(!cc.vv.Global.game.is_pause&&this.map){var t=-this.node.angle/90,e=this.map.getTiledCoordinate(this.node.position);this.node.position;if(t==o.up);else if(t==o.left){0!=e.x%2&&e.x++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.down){0!=e.y%2&&e.y--;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.right){0!=e.x%2&&e.x++;var s=this.map.getPosFromTiled(e);this.node.position=s}this._super()}},moveDown:function(){if(!cc.vv.Global.game.is_pause&&this.map){var t=-this.node.angle/90,e=this.map.getTiledRoundCoordinate(this.node.position);if(t==o.up){0!=e.y%2&&e.y++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.left){0!=e.x%2&&e.x++;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.down);else if(t==o.right){0!=e.x%2&&e.x--;var s=this.map.getPosFromTiled(e);this.node.position=s}this._super()}},moveLeft:function(){if(!cc.vv.Global.game.is_pause&&this.map){var t=-this.node.angle/90,e=this.map.getTiledRoundCoordinate(this.node.position);if(t==o.up){0!=e.y%2&&e.y++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.left);else if(t==o.down){0!=e.y%2&&e.y--;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.right){0!=e.x%2&&e.x--;var s=this.map.getPosFromTiled(e);this.node.position=s}this._super()}},moveRight:function(){if(!cc.vv.Global.game.is_pause&&this.map){var t=-this.node.angle/90,e=this.map.getTiledRoundCoordinate(this.node.position);if(t==o.up){0!=e.y%2&&e.y++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.left){0!=e.x%2&&e.x++;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.down){0!=e.y%2&&e.y--;var s=this.map.getPosFromTiled(e);this.node.position=s}else o.right;this._super()}},onFire:function(){cc.vv.Global.game.is_pause||this.node&&this.node.active&&this._super()},update:function(){if(!cc.vv.Global.game.is_pause&&!cc.vv.Global.game.is_enemy_tank_pause){parseInt(600*Math.random())<10&&this.onFire();var t=-this.node.angle/90;if(t==o.up?this.moveUp():t==o.left?this.moveLeft():t==o.down?this.moveDown():t==o.right&&this.moveRight(),this.isBlocked){var e=parseInt(10*Math.random());e<2?t!=o.up&&(this.isBlocked=!1,this.moveUp()):e<4?t!=o.left&&(this.isBlocked=!1,this.moveLeft()):e<8?t!=o.down&&(this.isBlocked=!1,this.moveDown()):e<10&&t!=o.right&&(this.isBlocked=!1,this.moveRight())}}},onDestroy:function(){var t={position:this.node.position,level:this.tank_level};this.map=cc.vv.Global.game.map.getComponent("game_map"),this.map.addPoint(t),console.log("enemy tank destroy")}}),cc._RF.pop()},{Tank:"Tank"}],fire_flower:[function(t,e,i){"use strict";cc._RF.push(e,"17a04dOImlBAox21C2ou+Ra","fire_flower"),cc.Class({extends:cc.Component,properties:{},start:function(){},init:function(t){this.data=t,this.getComponent(cc.Animation).play("fire_flower_1"),this.data.collision_tuwall?this.data.is_enemy||cc.vv.Audio.playTuWall():this.data.collision_wall?this.data.is_enemy||cc.vv.Audio.playWall():this.data.collision_tank&&cc.vv.Audio.playTank()},fireEnd:function(){this.node.destroy()},onDestroy:function(){}}),cc._RF.pop()},{}],game_control:[function(t,e,i){"use strict";cc._RF.push(e,"11824pMynhAV7W8pS04qStz","game_control");var n=cc.Enum({up:0,right:1,down:2,left:3,no:4});cc.Class({extends:cc.Component,properties:{game_maps:cc.Node,direction:cc.Node,fire_btn:cc.Node,game_info:cc.Node,shield_prefab:cc.Prefab,appear_prefab:cc.Prefab,bullet_prefab:cc.Prefab,enemy_tank_prefab:cc.Prefab,player_tank_prefab:cc.Prefab,fire_flower_prefab:cc.Prefab,props_prefab:cc.Prefab,game_map_prefab:cc.Prefab,toast:cc.Prefab,game_result:cc.Prefab,game_over:cc.Prefab,game_stage:cc.Prefab,point_prefab:cc.Prefab},start:function(){cc.vv.Global.game=this,this.startGame()},startGame:function(){if(cc.vv.Global.stage_info=cc.vv.Config.stage["stage_"+cc.vv.UserInfo.level](),cc.vv.Global.die_tank={tank_1:0,tank_2:0,tank_3:0,tank_4:0},cc.vv.Global.tieqiao_time=null,cc.vv.Global.dinglei_time=null,this.is_pause=!0,this.is_over=!0,this.is_enemy_tank_pause=!1,this.is_show_over=!1,this.props=null,this.player_direction=n.no,this.enemy_index=0,this.enemy_tank_arr=[],this.bullet_arr=[],this.frame_count=0,cc.vv.Global.enemy_count=20,this.game_maps.destroyAllChildren(),this.game_map=cc.instantiate(this.game_map_prefab),this.game_maps.addChild(this.game_map),this.map=this.game_map.getComponent("game_map"),this.map.initMap(),this.player){cc.vv.UserInfo.live++;var t={moveSpeed:this.player.moveSpeed,fireSpeed:this.player.fireSpeed,tank_level:this.player.tank_level};this.player=this.map.initPlayer(t),this.player_direction=n.no}this.initView(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);var e=cc.instantiate(this.game_stage);this.node.addChild(e)},initView:function(){var t,e,i=this.game_info.getChildByName("enemys"),n=this.game_info.getChildByName("live_count"),o=this.game_info.getChildByName("level");this.game_map.width,cc.winSize.height;for(var s=0;s<i.childrenCount;s++){i.children[s].active=!1}for(var a=0;a<cc.vv.Global.enemy_count;a++){i.children[a].active=!0}t=(cc.winSize.width-this.game_map.width)/4+this.game_map.width/2,e=.25*cc.winSize.height,this.direction.position=cc.v2(-t,-e),this.fire_btn.position=cc.v2(t,-e),n.getComponent(cc.Label).string=cc.vv.UserInfo.live,o.getComponent(cc.Label).string=cc.vv.UserInfo.level},initTank:function(){if(!this.player){this.player=this.map.initPlayer(),this.player_direction=n.no}this.enemy_tank_arr.length<4&&this.enemy_tank_arr.push(this.map.initEnemy())},onClickBack:function(){cc.director.loadScene("home_scene")},checkBullet:function(){for(var t=0;t<this.bullet_arr.length;t++)this.bullet_arr[t].isValid||(this.bullet_arr.splice(t,1),t--)},checkEnemyTank:function(){for(var t=0;t<this.enemy_tank_arr.length;t++)this.enemy_tank_arr[t]&&this.enemy_tank_arr[t].node&&this.enemy_tank_arr[t].node.isValid||(this.enemy_tank_arr.splice(t,1),t--)},checkPlayerTank:function(){this.player&&this.player.node&&this.player.node.isValid||(this.player=null)},onKeyDown:function(t){if(this.player&&this.player.node&&this.player.node.isValid)switch(t.keyCode){case cc.macro.KEY.space:this.player.onFire();break;case cc.macro.KEY.a:this.player_direction=n.left;break;case cc.macro.KEY.s:this.player_direction=n.down;break;case cc.macro.KEY.d:this.player_direction=n.right;break;case cc.macro.KEY.w:this.player_direction=n.up}},onKeyUp:function(t){this.player&&this.player.node&&this.player.node.isValid&&(this.player_direction=n.no)},update:function(t){var e=this;if(!this.is_pause){if(this.frame_count++,this.initView(),this.initTank(),this.checkBullet(),this.checkEnemyTank(),this.checkPlayerTank(),cc.vv.Global.tieqiao_time){var i=(new Date).getTime();(i-cc.vv.Global.tieqiao_time)/1e3>=15?(this.map.bg2.node.active=!1,cc.vv.Global.tieqiao_time=null):(i-cc.vv.Global.tieqiao_time)/1e3>=10?this.frame_count%20==0&&(this.map.bg2.node.active=!this.map.bg2.node.active,this.map.repairHome()):this.map.bg2.node.active=!0}if(cc.vv.Global.dinglei_time)this.is_enemy_tank_pause=!0,((new Date).getTime()-cc.vv.Global.dinglei_time)/1e3>=10&&(cc.vv.Global.dinglei_time=null,this.is_enemy_tank_pause=!1);if(this.is_over&&!this.is_show_over){this.is_show_over=!0;var o=cc.instantiate(this.toast);this.node.addChild(o),o.getComponent("toast").init({text:"GAME OVER",state:1})}0==this.enemy_tank_arr.length&&cc.vv.Global.enemy_count<=0&&!this.is_show_over&&(this.is_show_over=!0,this.is_over=!0,this.scheduleOnce(function(){var t=cc.instantiate(e.game_result);e.node.addChild(t),t.getComponent("game_result").init({status:1})},5)),this.player&&this.player.node.active&&(this.player_direction==n.up?this.player.moveUp():this.player_direction==n.right?this.player.moveRight():this.player_direction==n.down?this.player.moveDown():this.player_direction==n.left&&this.player.moveLeft())}}}),cc._RF.pop()},{}],game_map:[function(t,e,i){"use strict";cc._RF.push(e,"806f7dg0Q5Jbbmom0b1ZzAZ","game_map");cc.Enum({up:0,right:1,down:2,left:3});cc.Class({extends:cc.Component,properties:{level_arr:[cc.TiledMapAsset]},start:function(){},initMap:function(){this.tiledMap=this.node.getComponent(cc.TiledMap),this.tiledMap.tmxAsset=this.level_arr[cc.vv.UserInfo.level-1],this.bg1=this.tiledMap.getLayer("bg1"),this.bg2=this.tiledMap.getLayer("bg2"),this.bg3=this.tiledMap.getLayer("bg3"),this.objects=this.tiledMap.getObjectGroup("objects"),this.home_wall_pos_arr=this.initHomeWall(),this.home_gid_pos_arr1=[],this.home_gid_pos_arr2=[];for(var t=0;t<this.home_wall_pos_arr.length;t++)this.home_gid_pos_arr1.push(this.bg1.getTileGIDAt(this.home_wall_pos_arr[t]));for(var e=0;e<this.home_wall_pos_arr.length;e++)this.home_gid_pos_arr2.push(this.bg2.getTileGIDAt(this.home_wall_pos_arr[e]));this.bg1.node.active=!0,this.bg2.node.active=!1,this.bg3.node.active=!1;var i=this.objects.getObjects(),n=cc.v2(i[0].x,i[0].y),o=cc.v2(i[1].x,i[1].y),s=cc.v2(i[2].x,i[2].y),a=cc.v2(i[3].x,i[3].y),c=cc.v2(i[4].x,i[4].y),h=cc.v2(i[5].x,i[5].y),l=cc.v2(i[6].x,i[6].y),r=cc.v2(i[7].x,i[7].y),p=cc.v2(i[8].x,i[8].y),d=cc.v2(i[9].x,i[9].y),v=cc.v2(i[10].x,i[10].y),_=cc.v2(i[11].x,i[11].y),m=cc.v2(i[12].x,i[12].y),u=cc.v2(i[13].x,i[13].y),g=cc.v2(i[14].x,i[14].y);this.player_pos=n.add(cc.v2(8,-8)),this.enemy_pos_arr=[o.add(cc.v2(16,-16)),s.add(cc.v2(8,-16)),a.add(cc.v2(8,-16))],this.props_pos_arr=[c.add(cc.v2(16,-16)),h.add(cc.v2(8,-16)),l.add(cc.v2(8,-16)),r.add(cc.v2(8,-16)),p.add(cc.v2(8,-16)),d.add(cc.v2(8,-16)),v.add(cc.v2(8,-16)),_.add(cc.v2(8,-16)),m.add(cc.v2(8,-16)),u.add(cc.v2(8,-16))],this.home_pos=g.add(cc.v2(8,-8))},initHomeWall:function(){var t=[];return t.push(cc.v2(22,51)),t.push(cc.v2(23,51)),t.push(cc.v2(28,51)),t.push(cc.v2(29,51)),t.push(cc.v2(22,50)),t.push(cc.v2(23,50)),t.push(cc.v2(28,50)),t.push(cc.v2(29,50)),t.push(cc.v2(22,49)),t.push(cc.v2(23,49)),t.push(cc.v2(28,49)),t.push(cc.v2(29,49)),t.push(cc.v2(22,48)),t.push(cc.v2(23,48)),t.push(cc.v2(28,48)),t.push(cc.v2(29,48)),t.push(cc.v2(22,47)),t.push(cc.v2(23,47)),t.push(cc.v2(24,47)),t.push(cc.v2(25,47)),t.push(cc.v2(26,47)),t.push(cc.v2(27,47)),t.push(cc.v2(28,47)),t.push(cc.v2(29,47)),t.push(cc.v2(22,46)),t.push(cc.v2(23,46)),t.push(cc.v2(24,46)),t.push(cc.v2(25,46)),t.push(cc.v2(26,46)),t.push(cc.v2(27,46)),t.push(cc.v2(28,46)),t.push(cc.v2(29,46)),t},initPlayer:function(t){if(!(cc.vv.UserInfo.live<=0)){var e=cc.instantiate(cc.vv.Global.game.player_tank_prefab);e.position=this.player_pos,this.node.addChild(e,-1),e.active=!1,e.getComponent("player_tank").is_shield=!0,t&&(t.moveSpeed&&(e.getComponent("player_tank").moveSpeed=t.moveSpeed),t.fireSpeed&&(e.getComponent("player_tank").fireSpeed=t.fireSpeed),t.tank_level&&(e.getComponent("player_tank").tank_level=t.tank_level),e.getComponent("player_tank").changeTankValue());t={is_enemy:!1,callback:function(){e.active=!0;var t=cc.instantiate(cc.vv.Global.game.shield_prefab);e.addChild(t),t.getComponent("shield").init(e.getComponent("player_tank"))}};var i=cc.instantiate(cc.vv.Global.game.appear_prefab);return i.position=this.player_pos,this.node.addChild(i),i.getComponent("appear").init(t),e.getComponent("player_tank")}cc.vv.Global.game.is_over=!0},initEnemy:function(){if(!(cc.vv.Global.enemy_count<=0)){var t=cc.instantiate(cc.vv.Global.game.enemy_tank_prefab);t.position=this.enemy_pos_arr[cc.vv.Global.game.enemy_index],t.active=!1,this.node.addChild(t,-1),t.getComponent("enemy_tank").is_shield=!0,cc.vv.Global.game.enemy_index++,cc.vv.Global.enemy_count--,cc.vv.Global.game.enemy_index>=3&&(cc.vv.Global.game.enemy_index=0);var e={is_enemy:!0,callback:function(){t.active=!0,t.getComponent("enemy_tank").is_shield=!1}},i=cc.instantiate(cc.vv.Global.game.appear_prefab);return i.position=t.position,this.node.addChild(i),i.getComponent("appear").init(e),t.getComponent("enemy_tank")}},initProps:function(){var t=this.props_pos_arr[parseInt(Math.random()*this.props_pos_arr.length)],e=cc.instantiate(cc.vv.Global.game.props_prefab);e.position=t,this.node.addChild(e),cc.vv.Global.game.props&&cc.vv.Global.game.props.node&&cc.vv.Global.game.props.node.active&&cc.vv.Global.game.props.node.destroy(),cc.vv.Global.game.props=e.getComponent("props")},addPoint:function(t){var e=cc.instantiate(cc.vv.Global.game.point_prefab);e.position=t.position,this.node.addChild(e);var i=0;1==t.level?i=100:2==t.level?i=200:3==t.level?i=300:4==t.level?i=400:5==t.level&&(i=500),e.getComponent("point").init(i)},repairHome:function(){console.log("\u4fee\u590dhome");for(var t=0;t<this.home_wall_pos_arr.length;t++)this.bg1.setTileGIDAt(this.home_gid_pos_arr1[t],this.home_wall_pos_arr[t].x,this.home_wall_pos_arr[t].y,this.home_gid_pos_arr1[t]),this.bg2.setTileGIDAt(this.home_gid_pos_arr2[t],this.home_wall_pos_arr[t].x,this.home_wall_pos_arr[t].y,this.home_gid_pos_arr2[t])},getPosFromTiled:function(t){if(t.x<0||t.y<0)return cc.v2(0,0);var e=8*t.x,i=8*(52-t.y);return cc.v2(e,i)},getTiledRoundCoordinate:function(t){var e,i,n=this.bg1.getLayerSize(),o=(this.node.getComponent(cc.TiledMap).getTileSize(),this.tiledMap.getTileSize());return e=Math.round(t.x/o.width),i=Math.round(n.height-t.y/o.height),e>=0&&e<n.width&&i>=0&&i<n.height?cc.v2(e,i):cc.v2(-1,-1)},getTiledCoordinate:function(t){var e,i,n=this.bg1.getLayerSize(),o=(this.node.getComponent(cc.TiledMap).getTileSize(),this.tiledMap.getTileSize());return e=parseInt(t.x/o.width),i=parseInt(n.height-t.y/o.height),e>=0&&e<n.width&&i>=0&&i<n.height?cc.v2(e,i):cc.v2(-1,-1)},getTiledRoundIdFromPos:function(t){var e=this.getTiledRoundCoordinate(t);return e.x<0||e.y<0?-1:this.bg1.getTileGIDAt(e)},getTiledIdFromPos:function(t){var e=this.getTiledCoordinate(t);if(e.x<0||e.y<0)return-1;if(this.bg2.node.active){var i=this.bg2.getTileGIDAt(e);if(i>0)return i}return this.bg1.getTileGIDAt(e)},checkPoint:function(t){var e=this.getTiledIdFromPos(t);return 0!=e&&!cc.vv.Global.isGrassland(e)},collisionTanks:function(t){for(var e=cc.vv.Global.game.enemy_tank_arr,i=0;i<e.length;i++)if(e[i]&&e[i].node&&e[i].node.isValid&&e[i].node.getBoundingBox().contains(t))return!0;var n=cc.vv.Global.game.player;return!!(n&&n.node&&n.isValid&&n.node.getBoundingBox().contains(t))},collisionBullet:function(t,e){for(var i=cc.vv.Global.game.bullet_arr,n=0;n<i.length;n++)if(i[n].isValid&&i[n].getBoundingBox().contains(t)&&i[n].getComponent("bullet").is_enemy!=e)return i[n];return null},collisionBulletAndEnemyTanks:function(t){for(var e=cc.vv.Global.game.enemy_tank_arr,i=0;i<e.length;i++)if(e[i]&&e[i].node&&e[i].node.isValid&&e[i].node.getBoundingBox().contains(t))return e[i];return null},collisionBulletAndPlayerTanks:function(t){var e=cc.vv.Global.game.player;return e&&e.node&&e.node.active&&e.node.isValid&&e.node.getBoundingBox().contains(t)?e:null},onDestroy:function(){console.log("game map destroy")}}),cc._RF.pop()},{}],game_over:[function(t,e,i){"use strict";cc._RF.push(e,"dcaccyN+BFIALfkom/u2qqM","game_over"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.vv.Audio.playGameOver(),this.scheduleOnce(function(){cc.director.loadScene("home_scene")},2)},onDestroy:function(){console.log("game over destroy")}}),cc._RF.pop()},{}],game_result:[function(t,e,i){"use strict";cc._RF.push(e,"13864uJuWtKCLVV8hGVghc1","game_result"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,title:cc.Sprite,stage_lab:cc.Label,again_btn:cc.Node,next_btn:cc.Node,fail_sf:cc.SpriteFrame,success_sf:cc.SpriteFrame},onLoad:function(){var t=this,e=this.bg.getChildByName("total_score").getComponent(cc.Label),i=this.bg.getChildByName("score_1").getComponent(cc.Label),n=this.bg.getChildByName("tank_num_1").getComponent(cc.Label),o=(this.bg.getChildByName("jiantou_1"),this.bg.getChildByName("tank_1"),this.bg.getChildByName("score_2").getComponent(cc.Label)),s=this.bg.getChildByName("tank_num_2").getComponent(cc.Label),a=(this.bg.getChildByName("jiantou_2"),this.bg.getChildByName("tank_2"),this.bg.getChildByName("score_3").getComponent(cc.Label)),c=this.bg.getChildByName("tank_num_3").getComponent(cc.Label),h=(this.bg.getChildByName("jiantou_3"),this.bg.getChildByName("tank_3"),this.bg.getChildByName("score_4").getComponent(cc.Label)),l=this.bg.getChildByName("tank_num_4").getComponent(cc.Label),r=(this.bg.getChildByName("jiantou_4"),this.bg.getChildByName("tank_4"),this.bg.getChildByName("line"),this.bg.getChildByName("total"),this.bg.getChildByName("total_tank_num").getComponent(cc.Label));this.stage_lab.string="STAGE  "+cc.vv.UserInfo.level,i.string="PTS",o.string="PTS",a.string="PTS",h.string="PTS",n.string="",s.string="",c.string="",l.string="",r.string="",this.again_btn.active=!1,this.next_btn.active=!1,e.string=100*cc.vv.Global.die_tank.tank_1+200*cc.vv.Global.die_tank.tank_2+300*cc.vv.Global.die_tank.tank_3+400*cc.vv.Global.die_tank.tank_4;var p=1,d=cc.vv.Global.die_tank.tank_1,v=0;this.schedule(function e(){cc.vv.Audio.playResult(),1==p?(d=cc.vv.Global.die_tank.tank_1,i.string=100*v+" PTS",n.string=v):2==p?(d=cc.vv.Global.die_tank.tank_2,o.string=200*v+" PTS",s.string=v):3==p?(d=cc.vv.Global.die_tank.tank_3,a.string=300*v+" PTS",c.string=v):4==p&&(d=cc.vv.Global.die_tank.tank_4,h.string=400*v+" PTS",l.string=v),++v>d&&(p++,v=0),p>=5&&(r.string=cc.vv.Global.die_tank.tank_1+cc.vv.Global.die_tank.tank_2+cc.vv.Global.die_tank.tank_3+cc.vv.Global.die_tank.tank_4,0==t.data.status?(t.again_btn.x=0,t.again_btn.active=!0):1==t.data.status&&(t.next_btn.active=!0),t.unschedule(e))},.3)},init:function(t){this.data=t,0==t.status?this.title.spriteFrame=this.fail_sf:1==t.status&&(this.title.spriteFrame=this.success_sf)},onClickChongwan:function(){console.log("\u91cd\u73a9");var e=t("UserInfo");cc.vv.UserInfo=new e,cc.vv.Global.game.startGame(),this.node.destroy()},onClickNext:function(){console.log("\u4e0b\u4e00\u5173"),cc.vv.UserInfo.level++,cc.vv.Global.game.startGame(),this.node.destroy()},onDestroy:function(){console.log("game result destroy")}}),cc._RF.pop()},{UserInfo:"UserInfo"}],home_control:[function(t,e,i){"use strict";cc._RF.push(e,"a1fc5/XUiJJF4/aBhASml/p","home_control"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.vv={};var e=t("Enum");cc.vv.Enum=new e;var i=t("Global");cc.vv.Global=new i;var n=t("Config");cc.vv.Config=new n;var o=t("UserInfo");cc.vv.UserInfo=new o;var s=t("Tools");cc.vv.Tools=new s;var a=t("Audio");cc.vv.Audio=new a},onClickBtn:function(){cc.director.loadScene("game_scene")},onDestroy:function(){console.log("home destroy")}}),cc._RF.pop()},{Audio:"Audio",Config:"Config",Enum:"Enum",Global:"Global",Tools:"Tools",UserInfo:"UserInfo"}],player_tank:[function(t,e,i){"use strict";cc._RF.push(e,"8a08aC2QgxMyqzm8Nb+H/Tk","player_tank");var n=t("Tank"),o=cc.Enum({up:0,right:1,down:2,left:3});cc.Class({extends:n,properties:{tank_1:[cc.SpriteFrame],tank_2:[cc.SpriteFrame],tank_3:[cc.SpriteFrame],tank_4:[cc.SpriteFrame]},onLoad:function(){this.map=cc.vv.Global.game.map.getComponent("game_map"),this._super(),cc.vv.UserInfo.live--,this.is_enemy=!1,this.moveSpeed=1.5,this.fireSpeed=3,this.tank_level=1},moveUp:function(){if(!cc.vv.Global.game.is_pause&&!cc.vv.Global.game.is_over&&this.map){var t=-this.node.angle/90,e=this.map.getTiledCoordinate(this.node.position);this.node.position;if(t==o.up);else if(t==o.left){0!=e.x%2&&e.x++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.down){0!=e.y%2&&e.y--;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.right){0!=e.x%2&&e.x++;var s=this.map.getPosFromTiled(e);this.node.position=s}this._super()}},moveDown:function(){if(!cc.vv.Global.game.is_pause&&!cc.vv.Global.game.is_over&&this.map){var t=-this.node.angle/90,e=this.map.getTiledRoundCoordinate(this.node.position);if(t==o.up){0!=e.y%2&&e.y++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.left){0!=e.x%2&&e.x++;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.down);else if(t==o.right){0!=e.x%2&&e.x--;var s=this.map.getPosFromTiled(e);this.node.position=s}this._super()}},moveLeft:function(){if(!cc.vv.Global.game.is_pause&&!cc.vv.Global.game.is_over&&this.map){var t=-this.node.angle/90,e=this.map.getTiledRoundCoordinate(this.node.position);if(t==o.up){0!=e.y%2&&e.y++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.left);else if(t==o.down){0!=e.y%2&&e.y--;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.right){0!=e.x%2&&e.x--;var s=this.map.getPosFromTiled(e);this.node.position=s}this._super()}},moveRight:function(){if(!cc.vv.Global.game.is_pause&&!cc.vv.Global.game.is_over&&this.map){var t=-this.node.angle/90,e=this.map.getTiledRoundCoordinate(this.node.position);if(t==o.up){0!=e.y%2&&e.y++;var i=this.map.getPosFromTiled(e);this.node.position=i}else if(t==o.left){0!=e.x%2&&e.x++;var n=this.map.getPosFromTiled(e);this.node.position=n}else if(t==o.down){0!=e.y%2&&e.y--;var s=this.map.getPosFromTiled(e);this.node.position=s}else o.right;this._super()}},onFire:function(){if(!cc.vv.Global.game.is_pause&&!cc.vv.Global.game.is_over){var t=cc.vv.Global.game.player;t&&t.node&&t.node.active&&this._super()}},onDestroy:function(){console.log("player tank destroy")}}),cc._RF.pop()},{Tank:"Tank"}],point:[function(t,e,i){"use strict";cc._RF.push(e,"3aa47jLu+NHFbrGoT3eZgC6","point"),cc.Class({extends:cc.Component,properties:{points:[cc.SpriteFrame]},start:function(){var t=this;this.scheduleOnce(function(){t.node.destroy()},2)},init:function(t){this.node.getComponent(cc.Sprite)}}),cc._RF.pop()},{}],props:[function(t,e,i){"use strict";cc._RF.push(e,"5fb4co/I59Eq7Vib4W5srMk","props"),cc.Class({extends:cc.Component,properties:{props_arr:[cc.SpriteFrame],icon:cc.Sprite},start:function(){var t=this;cc.vv.Audio.playPowerupAppear(),this.type=0;var e=cc.vv.Tools.random(1,7);1==e?this.type=cc.vv.Enum.Props.zhalei:2==e?this.type=cc.vv.Enum.Props.maozi:3==e?this.type=cc.vv.Enum.Props.tieqiao:4==e?this.type=cc.vv.Enum.Props.star:5==e?this.type=cc.vv.Enum.Props.tank:6==e&&(this.type=cc.vv.Enum.Props.dinglei),this.icon.spriteFrame=this.props_arr[this.type-1],this.schedule(function(){t.icon.node.active=!t.icon.node.active},.3)},update:function(t){var e=cc.vv.Global.game.player;e&&e.node&&e.node.active&&(this.node.getBoundingBox().intersects(e.node.getBoundingBox())&&(cc.vv.Audio.playPowerupPick(),this.type==cc.vv.Enum.Props.zhalei?this.zhalei():this.type==cc.vv.Enum.Props.maozi?this.maozi():this.type==cc.vv.Enum.Props.tieqiao?this.tieqiao():this.type==cc.vv.Enum.Props.star?this.star():this.type==cc.vv.Enum.Props.tank?this.tank():this.type==cc.vv.Enum.Props.dinglei&&this.dinglei(),this.node.destroy()))},zhalei:function(){cc.vv.Global.game.enemy_tank_arr.forEach(function(t){if(t&&t.node&&t.node.active){var e=cc.instantiate(cc.vv.Global.game.fire_flower_prefab);e.position=t.node.position,e.parent=t.node.parent;e.getComponent("fire_flower").init({level:1}),t.node.destroy()}})},maozi:function(){var t=cc.vv.Global.game.player;if(t&&t.node&&t.node.active){var e=cc.instantiate(cc.vv.Global.game.shield_prefab);t.node.addChild(e),e.getComponent("shield").init(t,!0)}},tieqiao:function(){cc.vv.Global.tieqiao_time=(new Date).getTime()},star:function(){var t=cc.vv.Global.game.player;if(t&&t.node&&t.node.active){t.tank_level++,t.tank_level>4&&(t.tank_level=4);var e=cc.vv.Config.getPlayerTankValue(t.tank_level);e&&(e.moveSpeed&&(t.moveSpeed=e.moveSpeed),e.fireSpeed&&(t.fireSpeed=e.fireSpeed)),t.changeTankValue()}},tank:function(){cc.vv.UserInfo.live++},dinglei:function(){cc.vv.Global.dinglei_time=(new Date).getTime()},onDestroy:function(){console.log("props destroy")}}),cc._RF.pop()},{}],rocker:[function(t,e,i){"use strict";cc._RF.push(e,"42438F2BA9N4LhsZQLdeeHN","rocker");var n=cc.Enum({up:0,right:1,down:2,left:3,no:4});cc.Class({extends:cc.Component,properties:{playerNodeSpeed:100,Max_r:100},onLoad:function(){this.rockerBg=this.node.getChildByName("rockerBg"),this.joystick=this.node.getChildByName("joystick"),this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),this.node.parent.on(cc.Node.EventType.TOUCH_START,this.cbTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.cbTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.cbTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.cbTouchCancel,this)},update:function(t){if(!(this.dir.mag()<.5)){var e=180*Math.atan2(this.dir.y,this.dir.x)/Math.PI;e>=-30&&e<30?cc.vv.Global.game.player_direction=n.right:e>=60&&e<120?cc.vv.Global.game.player_direction=n.up:e>=150&&e<180||e>=-180&&e<-150?cc.vv.Global.game.player_direction=n.left:e>=-120&&e<-60&&(cc.vv.Global.game.player_direction=n.down)}},onClickFire:function(){cc.vv.Global.game.player&&cc.vv.Global.game.player.onFire()},onClickBtn:function(){console.log(11111)},cbTouchStart:function(t){t.getLocation();this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0)},cbTouchMove:function(t){var e=t.getLocation(),i=this.node.convertToNodeSpaceAR(e),n=i.mag();this.dir.x=i.x/n,this.dir.y=i.y/n,n>this.Max_r&&(i.x=this.Max_r*i.x/n,i.y=this.Max_r*i.y/n),this.joystick.setPosition(i)},cbTouchEnd:function(t){this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),console.log("end"),cc.vv.Global.game.player_direction=n.no},cbTouchCancel:function(t){this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),console.log("cancel"),cc.vv.Global.game.player_direction=n.no}}),cc._RF.pop()},{}],shield:[function(t,e,i){"use strict";cc._RF.push(e,"7ddbcuQfjJAsqbHi041Hi6m","shield"),cc.Class({extends:cc.Component,properties:{},start:function(){},init:function(t,e){var i=this;t.is_shield=!0,this.getComponent(cc.Animation).play("shield");var n=3;e&&(n=15),this.scheduleOnce(function(){t.is_shield=!1,i.node.destroy()},n)},onDestroy:function(){console.log("shield destroy")}}),cc._RF.pop()},{}],stage:[function(t,e,i){"use strict";cc._RF.push(e,"bebf8SHoyhBfqEFZzEXkLGP","stage"),cc.Class({extends:cc.Component,properties:{layout1:cc.Node,layout2:cc.Node,stage_lab:cc.Label},start:function(){var t=this;cc.vv.Audio.playStart(),this.layout1.active=!1,this.layout2.active=!1,this.layout1.width=this.node.width,this.layout1.height=this.node.height,this.layout1.position=cc.v2(0,0),this.layout2.width=this.node.width,this.layout2.height=this.node.height,this.layout2.position=cc.v2(0,0),this.layout1.y=cc.winSize.height,this.layout2.y=-cc.winSize.height,this.layout1.active=!0,this.layout2.active=!0,this.stage_lab.string="STAGE  "+cc.vv.UserInfo.level,this.layout1.runAction(cc.moveTo(.6,cc.v2(0,0))),this.layout2.runAction(cc.moveTo(.6,cc.v2(0,0))),this.scheduleOnce(function(){cc.vv.Global.game.is_pause=!1,cc.vv.Global.game.is_over=!1,t.node.destroy()},2)},onDestroy:function(){console.log("stage destroy")}}),cc._RF.pop()},{}],toast:[function(t,e,i){"use strict";cc._RF.push(e,"1c070j62v9OhpSn5X1Gcpd1","toast"),cc.Class({extends:cc.Component,properties:{},start:function(){},init:function(t){var e=this,i=t.state;this.getComponent(cc.Label).string=t.text,1==i&&(this.node.y=-cc.winSize.height-100,this.node.runAction(cc.sequence(cc.moveTo(2.5,cc.v2(0,0)),cc.delayTime(.8),cc.callFunc(function(){var t=cc.instantiate(cc.vv.Global.game.game_result);cc.vv.Global.game.node.addChild(t),t.getComponent("game_result").init({status:0}),e.node.destroy()}))))},onDestroy:function(){console.log("toast destroy")}}),cc._RF.pop()},{}]},{},["Audio","Config","Enum","Global","Tank","Tools","UserInfo","appear","bullet","caozuo","direction","enemy_tank","fire_flower","game_map","player_tank","props","rocker","shield","toast","game_control","home_control","game_over","game_result","point","stage"]);