(function(t){if(null==t&&(t=window),!t.puremvc){o.prototype.setNotifyMethod=function(t){this.notify=t},o.prototype.setNotifyContext=function(t){this.context=t},o.prototype.getNotifyMethod=function(){return this.notify},o.prototype.getNotifyContext=function(){return this.context},o.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},o.prototype.compareNotifyContext=function(t){return t===this.context},o.prototype.notify=null,o.prototype.context=null,n.prototype.getName=function(){return this.name},n.prototype.setBody=function(t){this.body=t},n.prototype.getBody=function(){return this.body},n.prototype.setType=function(t){this.type=t},n.prototype.getType=function(){return this.type},n.prototype.toString=function(){var t="Notification Name: "+this.getName();return(t+="\nBody:"+(null==this.body?"null":this.body.toString()))+"\nType:"+(null==this.type?"null":this.type)},n.prototype.name=null,n.prototype.type=null,n.prototype.body=null,i.prototype.sendNotification=function(t,e,o){var n=this.getFacade();n&&n.sendNotification(t,e,o)},i.prototype.facade,i.prototype.initializeNotifier=function(t){this.multitonKey=String(t),this.facade=this.getFacade()},i.prototype.getFacade=function(){if(null==this.multitonKey)throw new Error(i.MULTITON_MSG);return u.getInstance(this.multitonKey)},i.prototype.multitonKey=null,i.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",r.prototype=new i,r.prototype.constructor=r,r.prototype.execute=function(){},p.prototype=new i,p.prototype.constructor=p,p.prototype.subCommands=null,p.prototype.initializeMacroCommand=function(){},p.prototype.addSubCommand=function(t){this.subCommands.push(t)},p.prototype.execute=function(t){for(;this.subCommands.length>0;){var e=new(this.subCommands.shift());e.initializeNotifier(this.multitonKey),e.execute(t)}},a.NAME="Mediator",a.prototype=new i,a.prototype.constructor=a,a.prototype.getMediatorName=function(){return this.mediatorName},a.prototype.setViewComponent=function(t){this.viewComponent=t},a.prototype.getViewComponent=function(){return this.viewComponent},a.prototype.listNotificationInterests=function(){return[]},a.prototype.handleNotification=function(){},a.prototype.onRegister=function(){},a.prototype.onRemove=function(){},a.prototype.mediatorName=null,a.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new i,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(t){this.data=t},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,u.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},u.getInstance=function(t){return null==t?null:(null==u.instanceMap[t]&&(u.instanceMap[t]=new u(t)),u.instanceMap[t])},u.prototype.initializeController=function(){null==this.controller&&(this.controller=y.getInstance(this.multitonKey))},u.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},u.prototype.initializeView=function(){null==this.view&&(this.view=l.getInstance(this.multitonKey))},u.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},u.prototype.removeCommand=function(t){this.controller.removeCommand(t)},u.prototype.hasCommand=function(t){return this.controller.hasCommand(t)},u.prototype.registerProxy=function(t){this.model.registerProxy(t)},u.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},u.prototype.removeProxy=function(t){var e=null;return null!=this.model&&(e=this.model.removeProxy(t)),e},u.prototype.hasProxy=function(t){return this.model.hasProxy(t)},u.prototype.registerMediator=function(t){null!=this.view&&this.view.registerMediator(t)},u.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},u.prototype.removeMediator=function(t){var e=null;return null!=this.view&&(e=this.view.removeMediator(t)),e},u.prototype.hasMediator=function(t){return this.view.hasMediator(t)},u.prototype.sendNotification=function(t,e,o){this.notifyObservers(new n(t,e,o))},u.prototype.notifyObservers=function(t){null!=this.view&&this.view.notifyObservers(t)},u.prototype.initializeNotifier=function(t){this.multitonKey=t},u.hasCore=function(t){return null!=u.instanceMap[t]},u.removeCore=function(t){null!=u.instanceMap[t]&&(c.removeModel(t),l.removeView(t),y.removeController(t),delete u.instanceMap[t])},u.prototype.controller=null,u.prototype.model=null,u.prototype.view=null,u.prototype.multitonKey=null,u.instanceMap=[],u.MULTITON_MSG="Facade instance for this Multiton key already constructed!",l.prototype.initializeView=function(){},l.getInstance=function(t){return null==t?null:(null==l.instanceMap[t]&&(l.instanceMap[t]=new l(t)),l.instanceMap[t])},l.prototype.registerObserver=function(t,e){null!=this.observerMap[t]?this.observerMap[t].push(e):this.observerMap[t]=[e]},l.prototype.notifyObservers=function(t){if(null!=this.observerMap[t.getName()]){for(var e,o=this.observerMap[t.getName()],n=[],i=0;i<o.length;i++)e=o[i],n.push(e);for(i=0;i<n.length;i++)(e=n[i]).notifyObserver(t)}},l.prototype.removeObserver=function(t,e){for(var o=this.observerMap[t],n=0;n<o.length;n++)if(1==o[n].compareNotifyContext(e)){o.splice(n,1);break}0==o.length&&delete this.observerMap[t]},l.prototype.registerMediator=function(t){if(null==this.mediatorMap[t.getMediatorName()]){t.initializeNotifier(this.multitonKey),this.mediatorMap[t.getMediatorName()]=t;var e=t.listNotificationInterests();if(e.length>0)for(var n=new o(t.handleNotification,t),i=0;i<e.length;i++)this.registerObserver(e[i],n);t.onRegister()}},l.prototype.retrieveMediator=function(t){return this.mediatorMap[t]},l.prototype.removeMediator=function(t){var e=this.mediatorMap[t];if(e){for(var o=e.listNotificationInterests(),n=0;n<o.length;n++)this.removeObserver(o[n],e);delete this.mediatorMap[t],e.onRemove()}return e},l.prototype.hasMediator=function(t){return null!=this.mediatorMap[t]},l.removeView=function(t){delete l.instanceMap[t]},l.prototype.mediatorMap=null,l.prototype.observerMap=null,l.instanceMap=[],l.prototype.multitonKey=null,l.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(t){return null==t?null:(null==c.instanceMap[t]&&(c.instanceMap[t]=new c(t)),c.instanceMap[t])},c.prototype.registerProxy=function(t){t.initializeNotifier(this.multitonKey),this.proxyMap[t.getProxyName()]=t,t.onRegister()},c.prototype.retrieveProxy=function(t){return this.proxyMap[t]},c.prototype.hasProxy=function(t){return null!=this.proxyMap[t]},c.prototype.removeProxy=function(t){var e=this.proxyMap[t];return e&&(this.proxyMap[t]=null,e.onRemove()),e},c.removeModel=function(t){delete c.instanceMap[t]},c.prototype.proxyMap=null,c.instanceMap=[],c.prototype.multitonKey,c.MULTITON_MSG="Model instance for this Multiton key already constructed!",y.prototype.initializeController=function(){this.view=l.getInstance(this.multitonKey)},y.getInstance=function(t){return null==t?null:(null==this.instanceMap[t]&&(this.instanceMap[t]=new this(t)),this.instanceMap[t])},y.prototype.executeCommand=function(t){var e=this.commandMap[t.getName()];if(null!=e){var o=new e;o.initializeNotifier(this.multitonKey),o.execute(t)}},y.prototype.registerCommand=function(t,e){null==this.commandMap[t]&&this.view.registerObserver(t,new o(this.executeCommand,this)),this.commandMap[t]=e},y.prototype.hasCommand=function(t){return null!=this.commandMap[t]},y.prototype.removeCommand=function(t){this.hasCommand(t)&&(this.view.removeObserver(t,this),this.commandMap[t]=null)},y.removeController=function(t){delete this.instanceMap[t]},y.prototype.view=null,y.prototype.commandMap=null,y.prototype.multitonKey=null,y.instanceMap=[],y.MULTITON_MSG="controller key for this Multiton key already constructed";var e={global:function(){return this}(),extend:function(t,e){if("function"!=typeof t)throw new TypeError("#extend- child should be Function");if("function"!=typeof e)throw new TypeError("#extend- parent should be Function");if(e!==t){var o=new Function;return o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},decorate:function(t,e){for(var o in e)t[o]=e[o];return t}};t.puremvc={View:l,Model:c,Controller:y,SimpleCommand:r,MacroCommand:p,Facade:u,Mediator:a,Observer:o,Notification:n,Notifier:i,Proxy:s,define:function(t,o,n){t||(t={});var i,r,p=t.name,a=t.parent,s="function"==typeof a,u=t.scope||null;if("parent"in t&&!s)throw new TypeError("Class parent must be Function");if(t.hasOwnProperty("constructor")){if("function"!=typeof(i=t.constructor))throw new TypeError("Class constructor must be Function")}else i=s?function(){a.apply(this,arguments)}:new Function;if(s&&e.extend(i,a),o&&(r=i.prototype,e.decorate(r,o),r.constructor=i),n&&e.decorate(i,n),p){if("string"!=typeof p)throw new TypeError("Class name must be primitive string");h(p,i,u)}return i},declare:h}}function o(t,e){this.setNotifyMethod(t),this.setNotifyContext(e)}function n(t,e,o){this.name=t,this.body=e,this.type=o}function i(){}function r(){}function p(){this.subCommands=[],this.initializeMacroCommand()}function a(t,e){this.mediatorName=t||this.constructor.NAME,this.viewComponent=e}function s(t,e){this.proxyName=t||this.constructor.NAME,null!=e&&this.setData(e)}function u(t){if(null!=u.instanceMap[t])throw new Error(u.MULTITON_MSG);this.initializeNotifier(t),u.instanceMap[t]=this,this.initializeFacade()}function l(t){if(null!=l.instanceMap[t])throw new Error(l.MULTITON_MSG);this.multitonKey=t,l.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(t){if(c.instanceMap[t])throw new Error(c.MULTITON_MSG);this.multitonKey=t,c.instanceMap[t]=this,this.proxyMap=[],this.initializeModel()}function y(t){if(null!=y.instanceMap[t])throw new Error(y.MULTITON_MSG);this.multitonKey=t,y.instanceMap[this.multitonKey]=this,this.commandMap=new Array,this.initializeController()}function h(t,o,n){for(var i,r,p=t.split("."),a=n||e.global,s=0,u=p.length;s<u;s++)i=a,a=null==a[r=p[s]]?a[r]={}:a[r];return null==o?a:i[r]=o}})(this),puremvc.Facade=puremvc.Facade.getInstance("game");